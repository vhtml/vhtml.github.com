<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ­ªé—¹æ—¥å¿—</title>
  
  <subtitle>äººä¸å†™æ–‡ç« ï¼Œè·Ÿå’¸é±¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://vhtml.github.io/"/>
  <updated>2019-01-20T07:40:09.802Z</updated>
  <id>https://vhtml.github.io/</id>
  
  <author>
    <name>æ­ªé—¹</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Ajvï¼šé«˜æ•ˆçš„JSONæ¨¡å¼æ ¡éªŒå™¨</title>
    <link href="https://vhtml.github.io/2019/01/16/NPM__ajv/"/>
    <id>https://vhtml.github.io/2019/01/16/NPM__ajv/</id>
    <published>2019-01-16T03:50:47.000Z</published>
    <updated>2019-01-20T07:40:09.802Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ç›´æƒ³å†™ä¸€ä¸ªä¼˜ç§€å¼€æºnpmåŒ…çš„åˆ†äº«ä¸å­¦ä¹ ç³»åˆ—ï¼Œé•¿ä¹…å†™ï¼ŒæŒç»­å†™ã€‚ä½†æ·±çŸ¥åšæŒä¸å®¹æ˜“ï¼Œä¸”ä¸‡äº‹å¼€å¤´éš¾ã€‚</p><p>ä»Šå¤©åˆšå¥½æœ‰äº›é—²æš‡ï¼Œåœ¨çœ‹ä¸€äº›webpack loaderæºç çš„æ—¶å€™ï¼Œå‘ç°ä¸€ä¸ªä¸é”™çš„åŒ…â€”â€”Ajvï¼Œæœ‰äº†ä¸€ç§æƒ³å­¦ä¹ å’Œåˆ†äº«ä¹‹çš„å†²åŠ¨ã€‚äºæ˜¯è¿™ä¸ªç³»åˆ—å°±æœ‰äº†å¼€å¤´ã€‚</p><a id="more"></a><h3 id="å®˜ç½‘"><a href="#å®˜ç½‘" class="headerlink" title="å®˜ç½‘"></a>å®˜ç½‘</h3><p><a href="https://ajv.js.org/" target="_blank" rel="noopener">https://ajv.js.org/</a>ï¼Œå®˜ç½‘ä¸Šæœ‰å¦‚ä¸‹æè¿°ï¼š</p><blockquote><p>The fastest JSON-Schema validator for Node.js and browser. Supports draft-04/06/07.</p></blockquote><p>JSON-Schemaæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿåœ¨å­¦ä¹ ajvä¹‹å‰æˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œç”šè‡³æ²¡å¬è¿‡ã€‚ä½†è¿™ä¸æ¯«ä¸å½±å“æˆ‘ä»¬ä½¿ç”¨ajvï¼Œå› ä¸ºç†è§£å®ƒå¾ˆç®€å•ã€‚</p><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>å…ˆæ¥çœ‹çœ‹ajvåœ¨nodeä¸Šæ€ä¹ˆä½¿ç”¨å§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Ajv = <span class="built_in">require</span>(<span class="string">'ajv'</span>)</span><br><span class="line"><span class="keyword">const</span> ajv = <span class="keyword">new</span> Ajv(&#123;<span class="attr">allErrors</span>: <span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™å°±æ˜¯JSON-Schema</span></span><br><span class="line"><span class="keyword">const</span> schema = &#123;</span><br><span class="line">  properties: &#123;</span><br><span class="line">    foo: &#123; <span class="attr">type</span>: <span class="string">'string'</span> &#125;,</span><br><span class="line">    bar: &#123; <span class="attr">type</span>: <span class="string">'number'</span>, <span class="string">'maximum'</span>: <span class="number">3</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> validate = ajv.compile(schema)</span><br><span class="line"></span><br><span class="line">test(&#123;<span class="attr">foo</span>: <span class="string">'abc'</span>, <span class="attr">bar</span>: <span class="number">2</span>&#125;)</span><br><span class="line">test(&#123;<span class="attr">foo</span>: <span class="number">2</span>, <span class="attr">bar</span>: <span class="number">4</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ ¡éªŒJSONæ•°æ®æ˜¯å¦ç¬¦åˆschemaçš„å®šä¹‰</span></span><br><span class="line">  <span class="keyword">const</span> valid = validate(data)</span><br><span class="line">  <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">    <span class="comment">// ä¸ºtrueï¼Œæ ¡éªŒé€šè¿‡</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Valid!'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸é€šè¿‡ï¼Œæ‰“å°å‡ºé”™è¯¯åŸå› </span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Invalid: '</span> + ajv.errorsText(validate.errors))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€ä¹ˆæ ·ï¼ŒğŸ˜å…³äºJSON-Schemaçš„å®šä¹‰æ˜¯ä¸æ˜¯æœ‰ç‚¹çœ¼ç†Ÿï¼Ÿå¦‚æœä½ æ­£åœ¨ä½¿ç”¨Vueæˆ–è€…Reactï¼Œä¼šå‘ç°å®ƒå¾ˆåƒpropsä¸­å¯¹å±æ€§ç±»å‹çš„å®šä¹‰ã€‚åˆæˆ–è€…ä½ æ­£åœ¨ä½¿ç”¨ORMï¼ˆå¦‚Sequelizeï¼‰ï¼Œå®ƒå¾ˆåƒå®šä¹‰Modelæ—¶å¯¹å­—æ®µçš„æè¿°ã€‚</p><p>å®é™…ä¸Šï¼ŒJSON-Schemaæ­£æ˜¯ä¸€ç§åŸºäºJSONæ ¼å¼å®šä¹‰JSONæ•°æ®ç»“æ„çš„è§„èŒƒã€‚ajvæ­£æ˜¯åŸºäºJSON-Schemaå®šä¹‰æ¥å¯¹JSONæ ¼å¼è¿›è¡Œæ ¡éªŒçš„å·¥å…·ã€‚JSON-Schemaçš„ä½¿ç”¨åº”è¯¥æ˜¯æå…¶å¹¿æ³›çš„ï¼Œåœ¨ä»»ä½•éœ€è¦ä»¥JSONæ ¼å¼è¾“å…¥è¾“å‡ºçš„åœ°æ–¹ï¼Œå¦‚webpack loaderçš„é€‰é¡¹é…ç½®ï¼Œå¯¹æ¥å£è¿”å›æ ¼å¼çš„çº¦æŸï¼Œæ¥å£æ–‡æ¡£çš„è¾“å‡ºï¼ˆå¦‚swaggerï¼‰ï¼Œä½ çš„å¼€å‘å·¥å…·çš„è‡ªå®šä¹‰é…ç½®ï¼Œç”šè‡³ç”Ÿæˆéšæœºæ•°æ®ï¼ˆè¿˜è®°å¾—mockjså—ï¼‰ç­‰ï¼Œéƒ½æ˜¯å®ƒå‘æŒ¥å¼ºå¤§ä½œç”¨çš„åœ°æ–¹ã€‚</p><h3 id="å‘¨è¾¹æ’ä»¶"><a href="#å‘¨è¾¹æ’ä»¶" class="headerlink" title="å‘¨è¾¹æ’ä»¶"></a>å‘¨è¾¹æ’ä»¶</h3><ul><li><a href="https://github.com/epoberezkin/ajv-async" target="_blank" rel="noopener">ajv-async</a> å¯ä»¥å¯ç”¨å¼‚æ­¥æ ¡éªŒæ¨¡å¼</li><li><a href="https://github.com/jessedc/ajv-cli" target="_blank" rel="noopener">ajv-cli</a> å¯ä»¥è®©ä½ åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨ajv</li><li><a href="https://github.com/epoberezkin/ajv-errors" target="_blank" rel="noopener">ajv-errors</a> å¯ä»¥å®ç°è¯¦ç»†çš„è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯</li><li><a href="https://github.com/epoberezkin/ajv-i18n" target="_blank" rel="noopener">ajv-i18n</a> å¯ä»¥å›½é™…åŒ–é”™è¯¯ä¿¡æ¯</li><li><a href="https://github.com/epoberezkin/ajv-keywords" target="_blank" rel="noopener">ajv-keywords</a> æ‰©å±•JSON-Schemaçš„å…³é”®å­—ï¼Œå¾ˆå¼ºå¤§</li></ul><p>è¦å­¦ä¼šä½¿ç”¨ajvï¼Œæœ€å¥½çš„æ–¹å¼æ˜¯æŒæ¡JSON-Schemaï¼Œè¿™æ˜¯åæ¥è¡¥ä¸Šçš„å…³äºJSON-Schemaçš„è¯¦ç»†ä»‹ç»â€”â€”<a href="/2019/01/21/JSON_Schema/">ä¼ é€é—¨</a>ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€ç›´æƒ³å†™ä¸€ä¸ªä¼˜ç§€å¼€æºnpmåŒ…çš„åˆ†äº«ä¸å­¦ä¹ ç³»åˆ—ï¼Œé•¿ä¹…å†™ï¼ŒæŒç»­å†™ã€‚ä½†æ·±çŸ¥åšæŒä¸å®¹æ˜“ï¼Œä¸”ä¸‡äº‹å¼€å¤´éš¾ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¤©åˆšå¥½æœ‰äº›é—²æš‡ï¼Œåœ¨çœ‹ä¸€äº›webpack loaderæºç çš„æ—¶å€™ï¼Œå‘ç°ä¸€ä¸ªä¸é”™çš„åŒ…â€”â€”Ajvï¼Œæœ‰äº†ä¸€ç§æƒ³å­¦ä¹ å’Œåˆ†äº«ä¹‹çš„å†²åŠ¨ã€‚äºæ˜¯è¿™ä¸ªç³»åˆ—å°±æœ‰äº†å¼€å¤´ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="åŒ…ç½—ä¸‡è±¡" scheme="https://vhtml.github.io/categories/%E5%8C%85%E7%BD%97%E4%B8%87%E8%B1%A1/"/>
    
    
      <category term="npm" scheme="https://vhtml.github.io/tags/npm/"/>
    
      <category term="json" scheme="https://vhtml.github.io/tags/json/"/>
    
  </entry>
  
  <entry>
    <title>æ£€æµ‹â€œèµ„æºâ€æ˜¯å¦åˆå§‹åŒ–å®Œæˆçš„ç®€å•æ–¹æ³•</title>
    <link href="https://vhtml.github.io/2018/07/09/ready-promise/"/>
    <id>https://vhtml.github.io/2018/07/09/ready-promise/</id>
    <published>2018-07-09T08:50:00.000Z</published>
    <updated>2018-12-11T11:55:24.489Z</updated>
    
    <content type="html"><![CDATA[<p>æ ‡é¢˜å®åœ¨ä¸çŸ¥é“æ€ä¹ˆå†™äº†ï¼Œæ„Ÿè§‰æ€ä¹ˆå†™éƒ½æœ‰ç‚¹ä¸å¤ªå‡†ç¡®ã€‚ç®€å•æè¿°ä¸‹åœºæ™¯ã€‚</p><p>æ¯”å¦‚åœ¨hybridå¼€å‘æ—¶ï¼Œä½¿ç”¨JsBridgeæä¾›æ“ä½œç»™jsï¼Œå¦‚æœæä¾›çš„æ“ä½œéœ€è¦åœ¨webé¡µé¢åŠ è½½å®Œç«‹å³è°ƒç”¨ï¼ˆå¦‚åŸ‹ç‚¹æ—¥å¿—ä¹‹ç±»çš„ï¼‰ï¼Œå¯èƒ½è°ƒç”¨å¤±è´¥ï¼Œå³ä½¿æ˜¯åœ¨window.onloadé‡Œè°ƒç”¨ä¹Ÿæœªå¿…èƒ½è·å–åˆ°ï¼Œè€Œç³»ç»Ÿåˆæ²¡æœ‰æä¾›å‡†ç¡®çš„ç›‘å¬äº‹ä»¶æ¥åˆ¤æ–­ï¼Œæ‰€ä»¥é€šå¸¸çš„åšæ³•å¯èƒ½ä¼šæ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// TODO è°ƒç”¨jsBridgeæä¾›çš„æ–¹æ³•</span></span><br><span class="line">&#125;, <span class="number">600</span>)</span><br></pre></td></tr></table></figure><p>å»¶è¿Ÿä¸€å°æ®µæ—¶é—´å†å»æ‰§è¡Œï¼Œè¿™ç§æ–¹æ³•è™½ç„¶å¯è¡Œï¼Œä½†æ€»è§‰å¾—å¾ˆè›‹ç–¼ã€‚å› ä¸ºè™½ç„¶JsBridgeä¸ä¼šç«‹å³åŠ è½½å®Œæˆï¼Œä½†ä¸åŒçš„ç³»ç»Ÿä¸‹æˆ–ç”±äºç¼“å­˜çš„æƒ…å†µä¸‹ï¼ŒåŠ è½½æ—¶é—´å„ä¸ç›¸åŒã€‚</p><a id="more"></a><p>ä¸ºäº†èƒ½è¾ƒä¸ºå‡†ç¡®çš„æ£€æµ‹åˆ°å…¶æ˜¯å¦åŠ è½½å®Œæˆï¼Œä¹Ÿåªå¥½å‹‰ä¸ºå…¶éš¾çš„ä½¿ç”¨å®šæ—¶å™¨å»ä¸åœåœ°æ£€æµ‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ–¹æ³•æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span>.jsBridgeAction === <span class="string">'function'</span>) &#123;</span><br><span class="line">    clearInterval(timer)</span><br><span class="line">    <span class="comment">// TODO åšè¯¥åšçš„äº‹</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">50</span>)</span><br></pre></td></tr></table></figure><p>ä¹Ÿè¿˜å¥½ï¼Œåœ¨æ­¤æä¾›ä¸€ç§å°è£…æ–¹æ³•ï¼Œç”¨èµ·æ¥è·Ÿonloadäº‹ä»¶ç›‘å¬ä¼¼çš„ï¼Œçš†å¤§æ¬¢å–œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> readyPromise = (variableName, &#123;</span><br><span class="line">  rate = <span class="number">50</span>,</span><br><span class="line">  timeout = <span class="number">1500</span></span><br><span class="line">&#125; = &#123;&#125;) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> variableName !== <span class="string">'string'</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'The first argument should be a string'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> rateTimer, overTimer</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> _GLOBAL = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'return this'</span>)()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> _clearTimer = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    clearInterval(rateTimer)</span><br><span class="line">    clearTimeout(overTimer)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (_GLOBAL[variableName]) &#123;</span><br><span class="line">      resolve()</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    rateTimer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (_GLOBAL[variableName]) &#123;</span><br><span class="line">        _clearTimer()</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, rate)</span><br><span class="line"></span><br><span class="line">    overTimer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      _clearTimer()</span><br><span class="line">      reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'timeout'</span>))</span><br><span class="line">    &#125;, timeout)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">readyPromise(<span class="string">'jsBridgeAction'</span>).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// TODO</span></span><br><span class="line">&#125;).catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(e)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨<a href="https://github.com/vhtml/ready-promise" target="_blank" rel="noopener">ready-promise</a>åº“ï¼Œä½¿ç”¨æ–¹æ³•ç¨æœ‰ä¸åŒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm i ready-promise -S</span><br><span class="line">``</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">import readyPromise from <span class="string">'ready-promise'</span></span><br><span class="line">readyPromise(() =&gt; &#123;</span><br><span class="line">  <span class="built_in">return</span> typeof window.jsBridgeAction === <span class="string">'function'</span></span><br><span class="line">&#125;).<span class="keyword">then</span>(() =&gt; &#123;&#125;).catch(e =&gt; &#123;&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ ‡é¢˜å®åœ¨ä¸çŸ¥é“æ€ä¹ˆå†™äº†ï¼Œæ„Ÿè§‰æ€ä¹ˆå†™éƒ½æœ‰ç‚¹ä¸å¤ªå‡†ç¡®ã€‚ç®€å•æè¿°ä¸‹åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚åœ¨hybridå¼€å‘æ—¶ï¼Œä½¿ç”¨JsBridgeæä¾›æ“ä½œç»™jsï¼Œå¦‚æœæä¾›çš„æ“ä½œéœ€è¦åœ¨webé¡µé¢åŠ è½½å®Œç«‹å³è°ƒç”¨ï¼ˆå¦‚åŸ‹ç‚¹æ—¥å¿—ä¹‹ç±»çš„ï¼‰ï¼Œå¯èƒ½è°ƒç”¨å¤±è´¥ï¼Œå³ä½¿æ˜¯åœ¨window.onloadé‡Œè°ƒç”¨ä¹Ÿæœªå¿…èƒ½è·å–åˆ°ï¼Œè€Œç³»ç»Ÿåˆæ²¡æœ‰æä¾›å‡†ç¡®çš„ç›‘å¬äº‹ä»¶æ¥åˆ¤æ–­ï¼Œæ‰€ä»¥é€šå¸¸çš„åšæ³•å¯èƒ½ä¼šæ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;setTimeout(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// TODO è°ƒç”¨jsBridgeæä¾›çš„æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;number&quot;&gt;600&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å»¶è¿Ÿä¸€å°æ®µæ—¶é—´å†å»æ‰§è¡Œï¼Œè¿™ç§æ–¹æ³•è™½ç„¶å¯è¡Œï¼Œä½†æ€»è§‰å¾—å¾ˆè›‹ç–¼ã€‚å› ä¸ºè™½ç„¶JsBridgeä¸ä¼šç«‹å³åŠ è½½å®Œæˆï¼Œä½†ä¸åŒçš„ç³»ç»Ÿä¸‹æˆ–ç”±äºç¼“å­˜çš„æƒ…å†µä¸‹ï¼ŒåŠ è½½æ—¶é—´å„ä¸ç›¸åŒã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="webæŠ€æœ¯" scheme="https://vhtml.github.io/categories/web%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="javascript" scheme="https://vhtml.github.io/tags/javascript/"/>
    
      <category term="lib" scheme="https://vhtml.github.io/tags/lib/"/>
    
  </entry>
  
  <entry>
    <title>babel-polyfillå’Œtransform-runtimeæ­ç§˜</title>
    <link href="https://vhtml.github.io/2018/05/02/babel-polyfill-vs-transform-runtime/"/>
    <id>https://vhtml.github.io/2018/05/02/babel-polyfill-vs-transform-runtime/</id>
    <published>2018-05-02T11:30:00.000Z</published>
    <updated>2018-12-13T10:53:51.948Z</updated>
    
    <content type="html"><![CDATA[<p>å½“å‰å‰ç«¯çš„å¼€å‘ï¼Œå·²ç»åŸºæœ¬ç¦»ä¸å¼€<code>babel</code>çš„ä½¿ç”¨äº†ã€‚</p><p>è€Œ<code>babel</code>ä¸‹ä¸¤å‘˜å¤§å°†<code>babel-polyfill</code>å’Œ<code>transform-runtime</code>ä¹Ÿç»å¸¸å‡ºç°åœ¨å„ä½å‰ç«¯åŒèƒçš„ä¸šåŠ¡åŠåº“çš„å¼€å‘ä¸­ï¼Œè®©æˆ‘ä»¬å¾—ä»¥æ¬¢å¿«åœ°ä½¿ç”¨jsçš„å„ç§é«˜çº§è¯­æ³•ä»¥åŠç‰›Xçš„apiã€‚å¯è™½è¯´æ˜¯å¦‚æ­¤å¸¸ç”¨ï¼Œå¾ˆå¤šå‰ç«¯åŒèƒç”šè‡³æ˜¯å‰ç«¯è€å¸æœºä¹Ÿå¸¸å¸¸æä¸æ¸…äºŒè€…çš„å…³ç³»ï¼Œä»¥è‡³é™·å…¥è«åçš„ç–‘æƒ‘å½“ä¸­ã€‚</p><p>æ­£åœ¨è¿™ä¸ªæ—¶å€™ï¼Œä¸€åä¸æ„¿éœ²é¢çš„ç½‘å‹ï¼Œæœ¬ç€åˆ¨æ ¹é—®åº•çš„é’»(qiu)ç ”(nue)ç²¾ç¥ï¼Œä¸€çª¥äºŒè€…çš„æœ¬è´¨ï¼Œå‘å¤§å®¶èŠä¸€èŠä¸¤è€…çš„å…³ç³»ã€‚</p><a id="more"></a><p>åœ¨æ­¤ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹<a href="https://github.com/zloirock/core-js" target="_blank" rel="noopener">core-js</a>è¿™ä¸ªåº“ï¼Œç‰ˆæœ¬<code>2.5.7</code>ã€‚æ‰“å¼€å®ƒçš„githubä¸»é¡µï¼Œå¦‚ä¸‹ï¼š</p><p><img src="/images/core-js-partial.png" alt="core-js"></p><p>æˆ‘ä»¬å‘ç°ï¼Œå‘ƒï¼Œä½œè€…æ­£åœ¨æ‰¾å·¥ä½œï¼Œè¿™ä¸ªä¸æ˜¯é‡ç‚¹ã€‚ä»è¿™æ®µæ–‡å­—ä¸­æˆ‘ä»¬çŸ¥é“äº†<code>core-js</code>æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„jsæ ‡å‡†åº“ï¼ŒåŒ…å«ç€å„ç§å«ç‰‡ç­‰ã€‚é‡ç‚¹åœ¨æœ€åä¸€å¥ï¼Œ<strong>æˆ‘ä»¬å¯ä»¥æŒ‰éœ€ä½¿ç”¨ï¼Œæˆ–è€…ä¸æ±¡æŸ“å…¨å±€å‘½åç©ºé—´åœ°ä½¿ç”¨å®ƒ</strong>ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è‡³å°‘åº”è¯¥æœ‰ä¸¤ç§æ–¹å¼ä½¿ç”¨å®ƒï¼š</p><ol><li><p>åœ¨ç¨‹åºå…¥å£çš„æœ€å¼€å§‹å¤„å¼•å…¥ï¼Œå½“æˆå«ç‰‡ä½¿ç”¨ï¼Œä¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'core-js/shim'</span>)</span><br></pre></td></tr></table></figure></li><li><p>å½“æˆä¸€ä¸ªæ™®é€šçš„commonjsåº“ä½¿ç”¨ï¼Œä¸æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> core = <span class="built_in">require</span>(<span class="string">'core-js/library'</span>)</span><br></pre></td></tr></table></figure></li><li><p>å®é™…ä¸Šï¼Œè¿˜æœ‰ç¬¬ä¸‰ç§ï¼Œä¸€è‚¡è„‘å…¨å¼•å…¥ï¼ŒåŒæ ·ä¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'core-js'</span>)</span><br></pre></td></tr></table></figure></li></ol><p>å¥½çš„ï¼Œå›åˆ°æˆ‘ä»¬çš„ä¸»è§’å½“ä¸­ã€‚</p><h3 id="babel-polyfill"><a href="#babel-polyfill" class="headerlink" title="babel-polyfill"></a>babel-polyfill</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹<code>babel-polyfill</code>ï¼Œä»¥ç‰ˆæœ¬<code>6.26.3</code>ä¸ºä¾‹ï¼Œæ‰¾åˆ°å®‰è£…åŒ…çš„å…¥å£æ–‡ä»¶<code>lib/index.js</code>ï¼Œç®€æ´çš„æ•°è¡Œä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (global._babelPolyfill) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"only one instance of babel-polyfill is allowed"</span>);</span><br><span class="line">&#125;</span><br><span class="line">global._babelPolyfill = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"core-js/shim"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"regenerator-runtime/runtime"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Should be removed in the next major release:</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"core-js/fn/regexp/escape"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> DEFINE_PROPERTY = <span class="string">"defineProperty"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">define</span>(<span class="params">O, key, value</span>) </span>&#123;</span><br><span class="line">  O[key] || <span class="built_in">Object</span>[DEFINE_PROPERTY](O, key, &#123;</span><br><span class="line">    writable:     <span class="literal">true</span>,</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    value:        value</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">define(<span class="built_in">String</span>.prototype, <span class="string">"padLeft"</span>, <span class="string">""</span>.padStart);</span><br><span class="line">define(<span class="built_in">String</span>.prototype, <span class="string">"padRight"</span>, <span class="string">""</span>.padEnd);</span><br><span class="line"></span><br><span class="line"><span class="comment">// eslint-disable-next-line max-len</span></span><br><span class="line"><span class="string">"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill"</span>.split(<span class="string">","</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">  [][key] &amp;&amp; define(<span class="built_in">Array</span>, key, <span class="built_in">Function</span>.call.bind([][key]));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ³¨é‡Šåé¢çš„å°±ä¸ç”¨çœ‹äº†ï¼Œå°†åœ¨ä¸‹ä¸€ä¸ªä¸»ç‰ˆæœ¬å‘å¸ƒæ—¶ç§»é™¤æ‰ã€‚ç„¶åæˆ‘ä»¬çœ‹åˆ°åªå¼•å…¥äº†ä¸¤ä¸ªåº“<code>core-js/shim</code>å’Œ<code>regenerator-runtime/runtime</code>ã€‚å‰è€…æ ¹æ®<code>core-js</code>çš„ç¬¬ä¸€æ¡ä½¿ç”¨æ–¹å¼ï¼Œæ˜¯ä½œä¸ºjså«ç‰‡ä½¿ç”¨çš„ã€‚åè€…ä¼šæä¾›ä¸€ä¸ªå…¨å±€å‡½æ•°<code>regeneratorRuntime</code>ï¼Œè¿™ä¸ªå°±å‰å®³äº† ï¼Œæˆ‘ä»¬ä¹‹æ‰€ä»¥èƒ½å¤Ÿæ¬¢å¿«çš„ä½¿ç”¨<code>async</code>å’Œ<code>await</code>ï¼Œå…¨æ˜¯å®ƒçš„åŠŸåŠ³ã€‚åˆ°æ­¤æˆ‘ä»¬å¤§æ¦‚çŸ¥é“äº†<code>babel-polyfill</code>å®é™…ä¸Šæ˜¯ä¸€ç§å«ç‰‡æŠ€æœ¯ï¼Œä¿è¯äº†jsåœ¨å„ç‰ˆæœ¬ä¸‹çš„ä¸€è‡´æ€§ã€‚</p><h3 id="babel-plugin-transform-runtime"><a href="#babel-plugin-transform-runtime" class="headerlink" title="babel-plugin-transform-runtime"></a>babel-plugin-transform-runtime</h3><p>å†æ¥çœ‹çœ‹<code>babel-plugin-transform-runtime</code>ï¼Œä»¥<code>6.23.0</code>ä¸ºä¾‹ï¼Œè¿™æ˜¯ä¸€ä¸ªbabelæ’ä»¶ï¼Œä¾èµ–<code>babel-runtime</code>ï¼Œè€Œ<code>babel-runtime</code>åˆä¾èµ–<code>core-js</code>å’Œ<code>regenerator-runtime</code>ã€‚æ˜¯ä¸æ˜¯éšçº¦è§‰å¾—<code>babel-polyfill</code>å’Œ<code>babel-plugin-transform-runtime</code>å·²ç»äº§ç”Ÿäº†æŸç§è”ç³»ï¼Ÿ</p><p>è¯¥æ’ä»¶ä¸­æœ‰ä¸€ä¸ª<a href="https://github.com/jakwuh/babel-plugin-transform-runtime/blob/master/src/definitions.js" target="_blank" rel="noopener">definitions.js</a>æ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€äº›builtinsï¼ˆå³æµè§ˆå™¨å†…å»ºå¯¹è±¡ã€æ–¹æ³•ï¼‰ï¼ŒåŠä¸€äº›å¦‚<code>Array</code>ã€<code>Object</code>ã€<code>Math</code>ã€<code>String</code>ã€<code>Number</code>ç­‰ç±»çš„ç±»æ–¹æ³•çš„æ˜ å°„è·¯å¾„ã€‚è¿™äº›è·¯å¾„å¦‚ä½•æ˜ å°„ï¼Œåˆæ˜ å°„åˆ°å“ªé‡Œå‘¢ï¼Ÿ</p><p>ä¾<code>Array</code>çš„<code>includes</code>æ–¹æ³•ä¸¾ä¾‹è¯´æ˜ï¼Œ<a href="https://github.com/jakwuh/babel-plugin-transform-runtime/blob/master/src/definitions.js" target="_blank" rel="noopener">definitions.js</a>ä¸­è¿™æ ·å®šä¹‰åˆ°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// builtins: &#123;</span></span><br><span class="line">  <span class="comment">//   ...</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="built_in">Array</span>: &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">      includes: <span class="string">"array/includes"</span>,</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>babel</code>æ’ä»¶ï¼Œæ˜¯å¯¹<code>babel</code>è½¬æ¢åçš„ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰è¿›è¡Œçš„ä¸€ç³»åˆ—å¤„ç†ï¼Œè¯¥æ’ä»¶å¯¹æˆ‘ä»¬ä»£ç ä¸­ç”¨åˆ°çš„ç±»æ–¹æ³•çš„å¤„ç†å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleName = getRuntimeModuleName(state.opts);</span><br><span class="line">path.replaceWith(</span><br><span class="line">  <span class="keyword">this</span>.addDefaultImport(</span><br><span class="line">    <span class="string">`<span class="subst">$&#123;moduleName&#125;</span>/core-js/<span class="subst">$&#123;methods[prop.name]&#125;</span>`</span>,</span><br><span class="line">    <span class="string">`<span class="subst">$&#123;obj.name&#125;</span>$<span class="subst">$&#123;prop.name&#125;</span>`</span>,</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>moduleName</code>é»˜è®¤æ˜¯<code>babel-runtime</code>ï¼Œ<code>${moduleName}/core-js/${methods[prop.name]}</code>ä»£å…¥å˜é‡è¿˜åŸåå°±æ˜¯<code>babel-runtime/core-js/array/includes</code>ã€‚æ‰¾åˆ°å¯¹åº”è·¯å¾„çš„æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123; <span class="string">"default"</span>: <span class="built_in">require</span>(<span class="string">"core-js/library/fn/array/includes"</span>), <span class="attr">__esModule</span>: <span class="literal">true</span> &#125;;</span><br></pre></td></tr></table></figure><p>å¼•ç”¨äº†<code>core-js/library</code>ï¼Œæ ¹æ®<code>core-js</code>çš„ç¬¬äºŒæ¡ä½¿ç”¨æ–¹å¼ â€”â€” å½“æˆä¸€ä¸ªæ™®é€šçš„commonjsåº“ä½¿ç”¨ï¼Œä¸æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚è€Œä¸”å¯ä»¥é’ˆå¯¹æŸä¸ªæ–¹æ³•æˆ–builtinså•ç‹¬å¼•å…¥ã€‚</p><p>è¿™é‡Œè¿˜æœ‰ä¸ªç–‘é—®ï¼Œçœ‹è¿‡<code>transform-runtime</code>ä½¿ç”¨æ–‡æ¡£çš„ä¼šçŸ¥é“ï¼Œå®ƒå¹¶ä¸æ”¯æŒå®ä¾‹æ–¹æ³•ï¼Œå¦‚<code>[1, 2, 3].includes(1)</code>å°†æ— æ³•èµ·ä½œç”¨ï¼Œé‚£ä¸Šé¢çš„<code>Array</code>çš„<code>includes</code>åˆæ˜¯ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿäº‹å®ä¸Šï¼Œå®ƒä»…ä»…æ˜¯æä¾›äº†ä¸€ä¸ªç±»æ–¹æ³•çš„ä½¿ç”¨ï¼ŒåŠ<code>Array.includes</code>ï¼Œä½¿ç”¨æ–¹å¼<code>Array.includes([1, 2, 3], 1)</code>ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ¥æ”¶ä¸€ä¸ªæ•°ç»„å®ä¾‹ã€‚</p><p>ä¾‹å¦‚ï¼Œä½¿ç”¨<code>transform-runtime</code>å°†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment">// ç±»æ–¹æ³•</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.includes(a, <span class="number">1</span>))</span><br><span class="line"><span class="comment">// å®ä¾‹æ–¹æ³•</span></span><br><span class="line"><span class="built_in">console</span>.log(a.includes(<span class="number">1</span>))</span><br></pre></td></tr></table></figure><p>è½¬æ¢ä¸º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _includes = <span class="built_in">require</span>(<span class="string">"babel-runtime/core-js/array/includes"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _includes2 = _interopRequireDefault(_includes);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_interopRequireDefault</span>(<span class="params">obj</span>) </span>&#123; <span class="keyword">return</span> obj &amp;&amp; obj.__esModule ? obj : &#123; <span class="attr">default</span>: obj &#125;; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log((<span class="number">0</span>, _includes2.default)(a, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a.includes(<span class="number">1</span>));</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ç°åœ¨æˆ‘ä»¬æ€»ç»“ä¸‹ä¸¤è€…çš„åŒºåˆ«ä¸åº”ç”¨åœºæ™¯ï¼š</p><ul><li><code>babel-polyfill</code> æä¾›å®Œæ•´çš„è¡¥ä¸ï¼Œä¿è¯å„æµè§ˆå™¨ä¸‹çš„ä¸€è‡´æ€§ï¼Œä½†ä½“ç§¯å¤§ï¼Œä¼šæ±¡æŸ“å…¨å±€å˜é‡ï¼Œé€‚åˆåº”ç”¨äºä¸šåŠ¡å¼€å‘å½“ä¸­ï¼Œå¼€å‘äººå‘˜æ— éœ€è¿‡å¤šå…³æ³¨å…¼å®¹æ€§é—®é¢˜ã€‚</li><li><code>transform-runtime</code> æŒ‰éœ€æä¾›ï¼Œä¸æ”¯æŒå®ä¾‹çš„æ–¹æ³•ï¼Œä¸æ±¡æŸ“å…¨å±€å˜é‡ï¼Œé€‚åˆäºåº“çš„å¼€å‘</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å½“å‰å‰ç«¯çš„å¼€å‘ï¼Œå·²ç»åŸºæœ¬ç¦»ä¸å¼€&lt;code&gt;babel&lt;/code&gt;çš„ä½¿ç”¨äº†ã€‚&lt;/p&gt;
&lt;p&gt;è€Œ&lt;code&gt;babel&lt;/code&gt;ä¸‹ä¸¤å‘˜å¤§å°†&lt;code&gt;babel-polyfill&lt;/code&gt;å’Œ&lt;code&gt;transform-runtime&lt;/code&gt;ä¹Ÿç»å¸¸å‡ºç°åœ¨å„ä½å‰ç«¯åŒèƒçš„ä¸šåŠ¡åŠåº“çš„å¼€å‘ä¸­ï¼Œè®©æˆ‘ä»¬å¾—ä»¥æ¬¢å¿«åœ°ä½¿ç”¨jsçš„å„ç§é«˜çº§è¯­æ³•ä»¥åŠç‰›Xçš„apiã€‚å¯è™½è¯´æ˜¯å¦‚æ­¤å¸¸ç”¨ï¼Œå¾ˆå¤šå‰ç«¯åŒèƒç”šè‡³æ˜¯å‰ç«¯è€å¸æœºä¹Ÿå¸¸å¸¸æä¸æ¸…äºŒè€…çš„å…³ç³»ï¼Œä»¥è‡³é™·å…¥è«åçš„ç–‘æƒ‘å½“ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æ­£åœ¨è¿™ä¸ªæ—¶å€™ï¼Œä¸€åä¸æ„¿éœ²é¢çš„ç½‘å‹ï¼Œæœ¬ç€åˆ¨æ ¹é—®åº•çš„é’»(qiu)ç ”(nue)ç²¾ç¥ï¼Œä¸€çª¥äºŒè€…çš„æœ¬è´¨ï¼Œå‘å¤§å®¶èŠä¸€èŠä¸¤è€…çš„å…³ç³»ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="webæŠ€æœ¯" scheme="https://vhtml.github.io/categories/web%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="javascript" scheme="https://vhtml.github.io/tags/javascript/"/>
    
      <category term="lib" scheme="https://vhtml.github.io/tags/lib/"/>
    
      <category term="babel" scheme="https://vhtml.github.io/tags/babel/"/>
    
  </entry>
  
  <entry>
    <title>flexå¸ƒå±€å­¦ä¹ ä¹‹å®æˆ˜ç¯‡</title>
    <link href="https://vhtml.github.io/2017/12/19/flex-practice/"/>
    <id>https://vhtml.github.io/2017/12/19/flex-practice/</id>
    <published>2017-12-19T07:19:13.000Z</published>
    <updated>2019-01-17T03:47:52.023Z</updated>
    
    <content type="html"><![CDATA[<p><a href="/2017/12/17/flex-grammar/">ä¸Šä¸€ç¯‡æ–‡ç« </a>å­¦ä¹ äº†Flexå¸ƒå±€çš„è¯­æ³•ï¼Œä»Šå¤©æ¥ä¸ªç»å…¸çš„å¸ƒå±€å®ä¾‹ç»ƒç»ƒæ‰‹ã€‚</p><h3 id="åœ£æ¯å¸ƒå±€"><a href="#åœ£æ¯å¸ƒå±€" class="headerlink" title="åœ£æ¯å¸ƒå±€"></a>åœ£æ¯å¸ƒå±€</h3><p>åœ£æ¯å¸ƒå±€ç”±é¡µå¤´ (header)ï¼Œä¸­é—´éƒ¨åˆ† (center)ï¼Œé¡µè„š (footer)ï¼Œå’Œä¸‰æ ç»„æˆã€‚ä¸­é—´çš„ä¸€æ æ˜¯ä¸»è¦å†…å®¹ï¼Œå·¦è¾¹å’Œå³è¾¹æä¾›å¦‚å¹¿å‘Šã€å¯¼èˆªçš„é“¾æ¥ã€‚</p><p>å¤§éƒ¨åˆ†çš„ CSS è§£å†³æ–¹æ¡ˆéƒ½æ˜¯ä»¥ä¸‹åˆ—ä¸ºç›®æ ‡ï¼š</p><ul><li>è¾¹æ åº”æµåŠ¨å±…ä¸­ï¼Œå®šå®½ã€‚</li><li>ä¸­é—´ä¸€æ  (ä¸»è¦å†…å®¹) åœ¨ HTML æºç ä¸­åº”è¯¥é¦–å…ˆå…ƒç´ å‡ºç°ã€‚</li><li>æ‰€æœ‰æ åŒé«˜ï¼Œå¿½ç•¥å®é™…é«˜åº¦ã€‚</li><li>ä½¿ç”¨çš„ HTML æ ‡è®°å°½é‡å°‘ã€‚</li><li>å½“é¡µé¢å†…å®¹ä¸å¤Ÿå……æ»¡é¡µé¢æ—¶ï¼Œé¡µè„šåº”â€œç²˜â€åœ¨åº•éƒ¨ã€‚</li></ul><a id="more"></a><h4 id="htmlä»£ç "><a href="#htmlä»£ç " class="headerlink" title="htmlä»£ç "></a>htmlä»£ç </h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span>ä¸€äº›å†…å®¹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸å¹¸çš„æ˜¯ï¼Œè¿™äº›è‡ªç„¶çš„éœ€æ±‚ç”±äºåŸç”Ÿcssçš„é™åˆ¶ï¼Œå½“å‰ç»å…¸çš„åœ£æ¯å¸ƒå±€çš„è§£å†³æ–¹æ¡ˆéƒ½ä¸èƒ½å®Œç¾æ»¡è¶³ä»¥ä¸Šæ‰€æœ‰çš„è¦ç‚¹ã€‚</p><p>æœ‰äº† Flexbox å¸ƒå±€ï¼Œç»ˆæçš„è§£å†³æ–¹æ¡ˆç»ˆäºæˆä¸ºå¯èƒ½ã€‚</p><p>æˆ‘ä»¬å…ˆçœ‹ä¼ ç»Ÿçš„å®ç°æ–¹å¼ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ddd</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#444</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.center</span>, <span class="selector-class">.left</span>, <span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="comment">/*ç­‰é«˜çš„å®ç°*/</span></span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">20000px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: -<span class="number">20000px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.center</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: silver;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#444</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°éå¸¸ç¹çå¤æ‚ï¼Œä¸æ˜“ç†è§£ï¼Œè€Œä¸”ä½¿ç”¨äº†ä¸€äº›å¥‡æ·«å·§æŠ€å®ç°åˆ—çš„ç­‰é«˜æ•ˆæœï¼Œç¨³å®šæ€§ä¸Šéš¾ä»¥ä¿è¯ã€‚æ•ˆæœå¦‚å›¾ï¼š</p><p><img src="/images/flex/holy-grail-classic.png" alt=""></p><p>å†çœ‹flexçš„å®ç°ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#444</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.center</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: silver;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">order</span>: -<span class="number">1</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#444</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç®€æ´æ˜äº†ï¼Œå®ç°æ–¹å¼åŠæ•ˆæœå ªç§°å®Œç¾ï¼Œå¦‚å›¾ï¼š</p><p><img src="/images/flex/holy-grail-flex.png" alt=""></p><p>å‚è€ƒï¼š</p><ol><li><a href="https://alistapart.com/article/holygrail" target="_blank" rel="noopener">In Search of the Holy Grail</a></li><li><a href="https://philipwalton.github.io/solved-by-flexbox/" target="_blank" rel="noopener">Solved by Flexbox</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;/2017/12/17/flex-grammar/&quot;&gt;ä¸Šä¸€ç¯‡æ–‡ç« &lt;/a&gt;å­¦ä¹ äº†Flexå¸ƒå±€çš„è¯­æ³•ï¼Œä»Šå¤©æ¥ä¸ªç»å…¸çš„å¸ƒå±€å®ä¾‹ç»ƒç»ƒæ‰‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åœ£æ¯å¸ƒå±€&quot;&gt;&lt;a href=&quot;#åœ£æ¯å¸ƒå±€&quot; class=&quot;headerlink&quot; title=&quot;åœ£æ¯å¸ƒå±€&quot;&gt;&lt;/a&gt;åœ£æ¯å¸ƒå±€&lt;/h3&gt;&lt;p&gt;åœ£æ¯å¸ƒå±€ç”±é¡µå¤´ (header)ï¼Œä¸­é—´éƒ¨åˆ† (center)ï¼Œé¡µè„š (footer)ï¼Œå’Œä¸‰æ ç»„æˆã€‚ä¸­é—´çš„ä¸€æ æ˜¯ä¸»è¦å†…å®¹ï¼Œå·¦è¾¹å’Œå³è¾¹æä¾›å¦‚å¹¿å‘Šã€å¯¼èˆªçš„é“¾æ¥ã€‚&lt;/p&gt;
&lt;p&gt;å¤§éƒ¨åˆ†çš„ CSS è§£å†³æ–¹æ¡ˆéƒ½æ˜¯ä»¥ä¸‹åˆ—ä¸ºç›®æ ‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¾¹æ åº”æµåŠ¨å±…ä¸­ï¼Œå®šå®½ã€‚&lt;/li&gt;
&lt;li&gt;ä¸­é—´ä¸€æ  (ä¸»è¦å†…å®¹) åœ¨ HTML æºç ä¸­åº”è¯¥é¦–å…ˆå…ƒç´ å‡ºç°ã€‚&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰æ åŒé«˜ï¼Œå¿½ç•¥å®é™…é«˜åº¦ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨çš„ HTML æ ‡è®°å°½é‡å°‘ã€‚&lt;/li&gt;
&lt;li&gt;å½“é¡µé¢å†…å®¹ä¸å¤Ÿå……æ»¡é¡µé¢æ—¶ï¼Œé¡µè„šåº”â€œç²˜â€åœ¨åº•éƒ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://vhtml.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="css3" scheme="https://vhtml.github.io/tags/css3/"/>
    
  </entry>
  
  <entry>
    <title>flexå¸ƒå±€å­¦ä¹ ä¹‹è¯­æ³•ç¯‡</title>
    <link href="https://vhtml.github.io/2017/12/17/flex-grammar/"/>
    <id>https://vhtml.github.io/2017/12/17/flex-grammar/</id>
    <published>2017-12-17T05:33:49.000Z</published>
    <updated>2019-01-14T18:09:28.946Z</updated>
    
    <content type="html"><![CDATA[<p>Flexå¸ƒå±€ä¹Ÿå·²ç»ç”¨äº†æŒºä¹…äº†ï¼Œä½†æ€»æ„Ÿè§‰ç”¨å¾—ä¸å¤Ÿé€ï¼Œäºæ˜¯æŠ½ç©ºå†ç³»ç»Ÿå­¦ä¹ ä¸‹ã€‚</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>å¦‚ä¸‹å³å®šä¹‰äº†ä¸€ä¸ªflexå®¹å™¨ï¼Œå†…è”æˆ–å—å–å†³äºç»™å®šçš„å€¼ã€‚å®ƒçš„æ‰€æœ‰ç›´æ¥å­å…ƒç´ å°†è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex; <span class="comment">/* or inline-flex */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè®¾ä¸º Flex å¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„floatã€clearå’Œvertical-alignå±æ€§å°†å¤±æ•ˆã€‚</p><a id="more"></a><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><p><img src="/images/flex/CSS3-Flexbox-Model.webp" alt=""></p><p>å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆmain axisï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆcross axisï¼‰ã€‚ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆä¸è¾¹æ¡†çš„äº¤å‰ç‚¹ï¼‰å«åš<code>main start</code>ï¼Œç»“æŸä½ç½®å«åš<code>main end</code>ï¼›äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åš<code>cross start</code>ï¼Œç»“æŸä½ç½®å«åš<code>cross end</code>ã€‚</p><p>é¡¹ç›®é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚å•ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´å«åš<code>main size</code>ï¼Œå æ®çš„äº¤å‰è½´ç©ºé—´å«åš<code>cross size</code>ã€‚</p><h2 id="å®¹å™¨å±æ€§"><a href="#å®¹å™¨å±æ€§" class="headerlink" title="å®¹å™¨å±æ€§"></a>å®¹å™¨å±æ€§</h2><h3 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction"></a>flex-direction</h3><p><code>flex-direction</code>å±æ€§å†³å®šä¸»è½´çš„æ–¹å‘ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex-box</span> &#123;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row | row-reverse | column | column-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/images/flex/flex-direction.svg" alt=""></p><ul><li><code>row</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å·¦ç«¯ã€‚</li><li><code>row-reverse</code>ï¼šä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å³ç«¯ã€‚</li><li><code>column</code>ï¼šä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸Šæ²¿ã€‚</li><li><code>column-reverse</code>ï¼šä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸‹æ²¿ã€‚</li></ul><h3 id="flex-wrap"><a href="#flex-wrap" class="headerlink" title="flex-wrap"></a>flex-wrap</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé¡¹ç›®éƒ½æ’åœ¨ä¸€æ¡çº¿ä¸Šï¼Œä½ å¯ä»¥é€šè¿‡è¿™ä¸ªå±æ€§æ¥æ”¹å˜å®ƒã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex-box</span> &#123;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: nowrap | wrap | wrap-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/images/flex/flex-wrap.svg" alt=""></p><ul><li><code>nowrap</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä¸æ¢è¡Œã€‚</li><li><code>wrap</code>ï¼šæ¢è¡Œï¼Œä»ä¸Šåˆ°ä¸‹ï¼Œå³ç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹ã€‚</li><li><code>wrap-reverse</code>ï¼šæ¢è¡Œï¼Œä»ä¸‹åˆ°ä¸Šï¼Œå³ç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹ã€‚</li></ul><h3 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a>flex-flow</h3><p><code>flex-flow</code>å±æ€§æ˜¯<code>flex-direction</code>å±æ€§å’Œ<code>flex-wrap</code>å±æ€§çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸º<code>row nowrap</code>ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex-box</span> &#123;</span><br><span class="line">  <span class="attribute">flex-flow</span>: &lt;flex-direction&gt; || &lt;flex-wrap&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a>justify-content</h3><p>å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex-box</span> &#123;</span><br><span class="line">  <span class="attribute">justify-content</span>: flex-start | flex-end | center | space-between | space-around | space-evenly;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/images/flex/justify-content.svg" alt=""></p><ul><li><code>flex-start</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå·¦å¯¹é½</li><li><code>flex-end</code>ï¼šå³å¯¹é½</li><li><code>center</code>ï¼šå±…ä¸­</li><li><code>space-between</code>ï¼šä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”éƒ½ç›¸ç­‰ã€‚</li><li><code>space-around</code>ï¼šæ¯ä¸ªé¡¹ç›®ä¸¤ä¾§çš„é—´éš”ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”æ¯”é¡¹ç›®ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ã€‚</li><li><code>space-evenly</code>ï¼šæ¯ä¸ªé¡¹ç›®ä¹‹é—´çš„é—´éš”ç›¸ç­‰ï¼ˆåŒ…æ‹¬åˆ°è¾¹æ¡†çš„é—´éš”ï¼‰ã€‚</li></ul><h3 id="align-items"><a href="#align-items" class="headerlink" title="align-items"></a>align-items</h3><p>å®šä¹‰äº†é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex-box</span> &#123;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/images/flex/align-items.svg" alt=""></p><ul><li><code>flex-start</code>ï¼šäº¤å‰è½´çš„èµ·ç‚¹å¯¹é½ã€‚</li><li><code>flex-end</code>ï¼šäº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½ã€‚</li><li><code>center</code>ï¼šäº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½ã€‚</li><li><code>baseline</code>: é¡¹ç›®çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½ã€‚</li><li><code>stretch</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ã€‚</li></ul><h3 id="align-content"><a href="#align-content" class="headerlink" title="align-content"></a>align-content</h3><p>è¯¥å±æ€§å®šä¹‰äº†å¤šæ ¹è½´çº¿åœ¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚å¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œè¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex-box</span> &#123;</span><br><span class="line">  <span class="attribute">align-content</span>: flex-start | flex-end | center | space-between | space-around | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/images/flex/align-content.svg" alt=""></p><ul><li><code>flex-start</code>ï¼šä¸äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½ã€‚</li><li><code>flex-end</code>ï¼šä¸äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½ã€‚</li><li><code>center</code>ï¼šä¸äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½ã€‚</li><li><code>space-between</code>ï¼šä¸äº¤å‰è½´ä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”å¹³å‡åˆ†å¸ƒã€‚</li><li><code>space-around</code>ï¼šæ¯æ ¹è½´çº¿ä¸¤ä¾§çš„é—´éš”éƒ½ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”æ¯”è½´çº¿ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ã€‚</li><li><code>stretch</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šè½´çº¿å æ»¡æ•´ä¸ªäº¤å‰è½´ã€‚</li></ul><h2 id="é¡¹ç›®å±æ€§"><a href="#é¡¹ç›®å±æ€§" class="headerlink" title="é¡¹ç›®å±æ€§"></a>é¡¹ç›®å±æ€§</h2><h3 id="order"><a href="#order" class="headerlink" title="order"></a>order</h3><p>è¯¥å±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex-item</span> &#123;</span><br><span class="line">  <span class="attribute">order</span>: &lt;integer&gt;; <span class="comment">/* default is 0 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/images/flex/order.svg" alt=""></p><h3 id="flex-grow"><a href="#flex-grow" class="headerlink" title="flex-grow"></a>flex-grow</h3><p>è¯¥å±æ€§å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ã€‚é»˜è®¤ä¸º0ï¼Œå³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex-item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: &lt;number&gt;; <span class="comment">/* default 0 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/images/flex/flex-grow.svg" alt=""></p><p>å¦‚æœæ‰€æœ‰é¡¹ç›®çš„<code>flex-grow</code>å±æ€§éƒ½ä¸º1ï¼Œåˆ™å®ƒä»¬å°†ç­‰åˆ†å‰©ä½™ç©ºé—´ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„<code>flex-grow</code>å±æ€§ä¸º2ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™å‰è€…å æ®çš„å‰©ä½™ç©ºé—´å°†æ¯”å…¶ä»–é¡¹å¤šä¸€å€ã€‚</p><p>è´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚</p><h3 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h3><p>è¯¥å±æ€§å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex-item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: &lt;number&gt;; <span class="comment">/* default 1 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ‰€æœ‰é¡¹ç›®çš„<code>flex-shrink</code>å±æ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„<code>flex-shrink</code>å±æ€§ä¸º0ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™ç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚</p><p>è´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚</p><h3 id="flex-basis"><a href="#flex-basis" class="headerlink" title="flex-basis"></a>flex-basis</h3><p>è¯¥å±æ€§å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼ˆmain sizeï¼‰ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸º<code>auto</code>ï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªé•¿åº¦ï¼ˆå¦‚20%ï¼Œ5remç­‰ï¼‰æˆ–å…³é”®å­—ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex-item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-basis</span>: &lt;length&gt; | auto; <span class="comment">/* default auto */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h3><p>è¯¥å±æ€§æ˜¯<code>flex-grow</code>, <code>flex-shrink</code> å’Œ <code>flex-basis</code>çš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º<code>0 1 auto</code>ã€‚åä¸¤ä¸ªå±æ€§å¯é€‰ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex-item</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: none | [ &lt;<span class="string">'flex-grow'</span>&gt; &lt;<span class="string">'flex-shrink'</span>&gt;? || &lt;<span class="string">'flex-basis'</span>&gt; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥å±æ€§æœ‰ä¸¤ä¸ªå¿«æ·å€¼ï¼š<code>auto (1 1 auto)</code> å’Œ <code>none (0 0 auto)</code>ã€‚</p><h3 id="align-self"><a href="#align-self" class="headerlink" title="align-self"></a>align-self</h3><p>è¯¥å±æ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–<code>align-items</code>å±æ€§ã€‚é»˜è®¤å€¼ä¸º<code>auto</code>ï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„<code>align-items</code>å±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäº<code>stretch</code>ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex-item</span> &#123;</span><br><span class="line">  <span class="attribute">align-self</span>: auto | flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/images/flex/align-self.svg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Flexå¸ƒå±€ä¹Ÿå·²ç»ç”¨äº†æŒºä¹…äº†ï¼Œä½†æ€»æ„Ÿè§‰ç”¨å¾—ä¸å¤Ÿé€ï¼Œäºæ˜¯æŠ½ç©ºå†ç³»ç»Ÿå­¦ä¹ ä¸‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä½¿ç”¨&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨&quot;&gt;&lt;/a&gt;ä½¿ç”¨&lt;/h2&gt;&lt;p&gt;å¦‚ä¸‹å³å®šä¹‰äº†ä¸€ä¸ªflexå®¹å™¨ï¼Œå†…è”æˆ–å—å–å†³äºç»™å®šçš„å€¼ã€‚å®ƒçš„æ‰€æœ‰ç›´æ¥å­å…ƒç´ å°†è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-class&quot;&gt;.box&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attribute&quot;&gt;display&lt;/span&gt;: flex; &lt;span class=&quot;comment&quot;&gt;/* or inline-flex */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ³¨æ„ï¼šè®¾ä¸º Flex å¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„floatã€clearå’Œvertical-alignå±æ€§å°†å¤±æ•ˆã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://vhtml.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="css3" scheme="https://vhtml.github.io/tags/css3/"/>
    
  </entry>
  
  <entry>
    <title>Vueä¸­nextTickæ–¹æ³•çš„å®ç°</title>
    <link href="https://vhtml.github.io/2017/06/05/js-nextTick/"/>
    <id>https://vhtml.github.io/2017/06/05/js-nextTick/</id>
    <published>2017-06-05T14:15:00.000Z</published>
    <updated>2018-12-13T10:53:47.685Z</updated>
    
    <content type="html"><![CDATA[<p>å…ˆæ¥çœ‹ä¸€é“é¢˜ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">  resolve()</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºç»“æœæ˜¯ 2 4 3 1</span></span><br></pre></td></tr></table></figure><p>å¤§è‡´åŸå› æ˜¯ï¼Œæµè§ˆå™¨ç¯å¢ƒä¸­æœ‰ä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œå®ƒåˆåŒ…å«å¤šä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œä»»åŠ¡é˜Ÿåˆ—åˆåˆ†ä¸ºä¸¤ç§ï¼š</p><ul><li><p>macro-task</p><p>åƒscript(æ•´ä½“ä»£ç )ã€setTimeoutã€setIntervalã€I/Oã€UI renderingç­‰ã€‚</p></li><li><p>micro-task</p><p>å¦‚Promisesï¼ˆè¯´çš„æ˜¯åŸç”Ÿçš„ï¼Œpolyfillåœ¨æµè§ˆå™¨ç«¯é€šå¸¸æ˜¯ä½¿ç”¨setTimeoutå®ç°çš„ï¼‰ã€MutationObserverç­‰ã€‚</p></li></ul><p>JavaScriptå¼•æ“é¦–å…ˆä»macrotask queueä¸­å–å‡ºç¬¬ä¸€ä¸ªä»»åŠ¡ï¼ˆé€šå¸¸æ˜¯å½“å‰ä»£ç æ®µï¼‰ï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œå°†microtask queueä¸­çš„æ‰€æœ‰ä»»åŠ¡å–å‡ºï¼ŒæŒ‰é¡ºåºå…¨éƒ¨æ‰§è¡Œï¼›ç„¶åå†ä»macrotask queueä¸­å–ä¸‹ä¸€ä¸ªï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œå†æ¬¡å°†microtask queueä¸­çš„å…¨éƒ¨å–å‡ºï¼›å¾ªç¯å¾€å¤ï¼Œç›´åˆ°ä¸¤ä¸ªqueueä¸­çš„ä»»åŠ¡éƒ½å–å®Œã€‚</p><p>ä¸ºä»€ä¹ˆè¦è¯´è¿™äº›å‘¢ï¼Ÿ å› ä¸ºVueæ–‡æ¡£é‡Œè¿™ä¹ˆè¯´äº†ï¼š</p><p><img src="/images/next-tick-img.png" alt="æ­ªé—¹æ—¥å¿—"></p><p>æ­£æ˜¯å› ä¸ºVueé‡Œåšäº†è¿™æ ·çš„ä¼˜åŒ–ï¼Œå½“Modelå±‚æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œdomä¸ä¼šç«‹åˆ»å»å“åº”å˜åŒ–ã€‚æ‰€ä»¥å½“éœ€è¦æ­£ç¡®åœ°è·å–å“åº”äº†æ•°æ®å˜åŒ–ä¹‹åçš„DOMæ—¶ï¼Œå°±è¦åœ¨DOMæ›´æ–°ä¹‹åå»è·å–ã€‚</p><p>è€Œå¦‚ä½•åœ¨å½“å‰äº‹ä»¶é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•åå°½å¿«å“åº”å›è°ƒï¼Œæ‰æ˜¯ä»Šå¤©è¦è¯´çš„å†…å®¹ã€‚å€ŸåŠ©å¼€å¤´æ‰€è¯´çš„ä¸¤ç§ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¦å®ç°è¿™ä¸ªåŠŸèƒ½ä¸éš¾ã€‚Vueä¸­ç”¨åˆ°äº†Promise.thenå’ŒMutationObserverï¼Œåªæœ‰å½“æ‰§è¡Œç¯å¢ƒä¸æ”¯æŒæ—¶ï¼Œæ‰é™çº§ä½¿ç”¨setTimeoutä»£æ›¿ã€‚</p><p>å…ˆæ¥ä¸ªç®€å•çš„Promisesç‰ˆçš„å®ç°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nextTick = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> p = <span class="built_in">Promise</span>.resolve()</span><br><span class="line">  p.then(fn).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•ä¸€ä¸‹</span></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(<span class="number">3</span>)&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœæ˜¯ 2 4 3 1</span></span><br></pre></td></tr></table></figure><p>å†çœ‹çœ‹<a href="https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver" target="_blank">MutationObserver</a>ï¼Œå®ƒéœ€è¦ç›‘å¬DOMçš„å˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥åšç‚¹å°åŠ¨ä½œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nextTick = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> counter = <span class="number">1</span></span><br><span class="line">  <span class="keyword">var</span> observer = <span class="keyword">new</span> MutationObserver(fn) <span class="comment">// åˆ›å»ºç›‘å¬å¯¹è±¡ï¼Œå¹¶ä¼ å…¥å›è°ƒå‡½æ•°</span></span><br><span class="line">  <span class="keyword">var</span> textNode = <span class="built_in">document</span>.createTextNode(counter) <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ¥ç‚¹</span></span><br><span class="line">  observer.observe(textNode, &#123;</span><br><span class="line">    characterData: <span class="literal">true</span> <span class="comment">// ç›‘å¬æ–‡æœ¬æ¥ç‚¹çš„å­—ç¬¦å˜åŒ–</span></span><br><span class="line">  &#125;)</span><br><span class="line">  counter = (counter + <span class="number">1</span>) % <span class="number">2</span></span><br><span class="line">  textNode.data = counter <span class="comment">// æ”¹å˜æ–‡æœ¬æ¥ç‚¹çš„å­—ç¬¦æ•°æ®</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éœ€è¦åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹æµ‹è¯•</span></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(<span class="number">3</span>)&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœæ˜¯ 2 4 3 1</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå®ç°çš„nextTickæ–¹æ³•å·²ç»åŸºæœ¬å¯ä»¥æ»¡è¶³éœ€æ±‚äº†ã€‚åªæ˜¯æ¯æ¬¡æ‰§è¡Œçš„æ—¶å€™éƒ½è¦é‡æ–°å»ºç«‹ä¸€ä¸ªæ–°çš„microtask queueã€‚æˆ‘ä»¬å¯ä»¥å¯¹å…¶åšä¸€ä¸ªä¼˜åŒ–ï¼Œä½¿å¾—åŒä¸€é˜Ÿåˆ—çš„å‡ ä¸ªnextTickçš„å›è°ƒåœ¨ä¸€ä¸ªmicrotask queueé‡Œæ‰§è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nextTick = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> callbacks = []</span><br><span class="line">  <span class="keyword">let</span> pending = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">nextTickHandler</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    pending = <span class="literal">false</span> <span class="comment">// å–æ¶ˆpending</span></span><br><span class="line">    <span class="keyword">const</span> copies = callbacks.slice(<span class="number">0</span>) <span class="comment">// copyæ‰§è¡Œé˜Ÿåˆ—</span></span><br><span class="line">    callbacks.length = <span class="number">0</span> <span class="comment">// æ¸…ç©ºæ‰§è¡Œé˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; copies.length; i++) &#123;</span><br><span class="line">      copies[i]()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> p = <span class="built_in">Promise</span>.resolve()</span><br><span class="line">  <span class="keyword">let</span> timerFunc = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    p.then(nextTickHandler).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123; <span class="built_in">console</span>.error(err) &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">queueNextTick</span> (<span class="params">cb, ctx</span>) </span>&#123;</span><br><span class="line">    callbacks.push(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (cb) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          cb.call(ctx)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          <span class="built_in">console</span>.warn(<span class="string">`error in nextTick: "<span class="subst">$&#123;e.toString()&#125;</span>"`</span>, ctx)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">if</span> (!pending) &#123;</span><br><span class="line">      pending = <span class="literal">true</span></span><br><span class="line">      timerFunc()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><p>å®ç°æ–¹å¼å¤§æ¦‚å°±æ˜¯è¿™æ ·å§ã€‚Vueé‡Œè¿˜åšäº†ä¸€äº›å…¼å®¹å¤„ç†ï¼Œä»…æ­¤è€Œå·²ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å…ˆæ¥çœ‹ä¸€é“é¢˜ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/
      
    
    </summary>
    
      <category term="webæŠ€æœ¯" scheme="https://vhtml.github.io/categories/web%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="javascript" scheme="https://vhtml.github.io/tags/javascript/"/>
    
      <category term="vue" scheme="https://vhtml.github.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>jsç¼“å­˜æŠ€æœ¯çš„å®ç°</title>
    <link href="https://vhtml.github.io/2017/03/27/js-cache/"/>
    <id>https://vhtml.github.io/2017/03/27/js-cache/</id>
    <published>2017-03-27T07:52:00.000Z</published>
    <updated>2018-12-13T10:54:14.531Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ç¼–å†™javascriptä»£ç æ—¶ï¼Œé€‚å½“åœ°ä½¿ç”¨ç¼“å­˜æŠ€æœ¯å¯ä»¥æé«˜æ•°æ®çš„é‡å¤ä½¿ç”¨ç‡ï¼Œä»¥è¾¾åˆ°ä¼˜åŒ–æ€§èƒ½çš„ç›®çš„ã€‚</p><p>æœ€ç›´æ¥æœ€æš´åŠ›çš„åšæ³•æ˜¯ï¼Œç›´æ¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰åŸå‹çš„ç©ºå¯¹è±¡ï¼Œç„¶åä¸€è‚¡è„‘çš„å¾€é‡Œå¡æ•°æ®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _data = <span class="built_in">Object</span>.create(<span class="literal">null</span>) <span class="comment">// è¿™æ˜¯æˆ‘ä»¬å®ç°çš„ç¼“å­˜å¯¹è±¡ï¼ˆæ‚è„¸ï¼‰</span></span><br><span class="line">_data[<span class="string">'foo'</span>] = <span class="number">123</span></span><br><span class="line">_data[<span class="string">'bar'</span>] = <span class="string">'hello kitty'</span></span><br><span class="line">_data[<span class="string">'author'</span>] = &#123;<span class="attr">name</span>: <span class="string">'æ­ªé—¹'</span>, <span class="attr">blog</span>: <span class="string">'http://iwhynot.me'</span>&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><p>ä½¿ç”¨çš„æ—¶å€™ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œç›´æ¥è¯»å–ç¼“å­˜å¯¹è±¡çš„å±æ€§å€¼ï¼Œæœ‰å°±æ‹¿æ¥ç”¨ï¼Œæ²¡æœ‰å°±å»æ±‚å€¼ç„¶åå†æŒ‰ä¸Šé¢çš„æ–¹æ³•å­˜å–ã€‚</p><p>è¯šç„¶ï¼Œè¿™æ ·åšä¹Ÿå¯ä»¥æ»¡è¶³å¤§å¤šæ•°çš„éœ€æ±‚ï¼Œä½†æ˜¯ä½œä¸ºé¢å‘æ–°ä¸–çºªçš„fronterï¼Œæˆ‘ä»¬åº”è¯¥è¦æœ‰æ›´é«˜çš„è¿½æ±‚ã€‚</p><p><img src="/images/face-1460430918.jpg" width="120" alt="æ­ªé—¹æ—¥å¿—"></p><p>å…ˆæ¥å®ç°ä¸€ä¸ªèƒ½è®°å½•æ•°æ®sizeçš„ç¼“å­˜å¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cache</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.size = <span class="number">0</span></span><br><span class="line">  <span class="keyword">this</span>._data = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = Cache.prototype</span><br><span class="line">p.put = <span class="function"><span class="keyword">function</span> (<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> entry = <span class="keyword">this</span>.get(key, <span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">if</span> (!entry) &#123;</span><br><span class="line">    <span class="keyword">this</span>.size++</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>._data[key] = &#123;</span><br><span class="line">    key: key,</span><br><span class="line">    value: value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p.get = <span class="function"><span class="keyword">function</span> (<span class="params">key, returnEntry</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> entry = <span class="keyword">this</span>._data[key]</span><br><span class="line">  <span class="keyword">if</span> (entry === <span class="literal">undefined</span>) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">return</span> returnEntry ? entry : entry.value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨å¯ä»¥æ„‰å¿«çš„å­˜å–æ•°æ®äº†ã€‚</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">var</span> <span class="keyword">cache</span> = <span class="literal">new</span> <span class="keyword">Cache</span>()</span><br><span class="line"><span class="keyword">cache</span>.put(<span class="string">'foo'</span>, <span class="number">123</span>)</span><br><span class="line"><span class="keyword">cache</span>.put(<span class="string">'author'</span>, &#123;name: <span class="string">'æ­ªé—¹'</span>, blog: <span class="string">'http://iwhynot.me'</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">cache</span>.size <span class="comment">// 2</span></span><br><span class="line"><span class="keyword">cache</span>.get(<span class="string">'foo'</span>) <span class="comment">// 123</span></span><br></pre></td></tr></table></figure><p>å†™åˆ°è¿™é‡Œå‘ç°ï¼Œæäº†åŠå¤©å°±åªæ˜¯å®ç°äº†ä¸ªé˜‰å‰²ç‰ˆçš„æ•°ç»„åŠŸèƒ½ã€‚å…¶å®ä¸ç„¶ï¼Œæ•°ç»„å­˜æ•°æ®çš„ç¡®å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å–æ•°æ®å°±æ²¡é‚£ä¹ˆå¥½ç©äº†ï¼Œè¦ä¸€ä¸ªä¸ªå»æ‰¾ï¼Œæ•ˆç‡å°±ä¸é«˜äº†ã€‚</p><p>è¿™æ—¶æˆ‘ä»¬å‘ç°è¿™ä¸ªç¼“å­˜å¯¹è±¡çœ‹èµ·æ¥å¯ä»¥å­˜æ— é™å¤šçš„æ•°æ®ï¼Œå¾ˆå¤šæ•°æ®å·²ç»æ²¡ç”¨äº†ï¼Œè¿˜å­˜ç•™ç€æµªè´¹å†…å­˜ã€‚æˆ‘ä»¬å†æ¥åŠ ä¸€ä¸ªå¤§å°é™åˆ¶ï¼Œè¶…è¿‡é™åˆ¶å°±æŠŠæœ€å…ˆæ’å…¥çš„ç¼“å­˜åˆ æ‰ä»¥ç»™åæ¥è€…è…¾ç‚¹ç©ºé—´ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cache</span> (<span class="params">limit</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.size = <span class="number">0</span></span><br><span class="line">  <span class="keyword">this</span>.limit = limit</span><br><span class="line">  <span class="keyword">this</span>._keys = [] <span class="comment">// ä¿å­˜å­˜å‚¨çš„æ•°æ®keyå€¼</span></span><br><span class="line">  <span class="keyword">this</span>._data = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = Cache.prototype</span><br><span class="line">p.put = <span class="function"><span class="keyword">function</span> (<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> removed</span><br><span class="line">  <span class="keyword">var</span> entry = <span class="keyword">this</span>.get(key, <span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">if</span> (!entry) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.size === <span class="keyword">this</span>.limit) &#123;</span><br><span class="line">      removed = <span class="keyword">this</span>.shift()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>._keys.push(key)</span><br><span class="line">    <span class="keyword">this</span>.size++</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>._data[key] = &#123;</span><br><span class="line">    key: key,</span><br><span class="line">    value: value</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> removed</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p.shift = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> head</span><br><span class="line">  <span class="keyword">var</span> key = <span class="keyword">this</span>._keys.shift()</span><br><span class="line">  <span class="keyword">if</span> (key !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="keyword">delete</span> <span class="keyword">this</span>._data[key]</span><br><span class="line">    <span class="keyword">this</span>.size--</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> head</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p.get = <span class="function"><span class="keyword">function</span> (<span class="params">key, returnEntry</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> entry = <span class="keyword">this</span>._data[key]</span><br><span class="line">  <span class="keyword">if</span> (entry === <span class="literal">undefined</span>) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">return</span> returnEntry ? entry : entry.value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€åˆ‡çœ‹èµ·æ¥å¾ˆä¸é”™çš„æ ·å­ã€‚å¯è¿™ç§æ–¹å¼æœ‰ä¸ªä¸å¥½çš„åœ°æ–¹ï¼Œåæ¥çš„æ•°æ®æ€»ä¼šæŒ¤èµ°å…ˆæ¥çš„æ•°æ®ï¼Œè€Œä¸ç®¡æ•°æ®çš„ä½¿ç”¨é¢‘ç‡ã€‚æ‰€ä»¥æ ¹æ®LRUæœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼Œæˆ‘ä»¬æ¥å®ç°æ›´åˆç†çš„é“¾è¡¨å­˜å‚¨æ–¹å¼ã€‚</p><p><img src="/images/lru-img.png" width="150" alt="æ­ªé—¹æ—¥å¿—"></p><pre><code>1. æ–°æ•°æ®æ’å…¥åˆ°é“¾è¡¨å¤´éƒ¨ï¼›2. æ¯å½“ç¼“å­˜å‘½ä¸­ï¼ˆå³ç¼“å­˜æ•°æ®è¢«è®¿é—®ï¼‰ï¼Œåˆ™å°†æ•°æ®ç§»åˆ°é“¾è¡¨å¤´éƒ¨ï¼›3. å½“é“¾è¡¨æ»¡çš„æ—¶å€™ï¼Œå°†é“¾è¡¨å°¾éƒ¨çš„æ•°æ®ä¸¢å¼ƒã€‚</code></pre><p>æœ€ç»ˆçš„ä»£ç å®ç°ï¼ˆæœ€æ–°æ’å…¥çš„æ•°æ®æ”¾åœ¨äº†å°¾éƒ¨ï¼ŒåŸç†ä¸€æ ·ï¼‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cache</span> (<span class="params">limit</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.size = <span class="number">0</span></span><br><span class="line">  <span class="keyword">this</span>.limit = limit</span><br><span class="line">  <span class="keyword">this</span>.head = <span class="keyword">this</span>.tail = <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">this</span>._data = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = Cache.prototype</span><br><span class="line"></span><br><span class="line">p.put = <span class="function"><span class="keyword">function</span> (<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> removed</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> entry = <span class="keyword">this</span>.get(key, <span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">if</span> (!entry) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.size === <span class="keyword">this</span>.limit) &#123;</span><br><span class="line">      removed = <span class="keyword">this</span>.shift()</span><br><span class="line">    &#125;</span><br><span class="line">    entry = &#123;</span><br><span class="line">      key: key</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.tail) &#123;</span><br><span class="line">      <span class="keyword">this</span>.tail.newer = entry</span><br><span class="line">      entry.older = <span class="keyword">this</span>.tail</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.head = entry</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>._data[key] = entry</span><br><span class="line">    <span class="keyword">this</span>.tail = entry</span><br><span class="line">    <span class="keyword">this</span>.size++</span><br><span class="line">  &#125;</span><br><span class="line">  entry.value = value</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> removed</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p.shift = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> entry = <span class="keyword">this</span>.head</span><br><span class="line">  <span class="keyword">if</span> (entry) &#123;</span><br><span class="line">    <span class="keyword">this</span>.head = entry.newer</span><br><span class="line">    <span class="keyword">this</span>.head.older = <span class="literal">undefined</span></span><br><span class="line">    entry.newer = entry.older = <span class="literal">undefined</span></span><br><span class="line">    <span class="keyword">this</span>._data[entry.key] = <span class="literal">undefined</span></span><br><span class="line">    <span class="keyword">this</span>.size--</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> entry</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p.get = <span class="function"><span class="keyword">function</span> (<span class="params">key, returnEntry</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> entry = <span class="keyword">this</span>._data[key]</span><br><span class="line">  <span class="keyword">if</span> (entry === <span class="literal">undefined</span>) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">if</span> (entry === <span class="keyword">this</span>.tail) &#123;</span><br><span class="line">    <span class="keyword">return</span> returnEntry ? entry : entry.value</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (entry.newer) &#123;</span><br><span class="line">    <span class="keyword">if</span> (entry === <span class="keyword">this</span>.head) &#123;</span><br><span class="line">      <span class="keyword">this</span>.head = entry.newer</span><br><span class="line">    &#125;</span><br><span class="line">    entry.newer.older = entry.older</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (entry.older) &#123;</span><br><span class="line">    entry.older.newer = entry.newer</span><br><span class="line">  &#125;</span><br><span class="line">  entry.newer = <span class="literal">undefined</span></span><br><span class="line">  entry.older = <span class="keyword">this</span>.tail</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.tail) &#123;</span><br><span class="line">    <span class="keyword">this</span>.tail.newer = entry</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.tail = entry</span><br><span class="line">  <span class="keyword">return</span> returnEntry ? entry : entry.value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ç¼–å†™javascriptä»£ç æ—¶ï¼Œé€‚å½“åœ°ä½¿ç”¨ç¼“å­˜æŠ€æœ¯å¯ä»¥æé«˜æ•°æ®çš„é‡å¤ä½¿ç”¨ç‡ï¼Œä»¥è¾¾åˆ°ä¼˜åŒ–æ€§èƒ½çš„ç›®çš„ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç›´æ¥æœ€æš´åŠ›çš„åšæ³•æ˜¯ï¼Œç›´æ¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰åŸå‹çš„ç©ºå¯¹è±¡ï¼Œç„¶åä¸€è‚¡è„‘çš„å¾€é‡Œå¡æ•°æ®ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; _data = &lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.create(&lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;// è¿™æ˜¯æˆ‘ä»¬å®ç°çš„ç¼“å­˜å¯¹è±¡ï¼ˆæ‚è„¸ï¼‰&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_data[&lt;span class=&quot;string&quot;&gt;&#39;foo&#39;&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;123&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_data[&lt;span class=&quot;string&quot;&gt;&#39;bar&#39;&lt;/span&gt;] = &lt;span class=&quot;string&quot;&gt;&#39;hello kitty&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_data[&lt;span class=&quot;string&quot;&gt;&#39;author&#39;&lt;/span&gt;] = &amp;#123;&lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;æ­ªé—¹&#39;&lt;/span&gt;, &lt;span class=&quot;attr&quot;&gt;blog&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;http://iwhynot.me&#39;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="webæŠ€æœ¯" scheme="https://vhtml.github.io/categories/web%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="javascript" scheme="https://vhtml.github.io/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨å±æ€§è¡¨è¾¾å¼è·å–å¯¹è±¡å±æ€§å€¼</title>
    <link href="https://vhtml.github.io/2017/03/22/get-object-value/"/>
    <id>https://vhtml.github.io/2017/03/22/get-object-value/</id>
    <published>2017-03-22T06:15:00.000Z</published>
    <updated>2018-07-09T07:26:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨Vue1.xç‰ˆæœ¬é‡Œæœ‰ä¸ª<code>vm.$get(expression)</code>æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®è¡¨è¾¾å¼è·å–vmä¸Šç»‘å®šçš„æ•°æ®çš„å€¼ï¼Œå¹¶èƒ½è¿›è¡Œä¸€äº›ç®€å•çš„ç®—æœ¯è¿ç®—ã€‚åœ¨Vue2çš„ç‰ˆæœ¬é‡Œï¼Œè¿™ä¸ªæ–¹æ³•è¢«åºŸå¼ƒäº†ã€‚ä½†æ˜¯åœ¨ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜æ˜¯éœ€è¦è¿™æ ·ä¸€ç§æ–¹ä¾¿è·å–å¯¹è±¡å±æ€§å€¼çš„æ–¹æ³•ã€‚</p><a id="more"></a><p>æ¯”å¦‚æœ‰ä¸‹é¢è¿™æ ·ä¸€ä¸ªå¯¹è±¡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  aa: <span class="number">1</span>,</span><br><span class="line">  bb: &#123;</span><br><span class="line">    xx: <span class="number">0</span>,</span><br><span class="line">    oo: <span class="literal">null</span>,</span><br><span class="line">    yy: <span class="number">2</span>,</span><br><span class="line">    zz: &#123;</span><br><span class="line">      ww: <span class="number">6</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æƒ³å®ç°ä¸€ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getObjectValue = <span class="function"><span class="keyword">function</span> (<span class="params">o, exp</span>) </span>&#123;</span><br><span class="line"><span class="comment">// todo</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªéœ€è¿™æ ·è°ƒç”¨å°±å¯ä»¥ç›´æ¥è¾“å‡ºå¯¹è±¡çš„å±æ€§å€¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">getObjectValue(obj, <span class="string">'aa'</span>) <span class="comment">// 1</span></span><br><span class="line">getObjectValue(obj, <span class="string">'bb.xx'</span>) <span class="comment">// 0</span></span><br><span class="line">getObjectValue(obj, <span class="string">'bb.zz.ww'</span>) <span class="comment">// 6</span></span><br><span class="line">getObjectValue(obj, <span class="string">'bb.oo'</span>) <span class="comment">//null</span></span><br><span class="line">getObjectValue(obj, <span class="string">'bb.oo.bar'</span>) <span class="comment">// undefined  å½“è·å–ä¸€ä¸ªä¸å­˜åœ¨çš„å±æ€§å€¼æ—¶</span></span><br></pre></td></tr></table></figure><p>å®Œæ•´çš„ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getObjectValue = (<span class="function"><span class="keyword">function</span> (<span class="params">undefined</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">o, exp</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span> || <span class="keyword">typeof</span> exp !== <span class="string">'string'</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> parts = exp.trim().split(<span class="string">'.'</span>)</span><br><span class="line">    <span class="keyword">var</span> len = parts.length</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (o[parts[i]] !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (o[parts[i]] === <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> i &lt; len - <span class="number">1</span> ? <span class="literal">undefined</span> : <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line">        o = o[parts[i]]</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> o</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨Vue1.xç‰ˆæœ¬é‡Œæœ‰ä¸ª&lt;code&gt;vm.$get(expression)&lt;/code&gt;æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®è¡¨è¾¾å¼è·å–vmä¸Šç»‘å®šçš„æ•°æ®çš„å€¼ï¼Œå¹¶èƒ½è¿›è¡Œä¸€äº›ç®€å•çš„ç®—æœ¯è¿ç®—ã€‚åœ¨Vue2çš„ç‰ˆæœ¬é‡Œï¼Œè¿™ä¸ªæ–¹æ³•è¢«åºŸå¼ƒäº†ã€‚ä½†æ˜¯åœ¨ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜æ˜¯éœ€è¦è¿™æ ·ä¸€ç§æ–¹ä¾¿è·å–å¯¹è±¡å±æ€§å€¼çš„æ–¹æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="webæŠ€æœ¯" scheme="https://vhtml.github.io/categories/web%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="javascript" scheme="https://vhtml.github.io/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºwebpackçš„å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘ä¹‹å¤šé¡µç«™ç‚¹ç¯‡ï¼ˆäºŒï¼‰</title>
    <link href="https://vhtml.github.io/2016/02/29/webpack-2/"/>
    <id>https://vhtml.github.io/2016/02/29/webpack-2/</id>
    <published>2016-02-29T08:31:09.000Z</published>
    <updated>2018-07-09T07:26:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡ï¼Œæˆ‘ä»¬è¦è§£å†³ä¸Šç¯‡ç•™ä¸‹çš„ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>webpackå¦‚ä½•è‡ªåŠ¨å‘ç°entryæ–‡ä»¶åŠè¿›è¡Œç›¸åº”çš„æ¨¡æ¿é…ç½®</li><li>å¦‚ä½•ç›´æ¥å¤„ç†åç«¯æ¨¡æ¿çš„æ ·å¼ã€è„šæœ¬è‡ªåŠ¨å¼•å…¥é—®é¢˜</li></ul><p>ä»¥expressé¡¹ç›®ä¸ºä¾‹ï¼Œä½¿ç”¨express-generatoræ„å»ºä¸€ä¸ªåˆå§‹é¡¹ç›®ï¼Œç„¶åå†æ·»åŠ éœ€è¦çš„ç›®å½•ï¼Œæœ€ç»ˆçš„ç›®å½•æ¶æ„å¦‚ä¸‹ï¼š</p><a id="more"></a><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">- website</span><br><span class="line">- bin<span class="comment">#expressé¡¹ç›®å¯åŠ¨æ–‡ä»¶</span></span><br><span class="line">- <span class="class"><span class="keyword">lib</span><span class="comment">#expressé¡¹ç›®å¼€å‘æ‰€éœ€çš„åº“</span></span></span><br><span class="line">+ routes<span class="comment">#expressé¡¹ç›®è·¯ç”±</span></span><br><span class="line">    - src<span class="comment">#å‰ç«¯æºç å¼€å‘ç›®å½•</span></span><br><span class="line">        - styles<span class="comment">#cssç›®å½•ï¼ŒæŒ‰ç…§é¡µé¢ï¼ˆæ¨¡å—ï¼‰ã€é€šç”¨ã€ç¬¬ä¸‰æ–¹ä¸‰ä¸ªçº§åˆ«è¿›è¡Œç»„ç»‡</span></span><br><span class="line">            + page</span><br><span class="line">            + common</span><br><span class="line">            + <span class="class"><span class="keyword">lib</span></span></span><br><span class="line">        + imgs<span class="comment">#å›¾ç‰‡èµ„æº</span></span><br><span class="line">        - scripts<span class="comment">#JSè„šæœ¬ï¼ŒæŒ‰ç…§pageã€componentsè¿›è¡Œç»„ç»‡</span></span><br><span class="line">            + page</span><br><span class="line">            + components</span><br><span class="line">        + views<span class="comment">#HTMLæ¨¡æ¿</span></span><br><span class="line">    - public<span class="comment">#webpackç¼–è¯‘æ‰“åŒ…è¾“å‡ºç›®å½•çš„é™æ€æ–‡ä»¶ï¼Œexpresså·¥ç¨‹çš„é™æ€ç›®å½•</span></span><br><span class="line">        + styles                </span><br><span class="line">        + scripts</span><br><span class="line">        + imgs</span><br><span class="line">    + views<span class="comment">#webpackç¼–è¯‘è¾“å‡ºçš„æ¨¡æ¿é™æ€æ–‡ä»¶ï¼Œexpresså·¥ç¨‹çš„è§†å›¾æ¨¡æ¿ </span></span><br><span class="line">    + node_modules<span class="comment">#æ‰€ä½¿ç”¨çš„nodejsæ¨¡å—</span></span><br><span class="line">    package.json<span class="comment">#é¡¹ç›®é…ç½®</span></span><br><span class="line">    webpack.config.js<span class="comment">#webpacké…ç½®</span></span><br><span class="line">    README.md<span class="comment">#é¡¹ç›®è¯´æ˜</span></span><br></pre></td></tr></table></figure><blockquote><p>ä½ åŒæ ·å¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½è‡ªç”±è®¾è®¡ç›®å½•ç»“æ„ã€‚å®Œæ•´çš„æºç ç¤ºä¾‹å‰å¾€<a href="https://github.com/vhtml/webpack-MultiplePage" target="_blank" rel="noopener">https://github.com/vhtml/webpack-MultiplePage</a>ã€‚</p></blockquote><p>package.jsoné‡Œæœ€ç»ˆçš„å£°æ˜ä¾èµ–å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"css-loader"</span>: <span class="string">"^0.23.1"</span>,</span><br><span class="line">    <span class="string">"extract-text-webpack-plugin"</span>: <span class="string">"^1.0.1"</span>,</span><br><span class="line">    <span class="string">"file-loader"</span>: <span class="string">"^0.8.5"</span>,</span><br><span class="line">    <span class="string">"glob"</span>: <span class="string">"^7.0.0"</span>,</span><br><span class="line">    <span class="string">"html-loader"</span>: <span class="string">"^0.4.3"</span>,</span><br><span class="line">    <span class="string">"html-webpack-plugin"</span>: <span class="string">"^2.9.0"</span>,</span><br><span class="line">    <span class="string">"jquery"</span>: <span class="string">"^1.12.0"</span>,</span><br><span class="line">    <span class="string">"less"</span>: <span class="string">"^2.6.0"</span>,</span><br><span class="line">    <span class="string">"less-loader"</span>: <span class="string">"^2.2.2"</span>,</span><br><span class="line">    <span class="string">"style-loader"</span>: <span class="string">"^0.13.0"</span>,</span><br><span class="line">    <span class="string">"url-loader"</span>: <span class="string">"^0.5.7"</span>,</span><br><span class="line">    <span class="string">"webpack"</span>: <span class="string">"^1.12.13"</span>,</span><br><span class="line">    <span class="string">"webpack-dev-server"</span>: <span class="string">"^1.14.1"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œæ¯”ä¸Šç¯‡å¤šäº†ä¸€ä¸ªglobä¾èµ–ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ ¹æ®æ¨¡å¼åŒ¹é…è·å–æ–‡ä»¶åˆ—è¡¨çš„nodeæ¨¡å—ã€‚æœ‰å…³globçš„è¯¦ç»†ç”¨æ³•å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°â€”â€”<a href="https://github.com/isaacs/node-glob" target="_blank" rel="noopener">https://github.com/isaacs/node-glob</a>ã€‚åˆ©ç”¨globæ¨¡å—å¯ä»¥å¾ˆæ–¹ä¾¿çš„è·å–src/scripts/pageè·¯å¾„ä¸‹çš„æ‰€æœ‰jså…¥å£æ–‡ä»¶ã€‚åŒç†ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨çš„è¿›è¡Œä¸å…¥å£æ–‡ä»¶ç›¸å¯¹åº”çš„æ¨¡æ¿é…ç½®ã€‚æœ€ç»ˆçš„webpacké…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> glob = <span class="built_in">require</span>(<span class="string">'glob'</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">var</span> CommonsChunkPlugin = webpack.optimize.CommonsChunkPlugin;</span><br><span class="line"><span class="keyword">var</span> UglifyJsPlugin = webpack.optimize.UglifyJsPlugin;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> debug = process.env.NODE_ENV !== <span class="string">'production'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> entries = getEntry(<span class="string">'src/scripts/page/**/*.js'</span>, <span class="string">'src/scripts/page/'</span>);</span><br><span class="line"><span class="keyword">var</span> chunks = <span class="built_in">Object</span>.keys(entries);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> config = &#123;</span><br><span class="line">entry: entries,</span><br><span class="line">output: &#123;</span><br><span class="line">path: path.join(__dirname, <span class="string">'public'</span>),</span><br><span class="line">publicPath: <span class="string">'/static/'</span>,</span><br><span class="line">filename: <span class="string">'scripts/[name].js'</span>,</span><br><span class="line">chunkFilename: <span class="string">'scripts/[id].chunk.js'</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">loaders: [ <span class="comment">//åŠ è½½å™¨</span></span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">loader: ExtractTextPlugin.extract(<span class="string">'style'</span>, <span class="string">'css'</span>)</span><br><span class="line">&#125;, &#123;</span><br><span class="line">test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">loader: ExtractTextPlugin.extract(<span class="string">'css!less'</span>)</span><br><span class="line">&#125;, &#123;</span><br><span class="line">test: <span class="regexp">/\.html$/</span>,</span><br><span class="line">loader: <span class="string">"html"</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">test: <span class="regexp">/\.(woff|woff2|ttf|eot|svg)(\?v=[0-9]\.[0-9]\.[0-9])?$/</span>,</span><br><span class="line">loader: <span class="string">'file-loader?name=fonts/[name].[ext]'</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">test: <span class="regexp">/\.(png|jpe?g|gif)$/</span>,</span><br><span class="line">loader: <span class="string">'url-loader?limit=8192&amp;name=imgs/[name]-[hash].[ext]'</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">plugins: [</span><br><span class="line"><span class="keyword">new</span> webpack.ProvidePlugin(&#123; <span class="comment">//åŠ è½½jq</span></span><br><span class="line">$: <span class="string">'jquery'</span></span><br><span class="line">&#125;),</span><br><span class="line"><span class="keyword">new</span> CommonsChunkPlugin(&#123;</span><br><span class="line">name: <span class="string">'vendors'</span>, <span class="comment">// å°†å…¬å…±æ¨¡å—æå–ï¼Œç”Ÿæˆåä¸º`vendors`çš„chunk</span></span><br><span class="line">chunks: chunks,</span><br><span class="line">minChunks: chunks.length <span class="comment">// æå–æ‰€æœ‰entryå…±åŒä¾èµ–çš„æ¨¡å—</span></span><br><span class="line">&#125;),</span><br><span class="line"><span class="keyword">new</span> ExtractTextPlugin(<span class="string">'styles/[name].css'</span>), <span class="comment">//å•ç‹¬ä½¿ç”¨linkæ ‡ç­¾åŠ è½½csså¹¶è®¾ç½®è·¯å¾„ï¼Œç›¸å¯¹äºoutputé…ç½®ä¸­çš„publickPath</span></span><br><span class="line">debug ? <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125; : <span class="keyword">new</span> UglifyJsPlugin(&#123; <span class="comment">//å‹ç¼©ä»£ç </span></span><br><span class="line">compress: &#123;</span><br><span class="line">warnings: <span class="literal">false</span></span><br><span class="line">&#125;,</span><br><span class="line">except: [<span class="string">'$super'</span>, <span class="string">'$'</span>, <span class="string">'exports'</span>, <span class="string">'require'</span>] <span class="comment">//æ’é™¤å…³é”®å­—</span></span><br><span class="line">&#125;),</span><br><span class="line"><span class="keyword">new</span> webpack.HotModuleReplacementPlugin() <span class="comment">//çƒ­åŠ è½½</span></span><br><span class="line">],</span><br><span class="line">devServer: &#123;</span><br><span class="line">publicPath:<span class="string">'http://localhost:8080/static/'</span>,</span><br><span class="line">proxy: &#123;</span><br><span class="line"><span class="string">"*"</span>: <span class="string">"http://localhost:54999"</span></span><br><span class="line">&#125;,</span><br><span class="line">inline: <span class="literal">true</span>,</span><br><span class="line">hot: <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pages = <span class="built_in">Object</span>.keys(getEntry(<span class="string">'src/views/**/*.html'</span>, <span class="string">'src/views/'</span>));</span><br><span class="line">pages.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">pathname</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> conf = &#123;</span><br><span class="line">filename: <span class="string">'../views/'</span> + pathname + <span class="string">'.html'</span>, <span class="comment">//ç”Ÿæˆçš„htmlå­˜æ”¾è·¯å¾„ï¼Œç›¸å¯¹äºpath</span></span><br><span class="line">template: <span class="string">'src/views/'</span> + pathname + <span class="string">'.html'</span>, <span class="comment">//htmlæ¨¡æ¿è·¯å¾„</span></span><br><span class="line">inject: <span class="literal">false</span>,<span class="comment">//jsæ’å…¥çš„ä½ç½®ï¼Œtrue/'head'/'body'/false</span></span><br><span class="line">minify: &#123; <span class="comment">//å‹ç¼©HTMLæ–‡ä»¶</span></span><br><span class="line">removeComments: <span class="literal">true</span>, <span class="comment">//ç§»é™¤HTMLä¸­çš„æ³¨é‡Š</span></span><br><span class="line">collapseWhitespace: <span class="literal">false</span> <span class="comment">//åˆ é™¤ç©ºç™½ç¬¦ä¸æ¢è¡Œç¬¦</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">if</span> (pathname <span class="keyword">in</span> config.entry) &#123;</span><br><span class="line">conf.inject = <span class="string">'body'</span>;</span><br><span class="line">conf.chunks = [<span class="string">'vendors'</span>, pathname];</span><br><span class="line">conf.hash = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">config.plugins.push(<span class="keyword">new</span> HtmlWebpackPlugin(conf));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = config;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getEntry</span>(<span class="params">globPath, pathDir</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> files = glob.sync(globPath);</span><br><span class="line"><span class="keyword">var</span> entries = &#123;&#125;,</span><br><span class="line">entry, dirname, basename, pathname, extname;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; files.length; i++) &#123;</span><br><span class="line">entry = files[i];</span><br><span class="line">dirname = path.dirname(entry);</span><br><span class="line">extname = path.extname(entry);</span><br><span class="line">basename = path.basename(entry, extname);</span><br><span class="line">pathname = path.join(dirname, basename);</span><br><span class="line">pathname = pathDir ? pathname.replace(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'^'</span> + pathDir), <span class="string">''</span>) : pathname;</span><br><span class="line">entries[pathname] = <span class="string">'./'</span> + entry;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> entries;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè¿˜è¦è¯´è¯´å¦‚ä½•ç›´æ¥å¤„ç†åç«¯æ¨¡æ¿çš„é—®é¢˜ã€‚ä¸€å¼€å§‹æœ¬èœä¹Ÿæ˜¯å¯¹è¿™ä¸ªé—®é¢˜è¿›è¡Œäº†è‹¦è‹¦çš„æ¢ç´¢ï¼Œè§‰å¾—å¯èƒ½çœŸçš„å®ç°ä¸äº†ï¼Œä¸€åº¦è¦æ”¾å¼ƒï¼Œå¹¶æ‰“ç®—é‡‡ç”¨å…ˆçº¯é™æ€æ‰“åŒ…å†æ”¹å†™æˆåç«¯æ¨¡æ¿çš„æ–¹å¼ï¼ˆå› ä¸ºè²Œä¼¼è¿˜æ²¡æœ‰è¿™æ ·çš„loaderå¯ä»¥å¾ˆæ™ºèƒ½çš„å¤„ç†æ¨¡æ¿includeçš„é—®é¢˜ä»¥åŠåœ¨éhtmlæ¨¡æ¿ä¸­è‡ªåŠ¨å¼•å…¥csså’Œjsï¼‰ã€‚ä½†æ˜¯è¿™æ ·åšçœŸçš„å¾ˆè›‹ç–¼å•Šæœ‰æœ¨æœ‰ï¼æ˜æ˜æ˜¯ä¸€ä»¶äº‹ä¸ºä»€ä¹ˆè¦æ‹†æˆä¸¤ä»¶äº‹å»åšå‘¢ï¼Ÿï¼</p><p>å¦‚æœä½ ä¹Ÿè¿›è¡Œè¿‡è¿™æ ·ä¸€ç•ªæ¢ç´¢ï¼Œä½ å¯èƒ½æ¥è§¦è¿‡åƒjade-loaderã€ejs-loaderã€ejs-compiled-loaderç­‰è¿™æ ·çš„webpack loaderã€‚æ— å¥ˆå®ƒä»¬ç»Ÿç»Ÿéƒ½ä¸æ˜¯æˆ‘è¦æ‰¾çš„ï¼Œå®ƒä»¬åªæ˜¯ç¼–è¯‘äº†æ¨¡æ¿è€Œæ²¡æœ‰ä¿ç•™æ¨¡æ¿åŸæœ‰çš„ç”Ÿæ€ï¼Œä¹Ÿä¸èƒ½è‡ªåŠ¨åœ°å¼•å…¥csså’Œjsã€‚æˆ‘ä¹Ÿæ›¾è¯•è¿‡è‡ªå·±å†™loaderå°†ejsæ¨¡æ¿å…ˆè½¬æˆhtmlæ¨¡æ¿ï¼ˆåªå¤„ç†includeæ ‡ç­¾ï¼Œå…¶ä½™åŸæ ·ä¿ç•™ï¼‰å†ç”¨html-loaderå»å¤„ç†ï¼Œä½†åˆç ´åäº†æ¨¡æ¿çš„å¯å¤ç”¨æ€§ï¼Œå¤±å»äº†çµæ´»æ€§ã€‚</p><p>å¥½å§ï¼Œå…¶å®åªæ˜¯æƒ³åŸæ ·è¾“å‡ºsrc/viewsä¸­çš„æ¨¡æ¿ï¼Œç„¶ååƒä¸Šç¯‡ä¸­é‚£æ ·è‡ªåŠ¨å¼•å…¥csså’Œjsï¼Œä»…æ­¤è€Œå·²ã€‚æ²¡æƒ³åˆ°å·®ä¸€ç‚¹é’»äº†æ­»èƒ¡åŒï¼Œæƒ³å¾—è¿‡äºå¤æ‚äº†ã€‚</p><p>æˆ‘ä»¬åº”è¯¥å…ˆçŸ¥é“ä¸€ä¸ªäº‹å®ï¼Œhtml-webpack-pluginæ’ä»¶å®ç°è‡ªåŠ¨å¼•å…¥csså’Œjsçš„åŸç†ï¼Œæ˜¯åœ¨æ¨¡æ¿ä¸­å¯¹åº”çš„æˆå¯¹headå’Œbodyæ ‡ç­¾ä¸­è¿›è¡Œè§£ææ’å…¥ã€‚å¦‚æœæ²¡æœ‰headå’Œbodyæ ‡ç­¾ï¼Œå®ƒä¼šåˆ†åˆ«åœ¨æ¨¡æ¿å¤´å’Œå°¾ç”Ÿæˆè¿™ä¸¤ä¸ªæ ‡ç­¾å¹¶æ’å…¥linkå’Œscriptæ ‡ç­¾æ¥å¼•å…¥csså’Œjsã€‚è€Œè‡³äºä½ çš„æ¨¡æ¿é‡Œå†™äº†ä»€ä¹ˆï¼Œå®ƒæ˜¯ä¸ä¼šå…³å¿ƒçš„ã€‚æ˜ç™½äº†è¿™ä¸ªåŸç†ï¼Œè¦å®Œæˆâ€œå¤§ä¸šâ€å°±ä¸ºæœŸä¸è¿œäº†ã€‚æˆ‘ä»¬åº”è¯¥å…ˆæ”¹ä¸€æ”¹å†™æ¨¡æ¿çš„æ–¹å¼ï¼Œæ¨¡æ¿ç»“æ„ä¸€å®šè¦æ˜¯ç±»htmlçš„ï¼Œä¸èƒ½æ˜¯jadeè¿™ç§ï¼ˆè¿˜å¥½æˆ‘å¹¶ä¸å–œæ¬¢ç”¨jadeï¼‰ã€‚ä»¥artTemplateæ¨¡æ¿ä¸ºä¾‹ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">&#123;&#123;include './common/meta'&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">&#123;&#123;include './common/header'&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"g-bd"</span>&gt;</span></span><br><span class="line">&#123;&#123;include './common/_content'&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;&#123;include './common/footer'&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ˜¯çš„ï¼Œæ²¡é”™ï¼Œåªè¦ä¿ç•™å®Œæ•´çš„headã€bodyç»“æ„å³å¯ã€‚ç„¶åæ ¹æ®ä¸Šè¿°çš„webpacké…ç½®ï¼Œå°†ä¸å…¥å£jså¯¹åº”çš„æ¨¡æ¿æ’å…¥linkå’Œscriptæ ‡ç­¾å¹¶è¾“å‡ºåˆ°./viewsç›®å½•ä¸­ï¼Œå…¶ä½™æ¨¡æ¿åŸæ ·è¾“å‡ºåˆ°./viewsç›®å½•æˆ–ç›¸åº”çš„å­ç›®å½•ä¸‹å³å¯ã€‚</p><p>åˆ°æ­¤ï¼Œâ€œå¤§ä¸šâ€å®Œæˆã€‚</p><p>å‡å¦‚ä½ æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œæ¬¢è¿ä¸€èµ·åˆ†äº«ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ç¯‡ï¼Œæˆ‘ä»¬è¦è§£å†³ä¸Šç¯‡ç•™ä¸‹çš„ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;webpackå¦‚ä½•è‡ªåŠ¨å‘ç°entryæ–‡ä»¶åŠè¿›è¡Œç›¸åº”çš„æ¨¡æ¿é…ç½®&lt;/li&gt;
&lt;li&gt;å¦‚ä½•ç›´æ¥å¤„ç†åç«¯æ¨¡æ¿çš„æ ·å¼ã€è„šæœ¬è‡ªåŠ¨å¼•å…¥é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥expressé¡¹ç›®ä¸ºä¾‹ï¼Œä½¿ç”¨express-generatoræ„å»ºä¸€ä¸ªåˆå§‹é¡¹ç›®ï¼Œç„¶åå†æ·»åŠ éœ€è¦çš„ç›®å½•ï¼Œæœ€ç»ˆçš„ç›®å½•æ¶æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
    
    </summary>
    
      <category term="webæŠ€æœ¯" scheme="https://vhtml.github.io/categories/web%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="webpack" scheme="https://vhtml.github.io/tags/webpack/"/>
    
      <category term="å‰ç«¯å·¥ç¨‹åŒ–" scheme="https://vhtml.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºwebpackçš„å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘ä¹‹å¤šé¡µç«™ç‚¹ç¯‡ï¼ˆä¸€ï¼‰</title>
    <link href="https://vhtml.github.io/2016/02/26/webpack-1/"/>
    <id>https://vhtml.github.io/2016/02/26/webpack-1/</id>
    <published>2016-02-26T10:53:05.000Z</published>
    <updated>2018-07-09T07:26:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æœ€åˆæ¥è§¦webpackçš„è¾ƒé•¿ä¸€æ®µæ—¶é—´é‡Œï¼Œæˆ‘ï¼ˆä¹Ÿå¯èƒ½å¾ˆå¤šäººï¼‰éƒ½è§‰å¾—webpackæ˜¯ä¸“ä¸ºå•é¡µåº”ç”¨è€Œé‡èº«æ‰“é€ çš„ï¼Œæ¯”å¦‚webpack+reactã€webpack+vueç­‰ï¼Œéƒ½å¯ä»¥è¿‘ä¹å®Œç¾çš„è§£å†³å„ç§èµ„æºçš„ä¾èµ–åŠ è½½ã€æ‰“åŒ…çš„é—®é¢˜ã€‚ç”šè‡³csséƒ½æ˜¯æ‰“åŒ…åœ¨jsé‡Œå»åŠ¨æ€æ·»åŠ åˆ°domæ–‡æ¡£ä¸­å»ã€‚</p><p>åæ¥æƒ³æƒ³ï¼Œè¿™ä¹ˆå¥½çš„å·¥å…·è¿™ä¹ˆå¥½çš„æ–¹æ¡ˆä¸ºä»€ä¹ˆä¸èƒ½ç”¨åœ¨websiteï¼ˆæ™®é€šçš„webç«™ç‚¹ï¼Œå§‘ä¸”å«åšwebsiteå§ï¼‰ä¸­å‘¢ï¼Ÿ</p><ul><li><p>é¦–å…ˆå¯¹äºæ™®é€šçš„webç«™ç‚¹ï¼Œæˆ‘ä»¬æ›´å€¾å‘äºå°†cssç‹¬ç«‹å‡ºæ¥ï¼Œå› ä¸ºå¯¹äºwebsiteæ¥è¯´ï¼Œcssè¿˜æ˜¯è¦æœ€å…ˆåŠ è½½å‡ºæ¥æ¯”è¾ƒå¥½ã€‚</p></li><li><p>å†ç„¶åjsæˆ‘ä»¬ä¹Ÿåªæƒ³åŠ è½½éœ€è¦çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¤§å¤§çš„æ‰“åŒ…äº†æ‰€æœ‰jsæ¨¡å—çš„åŒ…ã€‚</p></li></ul><a id="more"></a><p>åœ¨å¾ˆå¤šwebpackå…¥é—¨çº§çš„demoé‡Œï¼Œæ— è®ºæ˜¯å•å…¥å£çš„è¿˜æ˜¯å¤šå…¥å£çš„ï¼Œéƒ½æ²¡æœ‰è§£å†³ä¸Šé¢ä¸¤ä¸ªé—®é¢˜ã€‚å…¥é—¨æ¯•ç«Ÿæ˜¯å…¥é—¨ï¼Œè¦æ™‹çº§è¿˜æ˜¯åªèƒ½é è‡ªå·±ã€‚å¹¸è¿çš„æ˜¯ï¼Œæœ‰å¾ˆå¤šä¼˜ç§€çš„å·¥ç¨‹å¸ˆå·²ä¸ºæˆ‘ä»¬é“ºå¥½äº†è·¯ï¼Œè®©æˆ‘ä»¬åœ¨å‰ç«¯å·¥ç¨‹åŒ–çš„é“è·¯ä¸Šå°‘èµ°å¾ˆå¤šçš„å¼¯è·¯ã€‚å¦‚æœä½ ä¹Ÿä¸€æ ·æ›¾è¿·èŒ«è¿‡ï¼Œè¯·ä¸è¦èµ°å¼€ï¼Œå¸Œæœ›è¿™é‡Œèƒ½ä¸ºä½ ç­”ç–‘è§£æƒ‘ã€‚</p><p>å¥½å§ï¼Œä»¥ä¸Šé€šé€šæ˜¯åºŸè¯ï¼Œæ¥ä¸‹æ¥ä¸Šå¹²è´§ã€‚</p><hr><p>é¦–å…ˆå¼€å§‹æ„å»ºæˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ç»“æ„ã€‚</p><h4 id="åˆå§‹åŒ–é¡¹ç›®ã€å®‰è£…ä¾èµ–"><a href="#åˆå§‹åŒ–é¡¹ç›®ã€å®‰è£…ä¾èµ–" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®ã€å®‰è£…ä¾èµ–"></a>åˆå§‹åŒ–é¡¹ç›®ã€å®‰è£…ä¾èµ–</h4><p>ä½¿ç”¨<code>npm init</code>åˆå§‹åŒ–é¡¹ç›®å°±ä¸å¤šè¯´äº†ï¼Œç”Ÿæˆpackage.jsonæ–‡ä»¶ã€‚</p><p>ä½¿ç”¨<code>npm install plugins --save-dev</code>å®‰è£…é¡¹ç›®æ‰€éœ€ä¾èµ–ã€‚æœ€ç»ˆpackage.jsonçš„ä¾èµ–å£°æ˜å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"devDependencies"</span>: &#123;</span><br><span class="line"><span class="string">"css-loader"</span>: <span class="string">"^0.23.1"</span>,</span><br><span class="line"><span class="string">"extract-text-webpack-plugin"</span>: <span class="string">"^1.0.1"</span>,</span><br><span class="line"><span class="string">"file-loader"</span>: <span class="string">"^0.8.5"</span>,</span><br><span class="line"><span class="string">"html-loader"</span>: <span class="string">"^0.4.3"</span>,</span><br><span class="line"><span class="string">"html-webpack-plugin"</span>: <span class="string">"^2.9.0"</span>,</span><br><span class="line"><span class="string">"jquery"</span>: <span class="string">"^1.12.0"</span>,</span><br><span class="line"><span class="string">"less"</span>: <span class="string">"^2.6.0"</span>,</span><br><span class="line"><span class="string">"less-loader"</span>: <span class="string">"^2.2.2"</span>,</span><br><span class="line"><span class="string">"style-loader"</span>: <span class="string">"^0.13.0"</span>,</span><br><span class="line"><span class="string">"url-loader"</span>: <span class="string">"^0.5.7"</span>,</span><br><span class="line"><span class="string">"webpack"</span>: <span class="string">"^1.12.13"</span>,</span><br><span class="line"><span class="string">"webpack-dev-server"</span>: <span class="string">"^1.14.1"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸»è¦ç›®å½•ç»“æ„"><a href="#ä¸»è¦ç›®å½•ç»“æ„" class="headerlink" title="ä¸»è¦ç›®å½•ç»“æ„"></a>ä¸»è¦ç›®å½•ç»“æ„</h4><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- website</span><br><span class="line">    - src                <span class="comment">#ä»£ç å¼€å‘ç›®å½•</span></span><br><span class="line">        - css            <span class="comment">#cssç›®å½•ï¼ŒæŒ‰ç…§é¡µé¢ï¼ˆæ¨¡å—ï¼‰ã€é€šç”¨ã€ç¬¬ä¸‰æ–¹ä¸‰ä¸ªçº§åˆ«è¿›è¡Œç»„ç»‡</span></span><br><span class="line">            + page</span><br><span class="line">            + common</span><br><span class="line">            + <span class="class"><span class="keyword">lib</span></span></span><br><span class="line">        + img            <span class="comment">#å›¾ç‰‡èµ„æº</span></span><br><span class="line">        - js             <span class="comment">#JSè„šæœ¬ï¼ŒæŒ‰ç…§pageã€componentsè¿›è¡Œç»„ç»‡</span></span><br><span class="line">            + page</span><br><span class="line">            + components</span><br><span class="line">        + view           <span class="comment">#HTMLæ¨¡æ¿</span></span><br><span class="line">    - dist               <span class="comment">#webpackç¼–è¯‘æ‰“åŒ…è¾“å‡ºç›®å½•ï¼Œæ— éœ€å»ºç«‹ç›®å½•å¯ç”±webpackæ ¹æ®é…ç½®è‡ªåŠ¨ç”Ÿæˆ</span></span><br><span class="line">        + css                </span><br><span class="line">        + js</span><br><span class="line">        + view</span><br><span class="line">    + node_modules       <span class="comment">#æ‰€ä½¿ç”¨çš„nodejsæ¨¡å—</span></span><br><span class="line">    package.json         <span class="comment">#é¡¹ç›®é…ç½®</span></span><br><span class="line">    webpack.config.js    <span class="comment">#webpacké…ç½®</span></span><br><span class="line">    README.md            <span class="comment">#é¡¹ç›®è¯´æ˜</span></span><br></pre></td></tr></table></figure><blockquote><p>å‡å¦‚ä½ æ˜¯ä¸€åçº¯ç²¹çš„å‰ç«¯å·¥ç¨‹å¸ˆï¼Œä½¿ç”¨webpackæ„å»ºwebsiteçš„ç›®å½•ç»“æ„å¤§æ¦‚å°±è¿™æ ·äº†ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½è‡ªç”±è®¾è®¡ç›®å½•ç»“æ„ã€‚</p><p>è¯¦ç»†çš„ä»£ç å…¨è²Œå¯ä»¥æå‰åœ¨è¿™é‡Œâ€œçª¥çœ‹â€â€”â€”<a href="https://github.com/vhtml/webpack-MultiPage-static" target="_blank" rel="noopener">https://github.com/vhtml/webpack-MultiPage-static</a>ã€‚</p></blockquote><p>ç›®å½•ç»„ç»‡å¥½ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æ’¸ä»£ç äº†ã€‚</p><h4 id="å¼€å‘é¡µé¢"><a href="#å¼€å‘é¡µé¢" class="headerlink" title="å¼€å‘é¡µé¢"></a>å¼€å‘é¡µé¢</h4><p>åœ¨src/js/pageç›®å½•ä¸‹å»ºç«‹index.jsæ–‡ä»¶ï¼Œåœ¨src/viewç›®å½•ä¸‹å»ºç«‹index.htmlæ–‡ä»¶ã€‚å…¥å£jså’Œæ¨¡æ¿æ–‡ä»¶åå¯¹åº”ã€‚</p><p>index.jså†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼•å…¥css</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">"../../css/lib/reset.css"</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"../../css/common/global.css"</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"../../css/common/grid.css"</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"../../css/page/index.less"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$(<span class="string">'.g-bd'</span>).append(<span class="string">'&lt;p class="text"&gt;è¿™æ˜¯ç”±jsç”Ÿæˆçš„ä¸€å¥è¯ã€‚&lt;/p&gt;'</span>);</span><br></pre></td></tr></table></figure><p>index.html å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"åŸºäºwebpackçš„å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘è§£å†³æ–¹æ¡ˆæ¢ç´¢"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        æè¿°ï¼šheadä¸­æ— éœ€å†å¼•å…¥cssä»¥åŠfaciconï¼Œwebpackå°†æ ¹æ®å…¥å£JSæ–‡ä»¶çš„è¦æ±‚è‡ªåŠ¨å®ç°æŒ‰éœ€åŠ è½½æˆ–è€…ç”Ÿæˆstyleæ ‡ç­¾</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"g-hd"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"g-bd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"å¼¹çª—"</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"img"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../img/4.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"g-ft"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        æè¿°ï¼šbodyä¸­åŒæ ·æ— éœ€å•ç‹¬å¼•å…¥JSæ–‡ä»¶ï¼Œwebpackä¼šæ ¹æ®å…¥å£JSæ–‡ä»¶è‡ªåŠ¨å®ç°æŒ‰éœ€åŠ è½½æˆ–è€…ç”Ÿæˆscriptæ ‡ç­¾ï¼Œè¿˜å¯ä»¥ç”Ÿæˆå¯¹åº”çš„hashå€¼</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å°±æ˜¯è¿™æ ·ä¸€ä¸ªç®€å•çš„HTMLæ¨¡æ¿ï¼Œæˆ‘ä»¬ç”šè‡³æ²¡æœ‰å¼•å…¥ä»»ä½•CSSå’ŒJSï¼Œé€šè¿‡webpackæ‰“åŒ…å°±å¯ä»¥è‡ªåŠ¨å¸®æˆ‘ä»¬å¼•å…¥ã€‚</p><p>ç”±äºæ˜¯åšwebsiteï¼Œåœ¨æ­¤ä¹‹å‰ç›¸ä¿¡ä½ å¯¹å•é¡µåº”ç”¨æ‰“åŒ…å·²ç»æœ‰è¿‡äº†è§£ï¼Œæˆ‘å°±ä¸å®¢æ°”äº†ï¼Œå†æ¥ä¸¤ä¸ªé¡µé¢å‹å‹æƒŠã€‚</p><p>about.js:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼•å…¥css</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">"../../css/lib/reset.css"</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"../../css/common/global.css"</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"../../css/common/grid.css"</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"../../css/page/about.less"</span>);</span><br><span class="line"></span><br><span class="line">$(<span class="string">'#about'</span>).html(<span class="string">'è¿™æ˜¯ä¸€ä¸ªå…³äºwebpackæ„å»ºå·¥ç¨‹çš„æ —å­'</span>);</span><br></pre></td></tr></table></figure><p>about.html:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>å…³äº<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"åŸºäºwebpackçš„å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘è§£å†³æ–¹æ¡ˆæ¢ç´¢"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"g-hd"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"g-bd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"about"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"g-ft"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>list.js:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼•å…¥css</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">"../../css/lib/reset.css"</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"../../css/common/global.css"</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"../../css/common/grid.css"</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"../../css/page/list.less"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> html = <span class="string">''</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">html += <span class="string">'&lt;li&gt;åˆ—è¡¨'</span>+(i+<span class="number">1</span>)+<span class="string">'&lt;/li&gt;'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$(<span class="string">'#list'</span>).html(html);</span><br></pre></td></tr></table></figure><p>list.html:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>åˆ—è¡¨é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"åŸºäºwebpackçš„å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘è§£å†³æ–¹æ¡ˆæ¢ç´¢"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"g-hd"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"g-bd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"g-ft"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>OKï¼Œå¤ªæ£’äº†ï¼ï¼ï¼</p><h4 id="webpacké…ç½®"><a href="#webpacké…ç½®" class="headerlink" title="webpacké…ç½®"></a>webpacké…ç½®</h4><p>è¿™é‡Œæ˜¯å…³é”®ï¼Œåœ¨webpack.config.jsé‡Œï¼Œæˆ‘ä»¬å°†è¿›è¡Œä¸€äº›é…ç½®ï¼Œæ¥å®Œæˆæˆ‘ä»¬çš„éœ€æ±‚ï¼Œä¸€å¼€å§‹æˆ–è®¸æœ‰ç‚¹éš¾ç†è§£ï¼Œä½†ç­‰ä½ çœŸçš„æŒæ¡äº†ï¼Œä½ ä¾¿ä¼šæƒŠå‘¼å®ƒçš„ç¥å¥‡ã€‚é…ç½®ä¸­æˆ‘å†™äº†è¯¦ç»†çš„æ³¨é‡Šï¼Œè¦æƒ³å½»åº•ç†è§£ï¼Œè¿˜éœ€å¤šå®è·µï¼Œå¤šæŸ¥é˜…æ–‡æ¡£ï¼Œå¿…è¦æ—¶çœ‹çœ‹æºç ï¼Œå‘œå‘¼ï¼Œå­¦ä¹ ä¹‹è·¯æ¼«æ¼«å…®ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">extract-text-webpack-pluginæ’ä»¶ï¼Œ</span></span><br><span class="line"><span class="comment">æœ‰äº†å®ƒå°±å¯ä»¥å°†ä½ çš„æ ·å¼æå–åˆ°å•ç‹¬çš„cssæ–‡ä»¶é‡Œï¼Œ</span></span><br><span class="line"><span class="comment">å¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæ ·å¼ä¼šè¢«æ‰“åŒ…åˆ°jsæ–‡ä»¶é‡Œäº†ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">html-webpack-pluginæ’ä»¶ï¼Œé‡ä¸­ä¹‹é‡ï¼Œwebpackä¸­ç”ŸæˆHTMLçš„æ’ä»¶ï¼Œ</span></span><br><span class="line"><span class="comment">å…·ä½“å¯ä»¥å»è¿™é‡ŒæŸ¥çœ‹https://www.npmjs.com/package/html-webpack-plugin</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">entry: &#123; <span class="comment">//é…ç½®å…¥å£æ–‡ä»¶ï¼Œæœ‰å‡ ä¸ªå†™å‡ ä¸ª</span></span><br><span class="line">index: <span class="string">'./src/js/page/index.js'</span>,</span><br><span class="line">list: <span class="string">'./src/js/page/list.js'</span>,</span><br><span class="line">about: <span class="string">'./src/js/page/about.js'</span>,</span><br><span class="line">&#125;,</span><br><span class="line">output: &#123; </span><br><span class="line">path: path.join(__dirname, <span class="string">'dist'</span>), <span class="comment">//è¾“å‡ºç›®å½•çš„é…ç½®ï¼Œæ¨¡æ¿ã€æ ·å¼ã€è„šæœ¬ã€å›¾ç‰‡ç­‰èµ„æºçš„è·¯å¾„é…ç½®éƒ½ç›¸å¯¹äºå®ƒ</span></span><br><span class="line">publicPath: <span class="string">'/dist/'</span>,<span class="comment">//æ¨¡æ¿ã€æ ·å¼ã€è„šæœ¬ã€å›¾ç‰‡ç­‰èµ„æºå¯¹åº”çš„serverä¸Šçš„è·¯å¾„</span></span><br><span class="line">filename: <span class="string">'js/[name].js'</span>,<span class="comment">//æ¯ä¸ªé¡µé¢å¯¹åº”çš„ä¸»jsçš„ç”Ÿæˆé…ç½®</span></span><br><span class="line">chunkFilename: <span class="string">'js/[id].chunk.js'</span>   <span class="comment">//chunkç”Ÿæˆçš„é…ç½®</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">loaders: [ <span class="comment">//åŠ è½½å™¨ï¼Œå…³äºå„ä¸ªåŠ è½½å™¨çš„å‚æ•°é…ç½®ï¼Œå¯è‡ªè¡Œæœç´¢ä¹‹ã€‚</span></span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/\.css$/</span>,</span><br><span class="line"><span class="comment">//é…ç½®cssçš„æŠ½å–å™¨ã€åŠ è½½å™¨ã€‚'-loader'å¯ä»¥çœå»</span></span><br><span class="line">loader: ExtractTextPlugin.extract(<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>) </span><br><span class="line">&#125;, &#123;</span><br><span class="line">test: <span class="regexp">/\.less$/</span>,</span><br><span class="line"><span class="comment">//é…ç½®lessçš„æŠ½å–å™¨ã€åŠ è½½å™¨ã€‚ä¸­é—´!æœ‰å¿…è¦è§£é‡Šä¸€ä¸‹ï¼Œ</span></span><br><span class="line"><span class="comment">//æ ¹æ®ä»å³åˆ°å·¦çš„é¡ºåºä¾æ¬¡è°ƒç”¨lessã€cssåŠ è½½å™¨ï¼Œå‰ä¸€ä¸ªçš„è¾“å‡ºæ˜¯åä¸€ä¸ªçš„è¾“å…¥</span></span><br><span class="line"><span class="comment">//ä½ ä¹Ÿå¯ä»¥å¼€å‘è‡ªå·±çš„loaderå“Ÿã€‚æœ‰å…³loaderçš„å†™æ³•å¯è‡ªè¡Œè°·æ­Œä¹‹ã€‚</span></span><br><span class="line">loader: ExtractTextPlugin.extract(<span class="string">'css!less'</span>)</span><br><span class="line">&#125;, &#123;</span><br><span class="line"><span class="comment">//htmlæ¨¡æ¿åŠ è½½å™¨ï¼Œå¯ä»¥å¤„ç†å¼•ç”¨çš„é™æ€èµ„æºï¼Œé»˜è®¤é…ç½®å‚æ•°attrs=img:srcï¼Œå¤„ç†å›¾ç‰‡çš„srcå¼•ç”¨çš„èµ„æº</span></span><br><span class="line"><span class="comment">//æ¯”å¦‚ä½ é…ç½®ï¼Œattrs=img:src img:data-srcå°±å¯ä»¥ä¸€å¹¶å¤„ç†data-srcå¼•ç”¨çš„èµ„æºäº†ï¼Œå°±åƒä¸‹é¢è¿™æ ·</span></span><br><span class="line">test: <span class="regexp">/\.html$/</span>,</span><br><span class="line">loader: <span class="string">"html?attrs=img:src img:data-src"</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line"><span class="comment">//æ–‡ä»¶åŠ è½½å™¨ï¼Œå¤„ç†æ–‡ä»¶é™æ€èµ„æº</span></span><br><span class="line">test: <span class="regexp">/\.(woff|woff2|ttf|eot|svg)(\?v=[0-9]\.[0-9]\.[0-9])?$/</span>,</span><br><span class="line">loader: <span class="string">'file-loader?name=./fonts/[name].[ext]'</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line"><span class="comment">//å›¾ç‰‡åŠ è½½å™¨ï¼Œé›·åŒfile-loaderï¼Œæ›´é€‚åˆå›¾ç‰‡ï¼Œå¯ä»¥å°†è¾ƒå°çš„å›¾ç‰‡è½¬æˆbase64ï¼Œå‡å°‘httpè¯·æ±‚</span></span><br><span class="line"><span class="comment">//å¦‚ä¸‹é…ç½®ï¼Œå°†å°äº8192byteçš„å›¾ç‰‡è½¬æˆbase64ç </span></span><br><span class="line">test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">loader: <span class="string">'url-loader?limit=8192&amp;name=./img/[hash].[ext]'</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">plugins: [</span><br><span class="line"><span class="keyword">new</span> webpack.ProvidePlugin(&#123; <span class="comment">//åŠ è½½jq</span></span><br><span class="line">$: <span class="string">'jquery'</span></span><br><span class="line">&#125;),</span><br><span class="line"><span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">name: <span class="string">'vendors'</span>, <span class="comment">// å°†å…¬å…±æ¨¡å—æå–ï¼Œç”Ÿæˆåä¸º`vendors`çš„chunk</span></span><br><span class="line">chunks: [<span class="string">'index'</span>,<span class="string">'list'</span>,<span class="string">'about'</span>], <span class="comment">//æå–å“ªäº›æ¨¡å—å…±æœ‰çš„éƒ¨åˆ†</span></span><br><span class="line">minChunks: <span class="number">3</span> <span class="comment">// æå–è‡³å°‘3ä¸ªæ¨¡å—å…±æœ‰çš„éƒ¨åˆ†</span></span><br><span class="line">&#125;),</span><br><span class="line"><span class="keyword">new</span> ExtractTextPlugin(<span class="string">'css/[name].css'</span>), <span class="comment">//å•ç‹¬ä½¿ç”¨linkæ ‡ç­¾åŠ è½½csså¹¶è®¾ç½®è·¯å¾„ï¼Œç›¸å¯¹äºoutputé…ç½®ä¸­çš„publickPath</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//HtmlWebpackPluginï¼Œæ¨¡æ¿ç”Ÿæˆç›¸å…³çš„é…ç½®ï¼Œæ¯ä¸ªå¯¹äºä¸€ä¸ªé¡µé¢çš„é…ç½®ï¼Œæœ‰å‡ ä¸ªå†™å‡ ä¸ª</span></span><br><span class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123; <span class="comment">//æ ¹æ®æ¨¡æ¿æ’å…¥css/jsç­‰ç”Ÿæˆæœ€ç»ˆHTML</span></span><br><span class="line">favicon: <span class="string">'./src/img/favicon.ico'</span>, <span class="comment">//faviconè·¯å¾„ï¼Œé€šè¿‡webpackå¼•å…¥åŒæ—¶å¯ä»¥ç”Ÿæˆhashå€¼</span></span><br><span class="line">filename: <span class="string">'./view/index.html'</span>, <span class="comment">//ç”Ÿæˆçš„htmlå­˜æ”¾è·¯å¾„ï¼Œç›¸å¯¹äºpath</span></span><br><span class="line">template: <span class="string">'./src/view/index.html'</span>, <span class="comment">//htmlæ¨¡æ¿è·¯å¾„</span></span><br><span class="line">inject: <span class="string">'body'</span>, <span class="comment">//jsæ’å…¥çš„ä½ç½®ï¼Œtrue/'head'/'body'/false</span></span><br><span class="line">hash: <span class="literal">true</span>, <span class="comment">//ä¸ºé™æ€èµ„æºç”Ÿæˆhashå€¼</span></span><br><span class="line">chunks: [<span class="string">'vendors'</span>, <span class="string">'index'</span>],<span class="comment">//éœ€è¦å¼•å…¥çš„chunkï¼Œä¸é…ç½®å°±ä¼šå¼•å…¥æ‰€æœ‰é¡µé¢çš„èµ„æº</span></span><br><span class="line">minify: &#123; <span class="comment">//å‹ç¼©HTMLæ–‡ä»¶</span></span><br><span class="line">removeComments: <span class="literal">true</span>, <span class="comment">//ç§»é™¤HTMLä¸­çš„æ³¨é‡Š</span></span><br><span class="line">collapseWhitespace: <span class="literal">false</span> <span class="comment">//åˆ é™¤ç©ºç™½ç¬¦ä¸æ¢è¡Œç¬¦</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;),</span><br><span class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123; <span class="comment">//æ ¹æ®æ¨¡æ¿æ’å…¥css/jsç­‰ç”Ÿæˆæœ€ç»ˆHTML</span></span><br><span class="line">favicon: <span class="string">'./src/img/favicon.ico'</span>, <span class="comment">//faviconè·¯å¾„ï¼Œé€šè¿‡webpackå¼•å…¥åŒæ—¶å¯ä»¥ç”Ÿæˆhashå€¼</span></span><br><span class="line">filename: <span class="string">'./view/list.html'</span>, <span class="comment">//ç”Ÿæˆçš„htmlå­˜æ”¾è·¯å¾„ï¼Œç›¸å¯¹äºpath</span></span><br><span class="line">template: <span class="string">'./src/view/list.html'</span>, <span class="comment">//htmlæ¨¡æ¿è·¯å¾„</span></span><br><span class="line">inject: <span class="literal">true</span>, <span class="comment">//jsæ’å…¥çš„ä½ç½®ï¼Œtrue/'head'/'body'/false</span></span><br><span class="line">hash: <span class="literal">true</span>, <span class="comment">//ä¸ºé™æ€èµ„æºç”Ÿæˆhashå€¼</span></span><br><span class="line">chunks: [<span class="string">'vendors'</span>, <span class="string">'list'</span>],<span class="comment">//éœ€è¦å¼•å…¥çš„chunkï¼Œä¸é…ç½®å°±ä¼šå¼•å…¥æ‰€æœ‰é¡µé¢çš„èµ„æº</span></span><br><span class="line">minify: &#123; <span class="comment">//å‹ç¼©HTMLæ–‡ä»¶</span></span><br><span class="line">removeComments: <span class="literal">true</span>, <span class="comment">//ç§»é™¤HTMLä¸­çš„æ³¨é‡Š</span></span><br><span class="line">collapseWhitespace: <span class="literal">false</span> <span class="comment">//åˆ é™¤ç©ºç™½ç¬¦ä¸æ¢è¡Œç¬¦</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;),</span><br><span class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123; <span class="comment">//æ ¹æ®æ¨¡æ¿æ’å…¥css/jsç­‰ç”Ÿæˆæœ€ç»ˆHTML</span></span><br><span class="line">favicon: <span class="string">'./src/img/favicon.ico'</span>, <span class="comment">//faviconè·¯å¾„ï¼Œé€šè¿‡webpackå¼•å…¥åŒæ—¶å¯ä»¥ç”Ÿæˆhashå€¼</span></span><br><span class="line">filename: <span class="string">'./view/about.html'</span>, <span class="comment">//ç”Ÿæˆçš„htmlå­˜æ”¾è·¯å¾„ï¼Œç›¸å¯¹äºpath</span></span><br><span class="line">template: <span class="string">'./src/view/about.html'</span>, <span class="comment">//htmlæ¨¡æ¿è·¯å¾„</span></span><br><span class="line">inject: <span class="literal">true</span>, <span class="comment">//jsæ’å…¥çš„ä½ç½®ï¼Œtrue/'head'/'body'/false</span></span><br><span class="line">hash: <span class="literal">true</span>, <span class="comment">//ä¸ºé™æ€èµ„æºç”Ÿæˆhashå€¼</span></span><br><span class="line">chunks: [<span class="string">'vendors'</span>, <span class="string">'about'</span>],<span class="comment">//éœ€è¦å¼•å…¥çš„chunkï¼Œä¸é…ç½®å°±ä¼šå¼•å…¥æ‰€æœ‰é¡µé¢çš„èµ„æº</span></span><br><span class="line">minify: &#123; <span class="comment">//å‹ç¼©HTMLæ–‡ä»¶</span></span><br><span class="line">removeComments: <span class="literal">true</span>, <span class="comment">//ç§»é™¤HTMLä¸­çš„æ³¨é‡Š</span></span><br><span class="line">collapseWhitespace: <span class="literal">false</span> <span class="comment">//åˆ é™¤ç©ºç™½ç¬¦ä¸æ¢è¡Œç¬¦</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;),</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> webpack.HotModuleReplacementPlugin() <span class="comment">//çƒ­åŠ è½½</span></span><br><span class="line">],</span><br><span class="line"><span class="comment">//ä½¿ç”¨webpack-dev-serverï¼Œæé«˜å¼€å‘æ•ˆç‡</span></span><br><span class="line">devServer: &#123;</span><br><span class="line">contentBase: <span class="string">'./'</span>,</span><br><span class="line">host: <span class="string">'localhost'</span>,</span><br><span class="line">port: <span class="number">9090</span>, <span class="comment">//é»˜è®¤8080</span></span><br><span class="line">inline: <span class="literal">true</span>, <span class="comment">//å¯ä»¥ç›‘æ§jså˜åŒ–</span></span><br><span class="line">hot: <span class="literal">true</span>, <span class="comment">//çƒ­å¯åŠ¨</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œå®Œæˆä»¥ä¸Šçš„è¿™äº›é…ç½®ä¹‹åï¼Œæ‰§è¡Œ<code>webpack</code>æ‰“åŒ…å‘½ä»¤å®Œæˆé¡¹ç›®æ‰“åŒ…ã€‚</p><p>æ­¤æ—¶ï¼Œå‰å¾€/dist/viewç›®å½•ä¸‹æŸ¥çœ‹ç”Ÿæˆçš„list.htmlæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>åˆ—è¡¨é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"åŸºäºwebpackçš„å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘è§£å†³æ–¹æ¡ˆæ¢ç´¢"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"/dist/favicon.ico"</span>&gt;</span><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"/dist/css/vendors.css?02568e631b7717b7149a"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"/dist/css/list.css?02568e631b7717b7149a"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"g-hd"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"g-bd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"g-ft"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/dist/js/vendors.js?02568e631b7717b7149a"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/dist/js/list.js?02568e631b7717b7149a"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„æ–‡ä»¶é™¤äº†ä¿ç•™åŸæ¨¡æ¿ä¸­çš„å†…å®¹ä»¥å¤–ï¼Œè¿˜æ ¹æ®å…¥å£æ–‡ä»¶list.jsçš„å®šä¹‰ï¼Œè‡ªåŠ¨æ·»åŠ éœ€è¦å¼•å…¥CSSä¸JSæ–‡ä»¶ï¼Œä»¥åŠfaviconï¼ŒåŒæ—¶è¿˜æ·»åŠ äº†ç›¸åº”çš„hashå€¼ã€‚</p><p>æ‰§è¡Œ<code>webpack-dev-server</code>å¯åŠ¨devServerï¼Œæ‰“å¼€<a href="http://localhost:9090/dist/view/index.html" target="_blank" rel="noopener">http://localhost:9090/dist/view/index.html</a> å°±å¯ä»¥è¿›è¡Œé¡µé¢çš„é¢„è§ˆäº†ã€‚è¯´æ˜æˆ‘ä»¬çš„èµ„æºè·¯å¾„ç”Ÿæˆä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p><p>å¥½äº†ï¼Œçº¯é™æ€çš„webpackå‰ç«¯æ„å»ºè¿‡ç¨‹å°±æ˜¯è¿™æ ·äº†ã€‚ç„¶è€Œä½ å¯èƒ½è¿˜æœ‰ç–‘é—®ã€‚</p><ul><li>å‡å¦‚ä½ æ˜¯ä¸ªæ‡’äººï¼Œå¯èƒ½ä¼šè§‰å¾—ç›®å‰çš„é…ç½®ä¸å¤Ÿæ™ºèƒ½ï¼Œæ¯å¢åŠ ä¸€ä¸ªé¡µé¢ï¼Œå°±å¾—å†æ‰‹åŠ¨æ·»åŠ å…¥å£æ–‡ä»¶åŠæ¨¡æ¿é…ç½®ã€‚</li><li>å‡å¦‚ä½ æ˜¯ä¸ªå…¨æ ˆå·¥ç¨‹å¸ˆæˆ–è€…ä»¥nodejsåšä¸­é—´å±‚çš„å¼€å‘è€…ï¼Œä½ çš„æ¨¡æ¿ä¸æ˜¯çº¯ç²¹çš„htmlï¼Œä½†æ˜¯åˆéœ€è¦åƒhtmlæ¨¡æ¿é‚£æ ·èƒ½è‡ªåŠ¨æ ¹æ®éœ€è¦æ·»åŠ cssä¸jsæ–‡ä»¶ã€‚</li></ul><p>è¿˜ç­‰ä»€ä¹ˆï¼Œå¿«æ¥è¿™é‡Œçœ‹çœ‹å§â€”â€”<a href="https://github.com/vhtml/webpack-MultiplePage" target="_blank" rel="noopener">åŸºäºwebpackçš„å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘ä¹‹å¤šé¡µç«™ç‚¹ç¯‡ï¼ˆäºŒï¼‰</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨æœ€åˆæ¥è§¦webpackçš„è¾ƒé•¿ä¸€æ®µæ—¶é—´é‡Œï¼Œæˆ‘ï¼ˆä¹Ÿå¯èƒ½å¾ˆå¤šäººï¼‰éƒ½è§‰å¾—webpackæ˜¯ä¸“ä¸ºå•é¡µåº”ç”¨è€Œé‡èº«æ‰“é€ çš„ï¼Œæ¯”å¦‚webpack+reactã€webpack+vueç­‰ï¼Œéƒ½å¯ä»¥è¿‘ä¹å®Œç¾çš„è§£å†³å„ç§èµ„æºçš„ä¾èµ–åŠ è½½ã€æ‰“åŒ…çš„é—®é¢˜ã€‚ç”šè‡³csséƒ½æ˜¯æ‰“åŒ…åœ¨jsé‡Œå»åŠ¨æ€æ·»åŠ åˆ°domæ–‡æ¡£ä¸­å»ã€‚&lt;/p&gt;
&lt;p&gt;åæ¥æƒ³æƒ³ï¼Œè¿™ä¹ˆå¥½çš„å·¥å…·è¿™ä¹ˆå¥½çš„æ–¹æ¡ˆä¸ºä»€ä¹ˆä¸èƒ½ç”¨åœ¨websiteï¼ˆæ™®é€šçš„webç«™ç‚¹ï¼Œå§‘ä¸”å«åšwebsiteå§ï¼‰ä¸­å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;é¦–å…ˆå¯¹äºæ™®é€šçš„webç«™ç‚¹ï¼Œæˆ‘ä»¬æ›´å€¾å‘äºå°†cssç‹¬ç«‹å‡ºæ¥ï¼Œå› ä¸ºå¯¹äºwebsiteæ¥è¯´ï¼Œcssè¿˜æ˜¯è¦æœ€å…ˆåŠ è½½å‡ºæ¥æ¯”è¾ƒå¥½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å†ç„¶åjsæˆ‘ä»¬ä¹Ÿåªæƒ³åŠ è½½éœ€è¦çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¤§å¤§çš„æ‰“åŒ…äº†æ‰€æœ‰jsæ¨¡å—çš„åŒ…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="webæŠ€æœ¯" scheme="https://vhtml.github.io/categories/web%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="webpack" scheme="https://vhtml.github.io/tags/webpack/"/>
    
      <category term="å‰ç«¯å·¥ç¨‹åŒ–" scheme="https://vhtml.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>ä½ æœªå¿…çŸ¥é“çš„JSON.parseå’ŒJSON.stringify</title>
    <link href="https://vhtml.github.io/2016/02/16/JSON/"/>
    <id>https://vhtml.github.io/2016/02/16/JSON/</id>
    <published>2016-02-16T08:15:04.000Z</published>
    <updated>2018-07-09T07:26:50.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="JSON-parse"><a href="#JSON-parse" class="headerlink" title="JSON.parse()"></a>JSON.parse()</h3><p>è§£æJSONæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚</p><p>æˆ‘ä»¬é€šå¸¸çš„ä½¿ç”¨è¯­æ³•æ˜¯ï¼š<code>JSON.parse(s)</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="built_in">JSON</span>.parse(<span class="string">'&#123;"a":1,"b":2&#125;'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(o);</span><br><span class="line"><span class="comment">//Object &#123;a: 1, b: 2&#125;</span></span><br></pre></td></tr></table></figure><p>å…¶å®å®ƒè¿˜èƒ½æ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°ï¼š<code>JSON.parse(s, reviver)</code>ã€‚</p><a id="more"></a><blockquote><p>reviveræ˜¯ç”¨æ¥è½¬æ¢è§£æå€¼çš„å¯é€‰å‡½æ•°ã€‚å¦‚æœæŒ‡å®šäº†reviverå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šä¸ºä»sä¸­è§£æçš„æ¯ä¸€ä¸ªåŸå§‹å€¼ï¼ˆä¸æ˜¯åŒ…å«è¿™äº›åŸå§‹å€¼çš„å¯¹è±¡æˆ–æ•°ç»„ï¼‰è°ƒç”¨ä¸€æ¬¡ã€‚reviveræ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å±æ€§åâ€”â€”å¯¹è±¡çš„å±æ€§åæˆ–è½¬æ¢æˆå­—ç¬¦ä¸²çš„æ•°ç»„åºå·ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯¹è±¡å±æ€§æˆ–æ•°ç»„å…ƒç´ çš„åŸå§‹å€¼ã€‚reviverä¼šä½œä¸ºåŒ…å«åŸå§‹å€¼çš„å¯¹è±¡æˆ–æ•°ç»„çš„æ–¹æ³•æ¥è°ƒç”¨ã€‚åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¦‚æœå­—ç¬¦ä¸²sè¡¨ç¤ºçš„æ˜¯åŸå§‹å€¼è€Œä¸æ˜¯æ›´å¸¸è§çš„å¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œé‚£ä¹ˆè¯¥åŸå§‹å€¼ä¼šå­˜æ”¾åœ¨ä¸€ä¸ªæ–°åˆ›å»ºå¯¹è±¡çš„å±æ€§ä¸­ï¼Œå±æ€§åæ˜¯ç©ºå­—ç¬¦ä¸²ã€‚è¿™æ—¶ï¼Œreviverä¼šåœ¨è¿™ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ä¸Šè°ƒç”¨ä¸€æ¬¡ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯è¯¥åŸå§‹å€¼ã€‚</p></blockquote><blockquote><p>reviverå‡½æ•°çš„è¿”å›å€¼ä¼šæˆä¸ºå±æ€§çš„æ–°å€¼ã€‚å¦‚æœreviverè¿”å›ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯¥å±æ€§ä¿æŒä¸å˜ã€‚å¦‚æœreviverè¿”å›undefinedï¼ˆæˆ–ä¸è¿”å›ï¼‰ï¼Œåˆ™ä¼šä»å¯¹è±¡æˆ–æ•°ç»„ä¸­åˆ é™¤è¯¥å±æ€§ï¼Œå¤„ç†å®Œåæ‰ç”±JSON.parse()è¿”å›ç»™ç”¨æˆ·ã€‚</p></blockquote><p>ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> text = <span class="string">'&#123;"a":1,"_b":2,"t":1455591901242&#125;'</span>;</span><br><span class="line"><span class="keyword">var</span> data = <span class="built_in">JSON</span>.parse(text, <span class="function"><span class="keyword">function</span>(<span class="params">name, value</span>)</span>&#123;</span><br><span class="line"><span class="comment">//ç§»é™¤æ‰æ‰€æœ‰å±æ€§åä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„å±æ€§</span></span><br><span class="line"><span class="keyword">if</span>(name[<span class="number">0</span>] == <span class="string">'_'</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="comment">//å¦‚æœå±æ€§åæ˜¯tï¼Œå¹¶ä¸”å€¼ä¸ºæ•´æ•°ï¼Œåˆ™è½¬æ¢ä¸ºDate</span></span><br><span class="line"><span class="keyword">if</span>(name == <span class="string">'t'</span> &amp;&amp; <span class="regexp">/^-?\d+$/</span>.test(value))</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(value);</span><br><span class="line"><span class="comment">//å¦åˆ™ï¼ŒåŸæ ·è¿”å›</span></span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="JSON-stringify"><a href="#JSON-stringify" class="headerlink" title="JSON.stringify()"></a>JSON.stringify()</h3><p>åºåˆ—åŒ–å¯¹è±¡ã€æ•°ç»„æˆ–åŸå§‹å€¼ã€‚åºåˆ—åŒ–åç”Ÿæˆçš„å­—ç¬¦ä¸²å¯ä»¥è¢«JSON.parse()è§£æã€‚</p><p>æˆ‘ä»¬é€šå¸¸è¿™æ ·ä½¿ç”¨ï¼š<code>JSON.stringify(o)</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="built_in">JSON</span>.stringify(&#123;<span class="attr">a</span>:<span class="number">1</span>,<span class="attr">b</span>:<span class="number">2</span>&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(s);<span class="comment">//&#123;"a":1,"b":2&#125;</span></span><br></pre></td></tr></table></figure><p>å½“JSON.stringify()é‡åˆ°å¸¦æœ‰åä¸ºtoJSON()çš„æ–¹æ³•çš„å¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œå®ƒä¼šè°ƒç”¨è¯¥å¯¹è±¡ä¸Šçš„toJSON()æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toJSON = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">'hehe'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s = <span class="built_in">JSON</span>.stringify(&#123;<span class="attr">a</span>:<span class="number">1</span>,<span class="attr">b</span>:<span class="number">2</span>&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(s);<span class="comment">//"hehe"</span></span><br></pre></td></tr></table></figure><p>å…¶å®å®ƒä¹Ÿèƒ½æ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°ï¼š<code>JSON.stringify(o, filter)</code>ã€‚</p><blockquote><p>è¯¥å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå¯é€‰å‡½æ•°ï¼Œç”¨æ¥åœ¨å­—ç¬¦ä¸²åŒ–å‰åšä¸€äº›æ›¿æ¢ï¼›ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«é‚£äº›éœ€è¦å­—ç¬¦ä¸²åŒ–çš„å±æ€§åã€‚è¯¥å‚æ•°å¯ä»¥åœ¨å­—ç¬¦ä¸²åŒ–çš„è¿‡ç¨‹ä¸­æ·»åŠ è¿‡æ»¤æ“ä½œã€‚å¦‚æœè¯¥å‚æ•°æ˜¯å‡½æ•°ï¼Œåˆ™å®ƒæ˜¯ä¸€ä¸ªreplacerå‡½æ•°ï¼Œä¸ä¸Šé¢ä»‹ç»çš„toJSON()ç±»ä¼¼ã€‚å¦‚æœæŒ‡å®šreplacerå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨æ¯ä¸€ä¸ªéœ€è¦å­—ç¬¦ä¸²åŒ–çš„å€¼ä¸Šè°ƒç”¨ï¼ŒthisæŒ‡å‘å®šä¹‰è¯¥å€¼çš„å¯¹è±¡æˆ–æ•°ç»„ã€‚replacerå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯¥å¯¹è±¡ä¸­çš„å¯¹è±¡å±æ€§åæˆ–æ•°ç»„åºå·ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å€¼æœ¬èº«ã€‚replacerå‡½æ•°çš„è¿”å›å€¼ä¼šæ›¿æ¢éœ€è¦å­—ç¬¦ä¸²åŒ–çš„å€¼ã€‚å¦‚æœreplacerå‡½æ•°è¿”å›undefinedåˆ™ä¼šè¢«å¿½ç•¥ã€‚</p><p>å¦‚æœJSON.stringify()çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„ä¼šä½œä¸ºå¯¹è±¡å±æ€§åã€‚åªæœ‰å±æ€§ååŒ…å«åœ¨æ•°ç»„é‡Œçš„å€¼æ‰ä¼šè¢«åºåˆ—å·ï¼Œå…¶ä»–è¢«å¿½ç•¥ã€‚</p></blockquote><p>ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">a: <span class="number">1</span>,</span><br><span class="line">b: <span class="number">2</span>,</span><br><span class="line">t: <span class="regexp">/\d+/</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‡å®šè¦åºåˆ—åŒ–çš„å­—æ®µ</span></span><br><span class="line"><span class="keyword">var</span> text = <span class="built_in">JSON</span>.stringify(o, [<span class="string">'a'</span>,<span class="string">'b'</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(text); <span class="comment">//&#123;"a":1,"b":2&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‡å®šreplacerå‡½æ•°ï¼Œä½¿RegExpå¾—ä»¥åºåˆ—åŒ–</span></span><br><span class="line"><span class="keyword">var</span> text2 = <span class="built_in">JSON</span>.stringify(o, <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> value);</span><br><span class="line"><span class="keyword">if</span>(value.constructor === <span class="built_in">RegExp</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> value.toString();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(text2); <span class="comment">//&#123;"a":1,"b":2,"t":"\\d+"&#125;</span></span><br><span class="line"><span class="comment">//æˆ–ä½¿ç”¨toJSONå®ç°åŒæ ·çš„æ›¿æ¢</span></span><br><span class="line"><span class="built_in">RegExp</span>.prototype.toJSON = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.toString();&#125;</span><br></pre></td></tr></table></figure><p>JSON.stringifyè¿˜èƒ½æ¥æ”¶ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š<code>JSON.stringify(o, filter, indent)</code>ã€‚</p><blockquote><p>ä½¿ç”¨indentå‚æ•°å¯ä»¥æŒ‡å®šç¼©è¿›å­—ç¬¦ä¸²æˆ–ç”¨æ¥ç¼©è¿›çš„ç©ºæ ¼ä¸ªæ•°ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t = <span class="built_in">JSON</span>.stringify(&#123;<span class="attr">a</span>:<span class="number">1</span>,<span class="attr">b</span>:<span class="number">2</span>&#125;,<span class="literal">null</span>,<span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(t);</span><br><span class="line"><span class="comment">//string</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//    "a": 1,</span></span><br><span class="line"><span class="comment">//    "b": 2</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br></pre></td></tr></table></figure><p>å°æŠ€å·§ï¼šä½¿ç”¨JSON.parseå’ŒJSON.stringifyå®ç°çš„ç®€å•çš„å¯¹è±¡æ·±åº¦å¤åˆ¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneObject</span>(<span class="params">o</span>)</span>&#123; </span><br><span class="line"><span class="keyword">return</span> <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(o));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;JSON-parse&quot;&gt;&lt;a href=&quot;#JSON-parse&quot; class=&quot;headerlink&quot; title=&quot;JSON.parse()&quot;&gt;&lt;/a&gt;JSON.parse()&lt;/h3&gt;&lt;p&gt;è§£æJSONæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é€šå¸¸çš„ä½¿ç”¨è¯­æ³•æ˜¯ï¼š&lt;code&gt;JSON.parse(s)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; o = &lt;span class=&quot;built_in&quot;&gt;JSON&lt;/span&gt;.parse(&lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;&quot;a&quot;:1,&quot;b&quot;:2&amp;#125;&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(o);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Object &amp;#123;a: 1, b: 2&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å…¶å®å®ƒè¿˜èƒ½æ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°ï¼š&lt;code&gt;JSON.parse(s, reviver)&lt;/code&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="webæŠ€æœ¯" scheme="https://vhtml.github.io/categories/web%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="javascript" scheme="https://vhtml.github.io/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šé«˜æ•ˆç‡Javascriptã€‹é˜…è¯»ç¬”è®°</title>
    <link href="https://vhtml.github.io/2016/01/25/effect-js/"/>
    <id>https://vhtml.github.io/2016/01/25/effect-js/</id>
    <published>2016-01-25T09:59:55.000Z</published>
    <updated>2018-07-09T07:26:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»¥ä¸‹æ˜¯é˜…è¯»ã€ŠEffective Javascriptã€‹ä¸€ä¹¦æ‰€åšçš„ä¸€äº›ç®€å•çš„ç¬”è®°ï¼ˆéƒ¨åˆ†å†…å®¹å¹¶ä¸é€‚åˆES6ï¼‰ï¼š</p><h4 id="ä¸€ã€è®©è‡ªå·±ä¹ æƒ¯javascript"><a href="#ä¸€ã€è®©è‡ªå·±ä¹ æƒ¯javascript" class="headerlink" title="ä¸€ã€è®©è‡ªå·±ä¹ æƒ¯javascript"></a>ä¸€ã€è®©è‡ªå·±ä¹ æƒ¯javascript</h4><a id="more"></a><ol><li><p>åœ¨ä»£ç ä¸­ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="comment">//your code</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></li><li><p>å°å¿ƒjsä¸­çš„æµ®ç‚¹æ•°</p><p> <code>0.1+0.2+0.3 != 0.1+(0.2+0.3)</code></p><p> è½¬æ¢ä¸ºæ•´æ•°è®¡ç®—</p><p> <code>1+2+3 == 1+(2+3)</code></p><p> æµ®ç‚¹æ•°æœ‰èˆå…¥è¯¯å·®ï¼Œæ•´æ•°ä¸ä¼š</p></li><li><p>å½“å¿ƒéšå¼çš„å¼ºåˆ¶è½¬æ¢</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>+<span class="literal">true</span> <span class="comment">//2</span></span><br><span class="line"><span class="number">1</span>+<span class="number">2</span> <span class="comment">//3</span></span><br><span class="line"><span class="number">1</span>+<span class="string">'2'</span> <span class="comment">//12</span></span><br><span class="line"><span class="number">1</span>+<span class="number">2</span>+<span class="string">'3'</span> <span class="comment">//33</span></span><br><span class="line"><span class="number">1</span>+<span class="string">'2'</span>+<span class="number">3</span> <span class="comment">//123</span></span><br></pre></td></tr></table></figure><p> åˆ¤æ–­NaN</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">isNaN</span>(<span class="literal">NaN</span>) <span class="comment">//true</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">'foo'</span>) <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p> çœ‹æ¥æ ‡å‡†åº“å‡½æ•°isNaNä¹Ÿä¸æ˜¯å¾ˆå¯é ï¼Œå…¶ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢ï¼Œå¯¹äºç¡®å®šæ˜¯æ•°å­—çš„å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨åŸç†ï¼šNaNæ˜¯jsä¸­å”¯ä¸€ä¸€ä¸ªä¸ç­‰äºå…¶è‡ªèº«çš„å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isReallyNaN</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> x !== x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åŸå§‹ç±»å‹ä¼˜äºå°è£…å¯¹è±¡</p><p> å¯¹åŸå§‹å€¼è®¾ç½®å±æ€§ï¼Œæ¯«æ— ä½œç”¨ï¼Œå› ä¸ºæ¯æ¬¡éšå¼å°è£…ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p><ul><li>è·å–æˆ–è®¾ç½®åŸå§‹ç±»å‹å€¼çš„å±æ€§ä¼šéšå¼çš„åˆ›å»ºå°è£…å¯¹è±¡ã€‚</li><li><p>å½“åšç›¸ç­‰æ¯”è¾ƒæ—¶ï¼ŒåŸå§‹ç±»å‹çš„å°è£…å¯¹è±¡ä¸å…¶åŸå§‹å€¼è¡Œä¸ºä¸ä¸€æ ·ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'xx'</span>.someProperty = <span class="string">'11'</span>;</span><br><span class="line"><span class="string">'xx'</span>.someProperty <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="string">'111'</span>;</span><br><span class="line">x.ss = <span class="string">'222'</span>;</span><br><span class="line">x.ss; <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'dd'</span>);</span><br><span class="line">s.n = <span class="number">1</span>;</span><br><span class="line">s.n; <span class="comment">//1</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>é¿å…å¯¹æ··åˆç±»å‹ä½¿ç”¨<code>==</code>è¿ç®—ç¬¦</p><blockquote><p>æ˜¾ç¤ºåœ°å®šä¹‰è½¬æ¢çš„é€»è¾‘èƒ½ç¡®ä¿ä½ ä¸ä¼šæ··æ·†<code>==</code>è¿ç®—ç¬¦çš„å¼ºåˆ¶è½¬æ¢è§„åˆ™</p></blockquote></li><li><p>äº†è§£åˆ†å·æ’å…¥çš„å±€é™</p></li><li><p>è§†å­—ç¬¦ä¸²ä¸º16ä½çš„ä»£ç å•å…ƒç³»åˆ—</p></li></ol><h4 id="äºŒã€å˜é‡ä½œç”¨åŸŸ"><a href="#äºŒã€å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="äºŒã€å˜é‡ä½œç”¨åŸŸ"></a>äºŒã€å˜é‡ä½œç”¨åŸŸ</h4><ol start="8"><li><p>å°½é‡å°‘ç”¨å…¨å±€å¯¹è±¡</p></li><li><p>å§‹ç»ˆå£°æ˜å±€éƒ¨å˜é‡</p></li><li><p>é¿å…ä½¿ç”¨with</p></li><li><p>ç†Ÿç»ƒæŒæ¡é—­åŒ…</p><p>æŒæ¡é—­åŒ…çš„ä¸‰ä¸ªåŸºæœ¬äº‹å®ï¼š</p><ol><li>jså…è®¸ä½ å¼•ç”¨åœ¨å‡½æ•°ä»¥å¤–å®šä¹‰çš„å˜é‡ã€‚</li><li>å³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»è¿”å›ï¼Œå½“å‰å‡½æ•°ä»ç„¶å¯ä»¥å¼•ç”¨åœ¨å¤–éƒ¨å‡½æ•°æ‰€å®šä¹‰çš„å˜é‡ã€‚</li><li>é—­åŒ…å¯ä»¥æ›´æ–°å¤–éƒ¨å˜é‡çš„å€¼ã€‚</li></ol><blockquote><p>å‡½æ•°å¯ä»¥å¼•ç”¨å®šä¹‰åœ¨å…¶å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ã€‚<br>é—­åŒ…æ¯”åˆ›å»ºä»–çš„å‡½æ•°æœ‰æ›´é•¿çš„ç”Ÿå‘½å‘¨æœŸã€‚<br>é—­åŒ…åœ¨å†…éƒ¨å­˜å‚¨å…¶å¤–éƒ¨å˜é‡çš„å¼•ç”¨ï¼Œå¹¶èƒ½è¯»å†™è¿™äº›å˜é‡ã€‚</p></blockquote></li><li><p>ç†è§£å˜é‡å£°æ˜æå‡</p></li><li><p>ä½¿ç”¨ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼åˆ›å»ºå±€éƒ¨ä½œç”¨åŸŸ</p><blockquote><p>é—­åŒ…é€šè¿‡å¼•ç”¨è€Œä¸æ˜¯å€¼æ•è·å®ƒä»¬çš„å¤–éƒ¨å˜é‡ã€‚</p></blockquote></li><li><p>å½“å¿ƒå‘½åå‡½æ•°è¡¨è¾¾å¼ç¬¨æ‹™çš„ä½œç”¨åŸŸ</p></li><li><p>å½“å¿ƒå±€éƒ¨å—å‡½æ•°å£°æ˜ç¬¨æ‹™çš„ä½œç”¨åŸŸ</p></li><li><p>é¿å…ä½¿ç”¨evalåˆ›å»ºå±€éƒ¨å˜é‡</p><blockquote><p>å®¹æ˜“é€ æˆå˜é‡æ±¡æŸ“</p></blockquote></li><li><p>é—´æ¥è°ƒç”¨evalå‡½æ•°ä¼˜äºç›´æ¥è°ƒç”¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="string">'global'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> x = <span class="string">'local'</span>;</span><br><span class="line"><span class="keyword">var</span> f = <span class="built_in">eval</span>;</span><br><span class="line"><span class="keyword">return</span> f(<span class="string">'x'</span>); <span class="comment">//éç›´æ¥è°ƒç”¨</span></span><br><span class="line">&#125;</span><br><span class="line">test(); <span class="comment">// "global"</span></span><br></pre></td></tr></table></figure><blockquote><p>ç¼–å†™ç®€ä»‹è°ƒç”¨evalå‡½æ•°çš„ä¸€ç§ç®€æ´æ–¹å¼æ˜¯ä½¿ç”¨è¡¨è¾¾å¼åºåˆ—è¿ç®—ç¬¦(,)å’Œä¸€ä¸ªæ˜æ˜¾æ¯«æ— æ„ä¹‰çš„æ•°å­—å­—é¢é‡ã€‚<code>(0,eval)(src)</code></p></blockquote></li></ol><h4 id="ä¸‰ã€ä½¿ç”¨å‡½æ•°"><a href="#ä¸‰ã€ä½¿ç”¨å‡½æ•°" class="headerlink" title="ä¸‰ã€ä½¿ç”¨å‡½æ•°"></a>ä¸‰ã€ä½¿ç”¨å‡½æ•°</h4><ol start="18"><li><p>ç†è§£å‡½æ•°è°ƒç”¨ã€æ–¹æ³•è°ƒç”¨å’Œæ„é€ å‡½æ•°è°ƒç”¨ä¹‹é—´çš„åŒºåˆ«</p></li><li><p>ç†Ÿç»ƒæŒæ¡é«˜é˜¶å‡½æ•°</p><blockquote><p>é«˜é˜¶å‡½æ•°æ˜¯é‚£äº›å°†å‡½æ•°ä½œä¸ºå‚æ•°æˆ–è¿”å›å€¼çš„å‡½æ•°<br>ç†Ÿæ‚‰æŒæ¡ç°æœ‰åº“ä¸­çš„é«˜é˜¶å‡½æ•°<br>å­¦ä¼šå‘ç°å¯ä»¥è¢«é«˜é˜¶å‡½æ•°æ‰€å–ä»£çš„å¸¸è§çš„ç¼–ç æ¨¡å¼</p></blockquote></li><li><p>ä½¿ç”¨callæ–¹æ³•è‡ªå®šä¹‰æ¥æ”¶è€…æ¥è°ƒç”¨æ–¹æ³•</p></li><li><p>ä½¿ç”¨applyæ–¹æ³•é€šè¿‡ä¸åŒæ•°é‡çš„å‚æ•°è°ƒç”¨å‡½æ•°</p></li><li><p>ä½¿ç”¨argumentsåˆ›å»ºå¯å˜å‚æ•°çš„å‡½æ•°</p></li><li><p>æ°¸è¿œä¸è¦ä¿®æ”¹argumentså¯¹è±¡</p><blockquote><p>å¯ä½¿ç”¨[].slice.call(arguments)å°†argumentså¯¹è±¡å¤åˆ¶åˆ°ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ä¸­å†è¿›è¡Œä¿®æ”¹ã€‚</p></blockquote></li><li><p>ä½¿ç”¨å˜é‡ä¿å­˜argumentsçš„å¼•ç”¨</p></li><li><p>ä½¿ç”¨bindæ–¹æ³•æå–å…·æœ‰ç¡®å®šæ¥æ”¶è€…çš„æ–¹æ³•</p><p>bindåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°è€Œä¸æ˜¯ä¿®æ”¹äº†åŸå‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">x.bind(<span class="built_in">document</span>) === x;<span class="comment">//false</span></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨bindæ–¹æ³•å®ç°å‡½æ•°æŸ¯é‡ŒåŒ–</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">simpleURL</span>(<span class="params">protocal, domain, path</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> protocal+<span class="string">'//'</span>+domain+<span class="string">'/'</span>+path;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> urls = paths.map(<span class="function"><span class="keyword">function</span>(<span class="params">path</span>)</span>&#123;</span><br><span class="line">simple(<span class="string">'http'</span>,siteDomain,path);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> urls = paths.map(simpleURL.bind(<span class="literal">null</span>,<span class="string">'http'</span>,siteDomain));</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨é—­åŒ…è€Œä¸æ˜¯å­—ç¬¦ä¸²æ¥å°è£…ä»£ç </p></li><li><p>ä¸è¦ä¿¡èµ–å‡½æ•°å¯¹è±¡çš„toStringæ–¹æ³•</p><blockquote><p>å½“è°ƒç”¨å‡½æ•°çš„<code>toString</code>æ–¹æ³•æ—¶ï¼Œå¹¶æ²¡æœ‰è¦æ±‚jså¼•æ“è¾“å‡ºå‡½æ•°çš„æºç ï¼Œä¸”ä¸åŒå¼•æ“è¾“å‡ºç»“æœå¯èƒ½ä¸åŒã€‚<br><code>toString</code>æ–¹æ³•çš„è¾“å‡ºç»“æœå¹¶ä¸ä¼šæš´éœ²å­˜å‚¨åœ¨é—­åŒ…ä¸­çš„å±€éƒ¨å˜é‡å€¼ã€‚</p></blockquote></li><li><p>é¿å…ä½¿ç”¨éæ ‡å‡†çš„æ ˆæ£€æŸ¥å±æ€§ã€‚</p><blockquote><p>é¿å…ä½¿ç”¨éæ ‡å‡†çš„arguments.calleeå’Œarguments.callerå±æ€§ï¼Œå› ä¸ºä»–ä»¬ä¸å…·æœ‰è‰¯å¥½çš„ç§»æ¤æ€§ã€‚<br>é¿å…ä½¿ç”¨éæ ‡å‡†çš„å‡½æ•°å¯¹è±¡callerå±æ€§ï¼Œå› ä¸ºåœ¨åŒ…å«å…¨æ ˆä¿¡æ¯æ–¹é¢ï¼Œå®ƒæ˜¯ä¸å¯é çš„ï¼Œä¾‹å¦‚å‡½æ•°è‡ªèº«å¾ªç¯å¼•ç”¨ã€‚</p></blockquote></li></ol><h4 id="å››ã€å¯¹è±¡å’ŒåŸå‹"><a href="#å››ã€å¯¹è±¡å’ŒåŸå‹" class="headerlink" title="å››ã€å¯¹è±¡å’ŒåŸå‹"></a>å››ã€å¯¹è±¡å’ŒåŸå‹</h4><ol start="30"><li><p>ç†è§£prototypeã€getPrototypeOfã€<strong>proto</strong>ä¹‹é—´çš„ä¸åŒ</p><blockquote><p>C.prototypeå±æ€§çš„new C()åˆ›å»ºçš„å¯¹è±¡çš„åŸå‹ã€‚<br>Object.getPrototypeOf(obj)æ˜¯ES5ä¸­æ£€ç´¢å¯¹è±¡åŸå‹çš„æ ‡å‡†æ–¹æ³•ã€‚<br>obj.<strong>proto</strong>æ˜¯æ£€ç´¢å¯¹è±¡åŸå‹çš„éæ ‡å‡†æ–¹æ³•ã€‚<br>ç±»æ˜¯ç”±ä¸€ä¸ªæ„é€ å‡½æ•°å’Œä¸€ä¸ªå…³è”çš„åŸå‹ç»„æˆçš„ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚</p></blockquote></li><li><p>ä½¿ç”¨Object.getPrototypeOfå‡½æ•°è€Œä¸è¦ä½¿ç”¨<strong>proto</strong>å±æ€§</p><blockquote><p>å¯¹äºä¸æ”¯æŒES5 APIçš„å¯ä»¥ä½¿ç”¨è¯¥å±æ€§</p></blockquote></li><li><p>ä½¿ç”¨ä¸è¦ä¿®æ”¹<strong>proto</strong>å±æ€§</p></li><li><p>ä½¿æ„é€ å‡½æ•°ä¸newæ“ä½œç¬¦æ— å…³</p><p>ä½¿ç”¨Object.createå‡½æ•°ï¼Œè¯¥å‡½æ•°éœ€è¦ä¸€ä¸ªåŸå‹å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªç»§æ‰¿è‡ªè¯¥åŸå‹å¯¹è±¡çš„æ–°å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="built_in">Object</span>.create === <span class="string">'undefined'</span>)&#123;</span><br><span class="line"><span class="built_in">Object</span>.create = <span class="function"><span class="keyword">function</span>(<span class="params">prototype</span>)</span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">C.prototype = prototype;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> C();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">User</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> self = <span class="keyword">this</span> <span class="keyword">instanceof</span> User</span><br><span class="line">? <span class="keyword">this</span></span><br><span class="line">: <span class="built_in">Object</span>.create(User.prototype);</span><br><span class="line">self.name = name;</span><br><span class="line"><span class="keyword">return</span> self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨åŸå‹ä¸­å­˜å‚¨æ–¹æ³•</p></li><li><p>ä½¿ç”¨é—­åŒ…å­˜å‚¨ç§æœ‰æ•°æ®</p></li><li><p>åªå°†å®ä¾‹å¯¹è±¡å­˜å‚¨åœ¨å®ä¾‹å¯¹è±¡ä¸­</p><blockquote><p>å…±äº«å¯å˜æ•°æ®å¯èƒ½ä¼šå‡ºé—®é¢˜ï¼Œå› ä¸ºåŸå‹æ˜¯è¢«å…¶æ‰€æœ‰çš„å®ä¾‹å…±äº«çš„ã€‚<br>å°†å¯å˜çš„å®ä¾‹çŠ¶æ€å­˜å‚¨åœ¨å®ä¾‹å¯¹è±¡ä¸­ã€‚</p></blockquote></li><li><p>è®¤è¯†åˆ°thiså˜é‡çš„éšå¼ç»‘å®šé—®é¢˜ã€‚</p><p>ä¾‹å¦‚åœ¨mapã€forEachå‚æ•°è°ƒç”¨ä¸­ï¼š</p><blockquote><p>thiså˜é‡çš„ä½œç”¨åŸŸæ€»æ˜¯ç”±å…¶æœ€è¿‘çš„å°é—­å‡½æ•°æ‰€ç¡®å®šã€‚<br>ä½¿ç”¨ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼ˆself,me,thatï¼‰ä½¿å¾—thisç»‘å®šå¯¹äºå†…éƒ¨å‡½æ•°æ˜¯å¯ç”¨çš„ã€‚<br>mapã€forEachéƒ½æä¾›ç¬¬ä¸‰ä¸ªå‚æ•°ä½œä¸ºå…¶å›è°ƒå‡½æ•°çš„thisç»‘å®šã€‚<br>åœ¨å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨bindç»‘å®šã€‚<br>ä½¿ç”¨å±€éƒ¨å˜é‡ç¼“å­˜thisã€‚</p></blockquote><pre><code>[].map(fn, o);[].forEach(fn,o);[].map(fn.bind(this));[].forEach(fn.bind(this));</code></pre></li><li><p>åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</p><p>è¯´ç™½äº†ï¼Œå°±æ˜¯é¢å‘å¯¹è±¡çš„ç»§æ‰¿å’Œå¤šæ€ã€‚</p><blockquote><p>åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­æ˜¾ç¤ºçš„ä¼ å…¥thisä½œä¸ºæ˜¾ç¤ºçš„æ¥æ”¶è€…è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ã€‚<br>ä½¿ç”¨Object.createå‡½æ•°æ¥æ„é€ å­ç±»çš„åŸå‹å¯¹è±¡ä»¥é¿å…è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Actor</span>(<span class="params">scene,x,y</span>)</span>&#123;</span><br><span class="line"><span class="keyword">this</span>.scene = scene;</span><br><span class="line"><span class="keyword">this</span>.x = x;</span><br><span class="line"><span class="keyword">this</span>.y = y;</span><br><span class="line">scene.register(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">Actor.prototype.moveTo = <span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line"><span class="keyword">this</span>.x = x;</span><br><span class="line"><span class="keyword">this</span>.y = y;</span><br><span class="line"><span class="keyword">this</span>.scene.draw();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SpaceShip</span>(<span class="params">scene,x,y</span>)</span>&#123;</span><br><span class="line">Actor.call(<span class="keyword">this</span>,scene,x,y);</span><br><span class="line"><span class="keyword">this</span>.points = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">SpaceShip.prototype = <span class="built_in">Object</span>.create(Actor.prototype);</span><br></pre></td></tr></table></figure></li><li><p>ä¸è¦é‡ç”¨çˆ¶ç±»çš„å±æ€§å</p><blockquote><p>å¦‚æœåœ¨ç»§æ‰¿ä½“ç³»ä¸­çš„ä¸¤ä¸ªç±»æŒ‡å‘ç›¸åŒçš„å±æ€§åï¼Œé‚£ä¹ˆå®ƒä»¬æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå±æ€§ã€‚</p></blockquote></li><li><p>é¿å…ç»§æ‰¿æ ‡å‡†ç±»</p><blockquote><p>ç»§æ‰¿æ ‡å‡†ç±»å¾€å¾€ä¼šç”±äºä¸€äº›ç‰¹æ®Šçš„å†…éƒ¨å±æ€§ï¼ˆå¦‚[[Class]]ï¼‰è€Œè¢«ç ´åã€‚<br>ä½¿ç”¨å±æ€§å§”æ‰˜ä¼˜äºç»§æ‰¿æ ‡å‡†ç±»ã€‚</p></blockquote></li><li><p>å°†åŸå‹è§†ä¸ºå®ç°ç»†èŠ‚</p><blockquote><p>jsæä¾›äº†ä¾¿åˆ©çš„å†…çœæœºåˆ¶(introspection mechanisms)æ¥æ£€æŸ¥å¯¹è±¡çš„ç»†èŠ‚ã€‚<code>Object.prototype.hasOwnProperty/Object.getPrototypeOf</code> </p></blockquote></li><li><p>é¿å…ä½¿ç”¨è½»ç‡çš„çŒ´å­è¡¥ä¸</p><p>ç”±äºå¯¹è±¡å…±äº«åŸå‹ï¼Œå› ä¸ºæ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥å¢åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹åŸå‹çš„å±æ€§ã€‚</p><blockquote><p>é¿å…ä½¿ç”¨è½»ç‡çš„çŒ´å­è¡¥ä¸ã€‚<br>è®°å½•ç¨‹åºåº“æ‰€æ‰§è¡Œçš„æ‰€æœ‰çŒ´å­è¡¥ä¸ã€‚<br>è€ƒè™‘é€šè¿‡å°†ä¿®æ”¹ç½®äºä¸€ä¸ªå¯¼å‡ºå‡½æ•°ä¸­ï¼Œä½¿çŒ´å­è¡¥ä¸æˆä¸ºå¯é€‰çš„ã€‚<br>ä½¿ç”¨çŒ´å­è¡¥ä¸ä¸ºç¼ºå¤±çš„æ ‡å‡†APIæä¾›polyfillsã€‚</p></blockquote><p>ä¸€ä¸ªè¾ƒä¸ºé è°±çš„åšæ³•æ˜¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="built_in">Array</span>.prototype.map !==<span class="string">'function'</span>)&#123;</span><br><span class="line"><span class="built_in">Array</span>.prototype.map = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="äº”ã€æ•°ç»„å’Œå­—å…¸"><a href="#äº”ã€æ•°ç»„å’Œå­—å…¸" class="headerlink" title="äº”ã€æ•°ç»„å’Œå­—å…¸"></a>äº”ã€æ•°ç»„å’Œå­—å…¸</h4><ol start="43"><li><p>ä½¿ç”¨Objectçš„ç›´æ¥å®ä¾‹æ„é€ è½»é‡çº§çš„å­—å…¸</p><p>JavaScriptå¯¹è±¡çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å±æ€§åç§°ä¸å±æ€§å€¼çš„æ˜ å°„è¡¨ã€‚è¿™ä½¿å¾—ä½¿ç”¨å¯¹è±¡å®ç°å­—å…¸æ˜“å¦‚åæŒï¼Œå› ä¸ºå­—å…¸å°±æ˜¯å¯å˜é•¿çš„å­—ç¬¦ä¸²ä¸å€¼çš„æ˜ å°„é›†åˆã€‚é…åˆå¯¹è±¡æšä¸¾åˆ©å™¨ï¼šforâ€¦inå¾ªç¯ã€‚</p></li><li><p>ä½¿ç”¨nullåŸå‹ä»¥é˜²æ­¢åŸå‹æ±¡æŸ“</p><blockquote><p>åœ¨ES5ç¯å¢ƒä¸­ï¼Œä½¿ç”¨<code>Object.create(null)</code>åˆ›å»ºçš„è‡ªç”±åŸå‹çš„ç©ºå¯¹è±¡æ˜¯ä¸å¤ªå®¹æ˜“è¢«æ±¡æŸ“çš„ã€‚<br>åœ¨ä¸€äº›è¾ƒè€çš„ç¯å¢ƒä¸­ï¼Œè€ƒè™‘ä½¿ç”¨{<strong>proto</strong>:null}ã€‚<br>ä½†è¦æ³¨æ„<strong>proto</strong>æ—¢ä¸æ ‡å‡†ä¹Ÿä¸å®Œå…¨å¯ç§»æ¤ï¼Œå°†æ¥å¯èƒ½ä¼šå»é™¤ã€‚</p></blockquote></li><li><p>ä½¿ç”¨hasOwnPropertyæ–¹æ³•ä»¥é¿å…åŸå‹æ±¡æŸ“ã€‚</p><blockquote><p>ä½¿ç”¨è¯æ³•ä½œç”¨åŸŸå’Œcallæ–¹æ³•é¿å…è¦†ç›–hasOwnPropertyæ–¹æ³•ã€‚<br>ä½¿ç”¨å­—å…¸ç±»é¿å…å°†â€™<strong>proto</strong>â€˜ä½œä¸ºkeyæ¥ä½¿ç”¨ã€‚</p></blockquote><p>ç»ˆæè¯å…¸ä»£ç å®ç°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dict</span>(<span class="params">elements</span>)</span>&#123;</span><br><span class="line"><span class="keyword">this</span>.elements = elements;</span><br><span class="line"><span class="keyword">this</span>.hasSpecialProto = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">this</span>.specialProto = <span class="literal">undefined</span>;</span><br><span class="line">&#125;</span><br><span class="line">Dict.prototype.has = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(key === <span class="string">'__proto__'</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.hasSpecialProto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> &#123;&#125;.hasOwnProperty.call(<span class="keyword">this</span>.elements,key);</span><br><span class="line">&#125;;</span><br><span class="line">Dict.prototype.get = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(key === <span class="string">'__proto__'</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.specialProto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.has(key)?<span class="keyword">this</span>.elements[key]:<span class="literal">undefined</span>;</span><br><span class="line">&#125;;</span><br><span class="line">Dict.prototype.set = <span class="function"><span class="keyword">function</span>(<span class="params">key, val</span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(key === <span class="string">'__proto__'</span>)&#123;</span><br><span class="line"><span class="keyword">this</span>.hasSpecialProto = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">this</span>.specialProto = val;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">this</span>.elements[key] = val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">Dict.prototype.remove = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(key === <span class="string">'__proto__'</span>)&#123;</span><br><span class="line"><span class="keyword">this</span>.hasSpecialProto = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">this</span>.specialProto = <span class="literal">undefined</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">this</span>.elements[key];</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> dict = <span class="keyword">new</span> Dict();</span><br><span class="line">dict.set(<span class="string">'__proto__'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(dict.has(<span class="string">'__proto__'</span>));</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨æ•°ç»„è€Œä¸è¦ä½¿ç”¨å­—å…¸æ¥å­˜å‚¨æœ‰åºé›†åˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ratings = &#123;</span><br><span class="line"><span class="string">'haha'</span>:<span class="number">0.8</span>,</span><br><span class="line"><span class="string">'xixi'</span>:<span class="number">0.7</span>,</span><br><span class="line"><span class="string">'21'</span>:<span class="number">0.6</span>,</span><br><span class="line"><span class="string">'hehe'</span>:<span class="number">0.9</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> total = <span class="number">0</span>,count=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> ratings)&#123;</span><br><span class="line">total += ratings[key];</span><br><span class="line"><span class="built_in">console</span>.log(key);</span><br><span class="line">count++;</span><br><span class="line">&#125;</span><br><span class="line">total /= count;</span><br><span class="line"><span class="built_in">console</span>.log(total);</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨forâ€¦inå¾ªç¯æ¥æšä¸¾å¯¹è±¡å±æ€§åº”å½“ä¸é¡ºåºæ— å…³ã€‚<br>å¦‚æœèšé›†è¿ç®—å­—å…¸ä¸­çš„æ•°æ®ï¼Œç¡®ä¿èšé›†æ“ä½œä¸é¡ºåºæ— å…³ã€‚<br>ä½¿ç”¨æ•°ç»„è€Œä¸æ˜¯å­—å…¸æ¥å­˜å‚¨æœ‰åºé›†åˆã€‚</p></blockquote></li><li><p>ç»å¯¹ä¸è¦åœ¨Object.prototypeä¸­å¢åŠ å¯æšä¸¾çš„å±æ€§</p><blockquote><p>ä½¿ç”¨<code>Object.defineProperty</code>æ–¹æ³•å®šä¹‰ä¸å¯æšä¸¾å±æ€§ã€‚<br>ä½¿ç”¨<code>{}.hasOwnProperty</code>åˆ¤æ–­æ˜¯å¦æ˜¯åŸå‹ä¸Šçš„æ–¹æ³•ã€‚</p></blockquote></li><li><p>é¿å…åœ¨æšä¸¾æœŸé—´ä¿®æ”¹å¯¹è±¡</p></li><li><p>æ•°ç»„è¿­ä»£è¦ä¼˜å…ˆä½¿ç”¨forå¾ªç¯è€Œä¸æ˜¯forâ€¦inå¾ªç¯</p></li><li><p>è¿­ä»£æ–¹æ³•ä¼˜äºå¾ªç¯</p><blockquote><p>ä½¿ç”¨è¿­ä»£æ–¹æ³•ï¼ˆforEach,map,filterï¼‰æ›¿ä»£forå¾ªç¯ä½¿å¾—ä»£ç æ›´å¯è¯»ï¼Œå¹¶ä¸”é¿å…äº†é‡å¤å¾ªç¯æ§åˆ¶é€»è¾‘ã€‚<br>ä½¿ç”¨è‡ªå®šä¹‰çš„è¿­ä»£å‡½æ•°æ¥æŠ½è±¡æœªè¢«æ ‡å‡†åº“æ”¯æŒçš„å¸¸è§å¾ªç¯æ¨¡å¼ã€‚<br>åœ¨éœ€è¦æå‰ç»ˆæ­¢å¾ªç¯çš„æƒ…å†µä¸‹ï¼Œä»ç„¶æ¨èä½¿ç”¨ä¼ ç»Ÿçš„å¾ªç¯ã€‚someå’Œeveryæ–¹æ³•ä¹Ÿå¯ç”¨äºæå‰é€€å‡ºã€‚</p></blockquote></li><li><p>åœ¨ç±»æ•°ç»„å¯¹è±¡ä¸Šå¤ç”¨é€šç”¨çš„æ•°ç»„æ–¹æ³•</p><blockquote><p>å¯¹äºç±»æ•°ç»„å¯¹è±¡ï¼Œé€šè¿‡æå–æ–¹æ³•å¯¹è±¡å¹¶ä½¿ç”¨å…¶callæ–¹æ³•æ¥å¤ç”¨é€šç”¨çš„Arrayæ–¹æ³•ã€‚<br>ä»»æ„ä¸€ä¸ªå…·æœ‰ç´¢å¼•å±æ€§å’Œæ°å½“lengthå±æ€§çš„å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨é€šç”¨çš„Arrayæ–¹æ³•ã€‚</p></blockquote></li><li><p>æ•°ç»„å­—é¢é‡ä¼˜äºæ•°ç»„æ„é€ å‡½æ•°</p></li></ol><h4 id="å…­ã€åº“å’ŒAPIè®¾è®¡"><a href="#å…­ã€åº“å’ŒAPIè®¾è®¡" class="headerlink" title="å…­ã€åº“å’ŒAPIè®¾è®¡"></a>å…­ã€åº“å’ŒAPIè®¾è®¡</h4><ol start="53"><li><p>ä¿æŒä¸€è‡´çš„çº¦å®š</p></li><li><p>å°†undefinedçœ‹åšâ€æ²¡æœ‰å€¼â€</p><blockquote><p>é¿å…ä½¿ç”¨undefinedè¡¨ç¤ºä»»ä½•éç‰¹å®šå€¼<br>ä½¿ç”¨æè¿°æ€§çš„å­—ç¬¦ä¸²å€¼æˆ–å‘½åå¸ƒå°”å±æ€§çš„å¯¹è±¡ï¼Œè€Œä¸è¦ä½¿ç”¨undefinedæˆ–nullæ¥è¡¨ç¤ºç‰¹å®šåº”ç”¨æ ‡å¿—<br>æä¾›å‚æ•°é»˜è®¤å€¼åº”å½“é‡‡ç”¨æµ‹è¯•undefinedçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯æ£€æŸ¥arguments.length<br>åœ¨å…è®¸0ã€NaNæˆ–ç©ºå­—ç¬¦ä¸²ä¸ºæœ‰æ•ˆå‚æ•°çš„åœ°æ–¹ï¼Œç»ä¸è¦é€šè¿‡çœŸå€¼æµ‹è¯•æ¥å®ç°å‚æ•°é»˜è®¤å€¼</p></blockquote></li><li><p>æ¥æ”¶å…³é”®å­—å‚æ•°çš„é€‰é¡¹å¯¹è±¡</p><blockquote><p>ä½¿ç”¨é€‰é¡¹å¯¹è±¡ä½¿å¾—APIæ›´å…·å¯è¯»æ€§ã€æ›´å®¹æ˜“è®°å¿†<br>æ‰€æœ‰é€šè¿‡é€‰é¡¹å¯¹è±¡æä¾›çš„å‚æ•°åº”å½“è¢«è§†ä¸ºå¯é€‰çš„<br>ä½¿ç”¨extendå‡½æ•°æŠ½è±¡å‡ºä»é€‰é¡¹å¯¹è±¡ä¸­æå–å€¼çš„é€»è¾‘</p></blockquote></li><li><p>é¿å…ä¸å¿…è¦çš„çŠ¶æ€</p><blockquote><p>å°½å¯èƒ½åœ°ä½¿ç”¨æ— çŠ¶æ€çš„API<br>å¦‚æœAPIæ˜¯ç”±çŠ¶æ€çš„ï¼Œæ ‡ç¤ºå‡ºæ¯ä¸ªæ“ä½œä¸å“ªäº›çŠ¶æ€ç”±å…³è”</p></blockquote></li><li><p>ä½¿ç”¨ç»“æ„ç±»å‹è®¾è®¡çµæ´»çš„æ¥å£</p></li><li><p>åŒºåˆ†æ•°æ®å¯¹è±¡å’Œç±»æ•°ç»„å¯¹è±¡</p></li><li><p>é¿å…è¿‡åº¦çš„å¼ºåˆ¶è½¬æ¢</p></li><li><p>æ”¯æŒæ–¹æ³•é“¾</p><blockquote><p>ä½¿ç”¨æ–¹æ³•é“¾æ¥è¿æ¥æ— çŠ¶æ€çš„æ“ä½œ<br>é€šè¿‡åœ¨æ— çŠ¶æ€çš„æ–¹æ³•ä¸­è¿”å›æ–°å¯¹è±¡æ¥æ”¯æŒæ–¹æ³•é“¾<br>é€šè¿‡åœ¨æœ‰çŠ¶æ€çš„æ–¹æ³•ä¸­è¿”å›thisæ¥æ”¯æŒæ–¹æ³•é“¾</p></blockquote></li></ol><h4 id="ä¸ƒã€å¹¶å‘"><a href="#ä¸ƒã€å¹¶å‘" class="headerlink" title="ä¸ƒã€å¹¶å‘"></a>ä¸ƒã€å¹¶å‘</h4><ol start="61"><li><p>ä¸è¦é˜»å¡I/Oäº‹ä»¶é˜Ÿåˆ—</p></li><li><p>åœ¨å¼‚æ­¥åºåˆ—ä¸­ä½¿ç”¨åµŒå¥—æˆ–å‘½åçš„å›è°ƒå‡½æ•°</p><blockquote><p>ä½¿ç”¨åµŒå¥—æˆ–å‘½åçš„å›è°ƒå‡½æ•°æŒ‰é¡ºåºåœ°æ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œ<br>å°è¯•åœ¨è¿‡å¤šçš„åµŒå¥—çš„å›è°ƒå‡½æ•°å’Œå°´å°¬çš„å‘½åçš„éåµŒå¥—å›è°ƒå‡½æ•°ä¹‹é—´å–å¾—å¹³è¡¡<br>é¿å…å°†å¯è¢«å¹¶è¡Œæ‰§è¡Œçš„æ“ä½œé¡ºåºåŒ–</p></blockquote></li><li><p>å½“å¿ƒä¸¢å¼ƒé”™è¯¯</p></li><li><p>å¯¹å¼‚æ­¥å¾ªç¯ä½¿ç”¨é€’å½’</p><blockquote><p>å¾ªç¯ä¸èƒ½æ˜¯å¼‚æ­¥çš„<br>ä½¿ç”¨é€’å½’å‡½æ•°åœ¨äº‹ä»¶å¾ªç¯çš„å•ç‹¬è½®æ¬¡ä¸­æ‰§è¡Œè¿­ä»£<br>åœ¨äº‹ä»¶å¾ªç¯çš„å•ç‹¬è½®æ¬¡ä¸­æ‰§è¡Œé€’å½’ï¼Œå¹¶ä¸ä¼šå¯¼è‡´è°ƒç”¨æ ˆæº¢å‡º</p></blockquote></li><li><p>ä¸è¦åœ¨è®¡ç®—æ—¶é˜»å¡äº‹ä»¶é˜Ÿåˆ—</p><blockquote><p>é¿å…åœ¨ä¸»äº‹ä»¶é˜Ÿåˆ—ä¸­æ‰§è¡Œä»£ä»·é«˜æ˜‚çš„ç®—æ³•<br>åœ¨æ”¯æŒWorker APIçš„å¹³å°ï¼Œè¯¥APIå¯ä»¥ç”¨æ¥åœ¨ä¸€ä¸ªç‹¬ç«‹çš„äº‹ä»¶é˜Ÿåˆ—ä¸­è¿è¡Œé•¿è®¡ç®—ç¨‹åº</p></blockquote></li><li><p>ä½¿ç”¨è®¡æ•°å™¨æ¥æ‰§è¡Œå¹¶è¡Œæ“ä½œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">downloadAllAsync</span>(<span class="params">urls, onsuccess</span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> pending = urls.length;</span><br><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">if</span>(pending === <span class="number">0</span>)&#123;</span><br><span class="line">setTimeout(onsuccess.bind(<span class="literal">null</span>, result),<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//for(var i=0;i&lt;pending;i++)&#123;</span></span><br><span class="line"><span class="comment">//console.log(urls[i],i);</span></span><br><span class="line"><span class="comment">//downloadAsync(url,function(urls[i])&#123;</span></span><br><span class="line"><span class="comment">//result[i] = text;</span></span><br><span class="line"><span class="comment">//console.log(i,text);</span></span><br><span class="line"><span class="comment">//pending--;</span></span><br><span class="line"><span class="comment">//if(pending === 0)&#123;</span></span><br><span class="line"><span class="comment">//onsuccess(result);</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//&#125;);</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line">urls.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">url, i</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(url,i);</span><br><span class="line">downloadAsync(url, <span class="function"><span class="keyword">function</span>(<span class="params">text</span>)</span>&#123;</span><br><span class="line">result[i] = text;</span><br><span class="line"><span class="built_in">console</span>.log(i,text);</span><br><span class="line">pending--;</span><br><span class="line"><span class="keyword">if</span>(pending === <span class="number">0</span>)&#123;</span><br><span class="line">onsuccess(result);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">downloadAsync</span>(<span class="params">url, fnSuc</span>)</span>&#123;</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">fnSuc(url);</span><br><span class="line">&#125;,<span class="built_in">Math</span>.random()*<span class="number">10000</span>);</span><br><span class="line">&#125;</span><br><span class="line">downloadAllAsync([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>],<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>ç»ä¸è¦åŒæ­¥åœ°è°ƒç”¨å¼‚æ­¥çš„å›è°ƒå‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cache = <span class="keyword">new</span> Dict();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">downloadCachingAsync</span>(<span class="params">url, onsuccess, onerror</span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(cache.has(url)&#123;</span><br><span class="line"><span class="keyword">var</span> cached = cache.get(url);</span><br><span class="line">setTimeout(onsuccess.bind(<span class="literal">null</span>,cached),<span class="number">0</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> downloadAsync(url, <span class="function"><span class="keyword">function</span>(<span class="params">file</span>)</span>&#123;</span><br><span class="line">cache.set(url, file);</span><br><span class="line">onsuccess(file);</span><br><span class="line">&#125;,onerror);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å³ä½¿å¯ä»¥ç«‹å³å¾—åˆ°æ•°æ®ï¼Œä¹Ÿç»ä¸è¦åŒæ­¥åœ°è°ƒç”¨å¼‚æ­¥å›è°ƒå‡½æ•°ã€‚<br>åŒæ­¥åœ°è°ƒç”¨å¼‚æ­¥çš„å›è°ƒå‡½æ•°æ‰°ä¹±äº†é¢„æœŸçš„æ“ä½œåºåˆ—ï¼Œå¹¶å¯èƒ½å¯¼è‡´æ„æƒ³ä¸åˆ°çš„äº¤é”™ä»£ç ã€‚<br>åŒæ­¥åœ°è°ƒç”¨å¼‚æ­¥çš„å›è°ƒå‡½æ•°å¯èƒ½å¯¼è‡´æ ˆæº¢å‡ºæˆ–é”™è¯¯åœ°å¤„ç†å¼‚å¸¸ã€‚<br>ä½¿ç”¨å¼‚æ­¥çš„APIï¼Œæ¯”å¦‚setTimeoutå‡½æ•°æ¥è°ƒåº¦å¼‚æ­¥å›è°ƒå‡½æ•°ï¼Œä½¿å…¶è¿è¡Œäºå¦ä¸€ä¸ªå›åˆã€‚</p></blockquote></li><li><p>ä½¿ç”¨promiseæ¨¡å¼æ¸…æ´å¼‚æ­¥é€»è¾‘</p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹æ˜¯é˜…è¯»ã€ŠEffective Javascriptã€‹ä¸€ä¹¦æ‰€åšçš„ä¸€äº›ç®€å•çš„ç¬”è®°ï¼ˆéƒ¨åˆ†å†…å®¹å¹¶ä¸é€‚åˆES6ï¼‰ï¼š&lt;/p&gt;
&lt;h4 id=&quot;ä¸€ã€è®©è‡ªå·±ä¹ æƒ¯javascript&quot;&gt;&lt;a href=&quot;#ä¸€ã€è®©è‡ªå·±ä¹ æƒ¯javascript&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€è®©è‡ªå·±ä¹ æƒ¯javascript&quot;&gt;&lt;/a&gt;ä¸€ã€è®©è‡ªå·±ä¹ æƒ¯javascript&lt;/h4&gt;
    
    </summary>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://vhtml.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="javascript" scheme="https://vhtml.github.io/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>rediså­¦ä¹ å®è·µ</title>
    <link href="https://vhtml.github.io/2016/01/19/redis-study/"/>
    <id>https://vhtml.github.io/2016/01/19/redis-study/</id>
    <published>2016-01-19T07:30:31.000Z</published>
    <updated>2018-07-09T07:26:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>Redis æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„key-valueæ•°æ®åº“ã€‚æ—¢å¯å†…å­˜å­˜å‚¨åˆå¯æŒä¹…åŒ–ï¼Œç€å®ç‰›é€¼ã€‚å®ƒæä¾›äº”ç§æ•°æ®ç±»å‹ï¼šstring, hash, list, setåŠzset(sorted set)ã€‚</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å¥½çƒ¦ï¼Œæ¯æ¬¡å­¦ä¹ ä¸€é¡¹æ–°å·¥å…·ï¼Œæ€»è¦å…ˆæ£è…¾å¥½ä¸€é˜µå­å®‰è£…å’Œé…ç½®ã€‚å…¶å®æˆ‘å·²ç»è¿«ä¸åŠå¾…åœ°æƒ³è¦ä¸€çª¥å…¶é£éªšçš„èµ°ä½å’Œæ“ä½œäº†ã€‚å¯æ˜¯ç¨å®‰å‹¿èºï¼Œè¯¥åšçš„è¿˜æ˜¯ä¸€æ­¥éƒ½ä¸èƒ½çœå“ªï¼</p><a id="more"></a><p>è·å–æºç ã€è§£å‹ã€è¿›å…¥æºç ç›®å½•ã€ç¼–è¯‘å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ wget http://download.redis.io/releases/redis-3.0.6.tar.gz</span><br><span class="line">$ tar xzf redis-3.0.6.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> redis-3.0.6</span><br><span class="line">$ make</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å¥½åæ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-server &amp;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨å®¢æˆ·ç«¯shellï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-cli</span><br><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> foo bar</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get foo</span><br><span class="line"><span class="string">"bar"</span></span><br><span class="line">redis&gt;</span><br></pre></td></tr></table></figure><p>æˆ‘æ“¦ï¼Œæˆ‘æ²¡æœ‰çœ‹é”™å§ï¼Œå·²ç»å¯ä»¥è¿›è¡Œå­˜å–äº†ï¼ç®€å•åˆ°è¾±æ²¡æ™ºå•†å“ªï¼</p><h3 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h3><p>æ²¡æƒ³åˆ°ï¼Œè¿™ä¹ˆå¿«å°±æ­¥å…¥æ­£é¢˜äº†ï¼Œå¼€å¤´è¯´è¿‡ï¼Œredisæ˜¯ä¸€ç§é«˜æ€§èƒ½key-valueå­˜å‚¨ç³»ç»Ÿï¼Œæœ‰äº”ç§æ•°æ®ç±»å‹ï¼Œè·Ÿmysqlä¸€æ ·ï¼Œredisä¸­çš„æ“ä½œæŒ‡ä»¤å¹¶ä¸åŒºåˆ†å¤§å°å†™ã€‚</p><ol><li><p>å­—ç¬¦ä¸²(string)</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> mynum <span class="string">"2"</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get mynum</span><br><span class="line"><span class="string">"2"</span></span><br><span class="line">127.0.0.1:6379&gt; incr mynum</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">127.0.0.1:6379&gt; get mynum</span><br><span class="line"><span class="string">"3"</span></span><br><span class="line">127.0.0.1:6379&gt; incrby mynum 5</span><br><span class="line"><span class="string">"8"</span></span><br></pre></td></tr></table></figure><p> <code>set key value</code> å­˜å‚¨ä¸€ä¸ªé”®å€¼å¯¹ï¼Œ<code>get key</code> è·å–ä¸€ä¸ªé”®å€¼å¯¹ã€‚</p><p> å¯çŸ¥ï¼Œåœ¨é‡åˆ°æ•°å€¼æ“ä½œæ—¶ï¼Œredisä¼šå°†å­—ç¬¦ä¸²ç±»å‹è½¬æˆæ•°å€¼ã€‚<code>incr</code>ç­‰æŒ‡ä»¤æœ¬èº«å…·æœ‰åŸå­æ“ä½œçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨redisçš„<code>incr</code>ã€<code>incrby</code>ã€<code>decr</code>ã€<code>decrby</code>ç­‰æŒ‡ä»¤æ¥å®ç°åŸå­è®¡æ•°çš„æ•ˆæœã€‚</p></li><li><p>å­—ç¬¦ä¸²åˆ—è¡¨(list)</p><p> redisä¸­çš„liståœ¨åº•å±‚å®ç°ä¸Šä¸æ˜¯æ•°ç»„è€Œæ˜¯é“¾è¡¨ï¼Œè¿™è¯´æ˜äº†ä»€ä¹ˆå‘¢ï¼Ÿè¯´æ˜äº†åœ¨listä¸Šæ’å…¥ä¸€ä¸ªæ–°å…ƒç´ ï¼ˆæ— è®ºè¡Œé¦–è¡Œå°¾è¡Œä¸­ï¼‰ï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚æ¯”å¦‚ç”¨<code>lpush</code>åœ¨10ä¸ªå…ƒç´ çš„listå¤´éƒ¨æ’å…¥æ–°å…ƒç´ ï¼Œå’Œåœ¨ä¸Šåƒä¸‡å…ƒç´ çš„listå¤´éƒ¨æ’å…¥æ–°å…ƒç´ çš„é€Ÿåº¦æ˜¯ç›¸åŒçš„ã€‚</p><p> ç„¶è€Œæœ‰åˆ©æ€»æœ‰å¼Šå˜›ï¼Œlistå–å…ƒç´ çš„é€Ÿåº¦å°±æ²¡æ•°ç»„é‚£ä¹ˆå¿«äº†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p><p> listçš„å¸¸ç”¨æ“ä½œåŒ…æ‹¬<code>lpush</code>ã€<code>rpush</code>ã€<code>lrange</code>ç­‰ã€‚æˆ‘ä»¬å¯ä»¥ç”¨<code>lpush</code>åœ¨listçš„å·¦ä¾§æ’å…¥ä¸€ä¸ªæ–°å…ƒç´ ï¼Œç”¨<code>rpush</code>åœ¨listçš„å³ä¾§æ’å…¥ä¸€ä¸ªæ–°å…ƒç´ ï¼Œç”¨<code>lrange</code>å‘½ä»¤ä»listä¸­æŒ‡å®šä¸€ä¸ªèŒƒå›´æ¥æå–å…ƒç´ ã€‚ä¾‹å¦‚ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ–°å»ºä¸€ä¸ªlistå«åšmylistï¼Œå¹¶åœ¨åˆ—è¡¨å¤´éƒ¨æ’å…¥å…ƒç´ "1" </span></span><br><span class="line">127.0.0.1:6379&gt; lpush mylist <span class="string">"1"</span>  </span><br><span class="line"><span class="comment">#è¿”å›å½“å‰mylistä¸­çš„å…ƒç´ ä¸ªæ•° </span></span><br><span class="line">(<span class="built_in">integer</span>) 1  </span><br><span class="line"><span class="comment">#åœ¨mylistå³ä¾§æ’å…¥å…ƒç´ "2" </span></span><br><span class="line">127.0.0.1:6379&gt; rpush mylist <span class="string">"2"</span>  </span><br><span class="line">(<span class="built_in">integer</span>) 2 </span><br><span class="line"><span class="comment">#åœ¨mylistå·¦ä¾§æ’å…¥å…ƒç´ "0" </span></span><br><span class="line">127.0.0.1:6379&gt; lpush mylist <span class="string">"0"</span>  </span><br><span class="line">(<span class="built_in">integer</span>) 3 </span><br><span class="line"><span class="comment">#åˆ—å‡ºmylistä¸­ä»ç¼–å·0åˆ°ç¼–å·1çš„å…ƒç´  </span></span><br><span class="line">127.0.0.1:6379&gt; lrange mylist 0 1  </span><br><span class="line">1) <span class="string">"0"</span> </span><br><span class="line">2) <span class="string">"1"</span> </span><br><span class="line"><span class="comment">#åˆ—å‡ºmylistä¸­ä»ç¼–å·0åˆ°å€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´  </span></span><br><span class="line">127.0.0.1:6379&gt; lrange mylist 0 -1  </span><br><span class="line">1) <span class="string">"0"</span> </span><br><span class="line">2) <span class="string">"1"</span> </span><br><span class="line">3) <span class="string">"2"</span></span><br></pre></td></tr></table></figure><p> listçš„åº”ç”¨ç›¸å½“å¹¿æ³›ï¼Œä¾‹å¦‚ï¼š</p><ol><li>å¯ä»¥åˆ©ç”¨listæ¥å®ç°ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œè€Œä¸”å¯ä»¥ç¡®ä¿å…ˆåé¡ºåºï¼Œä¸å¿…åƒmysqlé‚£æ ·è¿˜éœ€è¦é€šè¿‡<code>order by</code>æ¥è¿›è¡Œæ’åºã€‚</li><li>åˆ©ç”¨lrangeå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°åˆ†é¡µåŠŸèƒ½ã€‚</li><li>åœ¨åšå®¢ç³»ç»Ÿä¸­ï¼Œæ¯ç¯‡åšæ–‡çš„è¯„è®ºä¹Ÿå¯ä»¥å­˜å…¥ä¸€ä¸ªå•ç‹¬çš„listä¸­ã€‚</li></ol></li><li><p>å­—ç¬¦ä¸²é›†åˆ(set)</p><p> redisçš„é›†åˆï¼Œæ˜¯ä¸€ç§æ— åºçš„é›†åˆï¼Œé›†åˆä¸­çš„å…ƒç´ æ²¡æœ‰å…ˆåé¡ºåºï¼Œé›†åˆä¸­æ²¡æœ‰é‡å¤å…ƒç´ ã€‚</p><p> é›†åˆç›¸å…³çš„æ“ä½œä¹Ÿå¾ˆä¸°å¯Œï¼Œå¦‚æ·»åŠ æ–°å…ƒç´ (sadd)ã€åˆ é™¤å·²æœ‰å…ƒç´ (srem)ã€å–äº¤é›†(sinter)ã€å–å¹¶é›†(sunion)ã€å–å·®é›†(sdiff)ã€è¿”å›é›†åˆå¤§å°(scard)ç­‰ã€‚</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å‘é›†åˆmysetä¸­åŠ å…¥ä¸€ä¸ªæ–°å…ƒç´ "one"ï¼Œè¿”å›1å­˜å‚¨æˆåŠŸï¼Œè¿”å›0è¡¨ç¤ºå…ƒç´ å·²å­˜åœ¨ä¸èƒ½å†å­˜å‚¨</span></span><br><span class="line">127.0.0.1:6379&gt; sadd myset <span class="string">"one"</span>  </span><br><span class="line">(<span class="built_in">integer</span>) 1 </span><br><span class="line">127.0.0.1:6379&gt; sadd myset <span class="string">"two"</span> </span><br><span class="line">(<span class="built_in">integer</span>) 1 </span><br><span class="line">127.0.0.1:6379&gt; sadd myset <span class="string">"two"</span> </span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line"><span class="comment">#åˆ—å‡ºé›†åˆmysetä¸­çš„æ‰€æœ‰å…ƒç´  </span></span><br><span class="line">127.0.0.1:6379&gt; smembers myset  </span><br><span class="line">1) <span class="string">"one"</span> </span><br><span class="line">2) <span class="string">"two"</span> </span><br><span class="line"><span class="comment">#åˆ¤æ–­å…ƒç´ 'one'æ˜¯å¦åœ¨é›†åˆmysetä¸­ï¼Œè¿”å›1è¡¨ç¤ºå­˜åœ¨ </span></span><br><span class="line">127.0.0.1:6379&gt; sismember myset <span class="string">"one"</span>  </span><br><span class="line">(<span class="built_in">integer</span>) 1 </span><br><span class="line"><span class="comment">#åˆ¤æ–­å…ƒç´ 'three'æ˜¯å¦åœ¨é›†åˆmysetä¸­ï¼Œè¿”å›0è¡¨ç¤ºä¸å­˜åœ¨ </span></span><br><span class="line">127.0.0.1:6379&gt; sismember myset <span class="string">"three"</span>  </span><br><span class="line">(<span class="built_in">integer</span>) 0 </span><br><span class="line"><span class="comment">#æ–°å»ºä¸€ä¸ªæ–°çš„é›†åˆyourset </span></span><br><span class="line">127.0.0.1:6379&gt; sadd yourset <span class="string">"1"</span>  </span><br><span class="line">(<span class="built_in">integer</span>) 1 </span><br><span class="line">127.0.0.1:6379&gt; sadd yourset <span class="string">"2"</span> </span><br><span class="line">(<span class="built_in">integer</span>) 1 </span><br><span class="line">127.0.0.1:6379&gt; smembers yourset </span><br><span class="line">1) <span class="string">"1"</span> </span><br><span class="line">2) <span class="string">"2"</span> </span><br><span class="line"><span class="comment">#å¯¹ä¸¤ä¸ªé›†åˆæ±‚å¹¶é›† </span></span><br><span class="line">127.0.0.1:6379&gt; sunion myset yourset  </span><br><span class="line">1) <span class="string">"1"</span> </span><br><span class="line">2) <span class="string">"one"</span> </span><br><span class="line">3) <span class="string">"2"</span> </span><br><span class="line">4) <span class="string">"two"</span> </span><br><span class="line"><span class="comment">#æ±‚é›†åˆå¤§å°</span></span><br><span class="line">127.0.0.1:6379&gt; scard yourset</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br></pre></td></tr></table></figure><p> å¸¸è§çš„æŠ•ç¥¨åŠŸèƒ½å¯ä»¥ä½¿ç”¨é›†åˆæ¥å®ç°ï¼Œæ¯”å¦‚æœ‰ä¸ªæŠ•ç¥¨åŠŸèƒ½ï¼Œæ¯ä¸ªç”¨æˆ·åªèƒ½æŠ•ä¸€æ¬¡ï¼Œå°†æŠ•è¿‡ç¥¨çš„ç”¨æˆ·çš„idå­˜åœ¨é›†åˆé‡Œï¼Œè·å–é›†åˆçš„å¤§å°å¯ä»¥è·å–æŠ•ç¥¨æ•°ã€‚</p></li><li><p>æœ‰åºå­—ç¬¦ä¸²é›†åˆ(sorted set)</p><p> redisä½“è´´åœ°æä¾›äº†æœ‰åºé›†åˆï¼Œå…¶ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å…³è”ä¸€ä¸ªåºå·(score)ï¼Œè¿™æ˜¯æ’åºçš„ä¾æ®ã€‚</p><p> é€šå¸¸ï¼Œæˆ‘ä»¬å°†æœ‰åºé›†åˆå«åšzsetï¼Œæ˜¯å› ä¸ºåœ¨redisä¸­ï¼Œæœ‰åºé›†åˆç›¸å…³çš„æ“ä½œæŒ‡ä»¤éƒ½æ˜¯ä»¥zå¼€å¤´çš„ï¼Œå¦‚zrangeã€zaddã€zrevrangeã€zrangebyscoreç­‰ã€‚</p><p> è¯ä¸å¤šè¯´ï¼Œçœ‹æ —å­å§ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å‘myzsetä¸­æ–°å¢ä¸€ä¸ªå…ƒç´ 'java'ï¼Œèµ‹äºˆåºå·1</span></span><br><span class="line">127.0.0.1:6379&gt; zadd myzset 1 java</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"><span class="comment">#å‘myzsetä¸­æ–°å¢ä¸€ä¸ªå…ƒç´ 'python'ï¼Œèµ‹äºˆåºå·3</span></span><br><span class="line">127.0.0.1:6379&gt; zadd myzset 3 python</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"><span class="comment">#å‘myzsetä¸­æ–°å¢ä¸€ä¸ªå…ƒç´ 'php'ï¼Œèµ‹äºˆåºå·2</span></span><br><span class="line">127.0.0.1:6379&gt; zadd myzset 2 php</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"><span class="comment">#åˆ—å‡ºmyzsetçš„æ‰€æœ‰å…ƒç´ ï¼ŒåŒæ—¶åˆ—å‡ºå…¶åºå·ï¼Œå¯ä»¥çœ‹å‡ºmyzsetæ˜¯æœ‰åºçš„ã€‚ </span></span><br><span class="line">127.0.0.1:6379&gt; zrange myzset 0 -1 withscores</span><br><span class="line">1) <span class="string">"java"</span></span><br><span class="line">2) <span class="string">"1"</span></span><br><span class="line">3) <span class="string">"php"</span></span><br><span class="line">4) <span class="string">"2"</span></span><br><span class="line">5) <span class="string">"python"</span></span><br><span class="line">6) <span class="string">"3"</span></span><br><span class="line"><span class="comment">#åªåˆ—å‡ºmyzsetçš„å…ƒç´  </span></span><br><span class="line">127.0.0.1:6379&gt; zrange myzset 0 -1</span><br><span class="line">1) <span class="string">"java"</span></span><br><span class="line">2) <span class="string">"php"</span></span><br><span class="line">3) <span class="string">"python"</span></span><br></pre></td></tr></table></figure><p> è¯´ä¸ªä½¿ç”¨åœºæ™¯å§ã€‚æ¯”å¦‚ä½ çš„åšå®¢æ–‡ç« ï¼Œä»¥å‘å¸ƒæ—¶çš„æ—¶é—´æˆ³ä¸ºscoreï¼Œä»¥æ–‡ç« idä¸ºå€¼å­˜å…¥zsetä¸­ï¼Œå°±å¯ä»¥æŒ‰æ—¶é—´é¡ºåºè¿›è¡Œæ­£åºæˆ–å€’åº(zrevrange)çš„æ’åˆ—äº†ï¼Œè¿˜å¯ä»¥è·å–æŒ‡å®šæ—¶é—´åŒºé—´çš„åšå®¢æ–‡ç« (ä½¿ç”¨zrangebyscore)ã€‚</p></li><li><p>å“ˆå¸Œ(hash)</p><p> hashå­˜çš„æ˜¯å­—ç¬¦ä¸²å’Œå­—ç¬¦ä¸²å€¼ä¹‹é—´çš„æ˜ å°„ï¼Œæ¯”å¦‚ä¸€ä¸ªç”¨æˆ·è¦å­˜å‚¨å…¶å…¨åã€å§“æ°ã€å¹´é¾„ç­‰ï¼Œå°±ç‰¹åˆ«é€‚åˆä½¿ç”¨å“ˆå¸Œã€‚ä¸¾ä¸ªæ —å­ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å»ºç«‹hashï¼Œå¹¶èµ‹å€¼</span></span><br><span class="line">127.0.0.1:6379&gt; hmset user:001 username iwhynot password memeda age 25</span><br><span class="line">OK</span><br><span class="line"><span class="comment">#åˆ—å‡ºhashçš„å†…å®¹</span></span><br><span class="line">127.0.0.1:6379&gt; hgetall user:001</span><br><span class="line">1) <span class="string">"username"</span></span><br><span class="line">2) <span class="string">"iwhynot"</span></span><br><span class="line">3) <span class="string">"password"</span></span><br><span class="line">4) <span class="string">"memeda"</span></span><br><span class="line">5) <span class="string">"age"</span></span><br><span class="line">6) <span class="string">"25"</span></span><br><span class="line"><span class="comment">#æ›´æ”¹hashçš„æŸä¸€ä¸ªå€¼</span></span><br><span class="line">127.0.0.1:6379&gt; hset user:001 password 12345</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line"><span class="comment">#å†æ¬¡åˆ—å‡ºhashçš„å†…å®¹</span></span><br><span class="line">127.0.0.1:6379&gt; hgetall user:001</span><br><span class="line">1) <span class="string">"username"</span></span><br><span class="line">2) <span class="string">"iwhynot"</span></span><br><span class="line">3) <span class="string">"password"</span></span><br><span class="line">4) <span class="string">"12345"</span></span><br><span class="line">5) <span class="string">"age"</span></span><br><span class="line">6) <span class="string">"25"</span></span><br><span class="line"><span class="comment">#è·å–hashçš„æŸä¸€ä¸ªé”®çš„å€¼</span></span><br><span class="line">127.0.0.1:6379&gt; hget user:001 password</span><br><span class="line"><span class="string">"12345"</span></span><br></pre></td></tr></table></figure></li></ol><p>å¦å¤–ï¼Œè¯´ä¸€ä¸‹ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ï¼š</p><ul><li><code>TYPE key</code> â€” ç”¨æ¥è·å–æŸkeyçš„ç±»å‹</li><li><code>KEYS pattern</code> â€” åŒ¹é…æ‰€æœ‰ç¬¦åˆæ¨¡å¼çš„keyï¼Œæ¯”å¦‚KEYS * å°±åˆ—å‡ºæ‰€æœ‰çš„keyäº†ï¼Œå½“ç„¶ï¼Œå¤æ‚åº¦O(n)</li><li><code>RANDOMKEY</code> - è¿”å›éšæœºçš„ä¸€ä¸ªkey</li><li><code>RENAME oldkey newkey</code> â€” keyä¹Ÿå¯ä»¥æ”¹å</li></ul><p>åˆ—è¡¨æ“ä½œï¼Œç²¾å</p><ul><li><code>RPUSH key string</code> â€” å°†æŸä¸ªå€¼åŠ å…¥åˆ°ä¸€ä¸ªkeyåˆ—è¡¨æœ«å°¾</li><li><code>LPUSH key string</code> â€” å°†æŸä¸ªå€¼åŠ å…¥åˆ°ä¸€ä¸ªkeyåˆ—è¡¨å¤´éƒ¨</li><li><code>LLEN key</code> â€” åˆ—è¡¨é•¿åº¦</li><li><code>LRANGE key start end</code> â€” è¿”å›åˆ—è¡¨ä¸­æŸä¸ªèŒƒå›´çš„å€¼ï¼Œç›¸å½“äºmysqlé‡Œé¢çš„åˆ†é¡µæŸ¥è¯¢é‚£æ ·</li><li><code>LTRIM key start end</code> â€” åªä¿ç•™åˆ—è¡¨ä¸­æŸä¸ªèŒƒå›´çš„å€¼</li><li><code>LINDEX key index</code> â€” è·å–åˆ—è¡¨ä¸­ç‰¹å®šç´¢å¼•å·çš„å€¼ï¼Œè¦æ³¨æ„æ˜¯O(n)å¤æ‚åº¦</li><li><code>LSET key index value</code> â€” è®¾ç½®åˆ—è¡¨ä¸­æŸä¸ªä½ç½®çš„å€¼</li><li><code>LPOP key</code></li><li><code>RPOP key</code> â€” å’Œä¸Šé¢çš„LPOPä¸€æ ·ï¼Œå°±æ˜¯ç±»ä¼¼æ ˆæˆ–é˜Ÿåˆ—çš„é‚£ç§å–å¤´å–å°¾æŒ‡ä»¤ï¼Œå¯ä»¥å½“æˆæ¶ˆæ¯é˜Ÿåˆ—æ¥ä½¿ç”¨äº†</li></ul><p>é›†åˆæ“ä½œ</p><ul><li><code>SADD key member</code> â€” å¢åŠ å…ƒç´ </li><li><code>SREM key member</code> â€” åˆ é™¤å…ƒç´ </li><li><code>SCARD key</code> â€” è¿”å›é›†åˆå¤§å°</li><li><code>SISMEMBER key member</code> â€” åˆ¤æ–­æŸä¸ªå€¼æ˜¯å¦åœ¨é›†åˆä¸­</li><li><code>SINTER key1 key2 ... keyN</code> â€” è·å–å¤šä¸ªé›†åˆçš„äº¤é›†å…ƒç´ </li><li><code>SMEMBERS key</code> â€” åˆ—å‡ºé›†åˆçš„æ‰€æœ‰å…ƒç´ </li></ul><p>è¯¦å°½çš„æŒ‡ä»¤ä»‹ç»å¯ä»¥åœ¨è¿™é‡Œå°½æƒ…æŸ¥çœ‹ã€‚<a href="http://redis.io/commands" target="_blank" rel="noopener">http://redis.io/commands</a>ã€‚</p><h3 id="redisé…ç½®"><a href="#redisé…ç½®" class="headerlink" title="redisé…ç½®"></a>redisé…ç½®</h3><p>å½“ç„¶ï¼Œé…ç½®æ˜¯ä¸€ä¸ªå¾ˆæ ¸å¿ƒçš„éƒ¨åˆ†ã€‚ç„¶è€Œï¼Œæˆ‘å¹¶ä¸æƒ³å¤šè¯´ã€‚</p><p>é»˜è®¤å®‰è£…çš„redis.confé…ç½®æ–‡ä»¶ï¼Œé‡Œé¢çš„è‹±æ–‡æ³¨é‡Šå·²ç»éå¸¸è¯¦ç»†äº†ï¼Œå°±ä¸éœ€è¦æˆ‘ç¿»è¯‘äº†ï¼ˆå…¶å®æ˜¯æˆ‘è‹±æ–‡ä¸å¥½ï¼‰ã€‚</p><h3 id="redisåœ¨nodejsä¸­çš„ä½¿ç”¨"><a href="#redisåœ¨nodejsä¸­çš„ä½¿ç”¨" class="headerlink" title="redisåœ¨nodejsä¸­çš„ä½¿ç”¨"></a>redisåœ¨nodejsä¸­çš„ä½¿ç”¨</h3><p>å®‰è£…node_redisæ¨¡å—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install redis</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> redis = <span class="built_in">require</span>(<span class="string">"redis"</span>),</span><br><span class="line">    client = redis.createClient();</span><br><span class="line"></span><br><span class="line">client.on(<span class="string">"error"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Error "</span> + err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">client.set(<span class="string">"string key"</span>, <span class="string">"string val"</span>, redis.print);</span><br><span class="line">client.hset(<span class="string">"hash key"</span>, <span class="string">"hashtest 1"</span>, <span class="string">"some value"</span>, redis.print);</span><br><span class="line">client.hset([<span class="string">"hash key"</span>, <span class="string">"hashtest 2"</span>, <span class="string">"some other value"</span>], redis.print);</span><br><span class="line">client.hkeys(<span class="string">"hash key"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, replies</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(replies.length + <span class="string">" replies:"</span>);</span><br><span class="line">    replies.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">reply, i</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"    "</span> + i + <span class="string">": "</span> + reply);</span><br><span class="line">    &#125;);</span><br><span class="line">    client.quit();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ›´å¤šé£éªšçš„ç”¨æ³•ï¼ŒæŸ¥çœ‹è¿™é‡Œå§<a href="https://github.com/NodeRedis/node_redis" target="_blank" rel="noopener">https://github.com/NodeRedis/node_redis</a>ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Redis æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„key-valueæ•°æ®åº“ã€‚æ—¢å¯å†…å­˜å­˜å‚¨åˆå¯æŒä¹…åŒ–ï¼Œç€å®ç‰›é€¼ã€‚å®ƒæä¾›äº”ç§æ•°æ®ç±»å‹ï¼šstring, hash, list, setåŠzset(sorted set)ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®‰è£…&quot;&gt;&lt;a href=&quot;#å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…&quot;&gt;&lt;/a&gt;å®‰è£…&lt;/h3&gt;&lt;p&gt;å¥½çƒ¦ï¼Œæ¯æ¬¡å­¦ä¹ ä¸€é¡¹æ–°å·¥å…·ï¼Œæ€»è¦å…ˆæ£è…¾å¥½ä¸€é˜µå­å®‰è£…å’Œé…ç½®ã€‚å…¶å®æˆ‘å·²ç»è¿«ä¸åŠå¾…åœ°æƒ³è¦ä¸€çª¥å…¶é£éªšçš„èµ°ä½å’Œæ“ä½œäº†ã€‚å¯æ˜¯ç¨å®‰å‹¿èºï¼Œè¯¥åšçš„è¿˜æ˜¯ä¸€æ­¥éƒ½ä¸èƒ½çœå“ªï¼&lt;/p&gt;
    
    </summary>
    
      <category term="webæŠ€æœ¯" scheme="https://vhtml.github.io/categories/web%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="redis" scheme="https://vhtml.github.io/tags/redis/"/>
    
      <category term="æ•°æ®åº“" scheme="https://vhtml.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>å­¦å†™åšå®¢å…ˆå­¦markdown</title>
    <link href="https://vhtml.github.io/2016/01/06/markdown/"/>
    <id>https://vhtml.github.io/2016/01/06/markdown/</id>
    <published>2016-01-06T08:05:55.000Z</published>
    <updated>2018-07-09T07:26:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>Nowï¼Œå¼€å§‹å§ã€‚ã€‚ã€‚</p><h2 id="åŒºå—å…ƒç´ "><a href="#åŒºå—å…ƒç´ " class="headerlink" title="åŒºå—å…ƒç´ "></a>åŒºå—å…ƒç´ </h2><h4 id="æ®µè½ä¸æ¢è¡Œ"><a href="#æ®µè½ä¸æ¢è¡Œ" class="headerlink" title="æ®µè½ä¸æ¢è¡Œ"></a>æ®µè½ä¸æ¢è¡Œ</h4><p>ä¸€ä¸ª Markdown æ®µè½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„æ–‡æœ¬è¡Œç»„æˆï¼Œå®ƒçš„å‰åè¦æœ‰ä¸€ä¸ªä»¥ä¸Šçš„ç©ºè¡Œï¼ˆç©ºè¡Œçš„å®šä¹‰æ˜¯æ˜¾ç¤ºä¸Šçœ‹èµ·æ¥åƒæ˜¯ç©ºçš„ï¼Œä¾¿ä¼šè¢«è§†ä¸ºç©ºè¡Œã€‚æ¯”æ–¹è¯´ï¼Œè‹¥æŸä¸€è¡ŒåªåŒ…å«ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼Œåˆ™è¯¥è¡Œä¹Ÿä¼šè¢«è§†ä¸ºç©ºè¡Œï¼‰ã€‚æ™®é€šæ®µè½ä¸è¯¥ç”¨ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦æ¥ç¼©è¿›ã€‚</p><a id="more"></a><p>å¦‚ï¼š</p><pre><code>è¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚</code></pre><p>é•¿è¿™æ ·ï¼š</p><p>è¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚</p><h4 id="æ ‡é¢˜"><a href="#æ ‡é¢˜" class="headerlink" title="æ ‡é¢˜"></a>æ ‡é¢˜</h4><p>Markdown æ”¯æŒä¸¤ç§æ ‡é¢˜çš„è¯­æ³•ï¼Œç±» Setext å’Œç±» atx å½¢å¼ã€‚è¿™é‡Œåªè®²ç±»atxå½¢å¼ã€‚</p><p>ç±» Atx å½¢å¼åˆ™æ˜¯åœ¨è¡Œé¦–æ’å…¥ 1 åˆ° 6 ä¸ª # ï¼Œå¯¹åº”åˆ°æ ‡é¢˜ 1 åˆ° 6 é˜¶ï¼Œ#åè·Ÿçš„æ–‡å­—ä¹‹é—´æœ€å¥½æœ‰ä¸€ä¸ªä»¥ä¸Šçš„ç©ºæ ¼ï¼ˆæœ‰çš„markdownè§£æç¨‹åºä¸è§£ææ— ç©ºæ ¼çš„ï¼‰ï¼Œä¾‹å¦‚ï¼š</p><pre><code># h1## h2### h3#### h4##### h5###### h6</code></pre><p>é•¿è¿™æ ·ï¼š</p><h1 id="h1"><a href="#h1" class="headerlink" title="h1"></a>h1</h1><h2 id="h2"><a href="#h2" class="headerlink" title="h2"></a>h2</h2><h3 id="h3"><a href="#h3" class="headerlink" title="h3"></a>h3</h3><h4 id="h4"><a href="#h4" class="headerlink" title="h4"></a>h4</h4><h5 id="h5"><a href="#h5" class="headerlink" title="h5"></a>h5</h5><h6 id="h6"><a href="#h6" class="headerlink" title="h6"></a>h6</h6><h4 id="åŒºå—å¼•ç”¨Blockquotes"><a href="#åŒºå—å¼•ç”¨Blockquotes" class="headerlink" title="åŒºå—å¼•ç”¨Blockquotes"></a>åŒºå—å¼•ç”¨Blockquotes</h4><p>Markdown æ ‡è®°åŒºå—å¼•ç”¨æ˜¯ä½¿ç”¨ç±»ä¼¼ email ä¸­ç”¨ <code>&gt;</code> çš„å¼•ç”¨æ–¹å¼ã€‚å³åœ¨æ¯è¡Œçš„æœ€å‰é¢åŠ ä¸Š <code>&gt;</code>ï¼Œæˆ–è€…åœ¨æ•´ä¸ªæ®µè½çš„ç¬¬ä¸€è¡Œæœ€å‰é¢åŠ ã€‚å¦‚ï¼š</p><pre><code>&gt; è¿™æ˜¯ä¸€è¡Œå¼•ç”¨&gt; è¿™æ˜¯å¦ä¸€è¡Œå¼•ç”¨&gt;è¿™æ˜¯ä¸€æ®µå¼•ç”¨ã€‚æ˜¯å•Šæ˜¯å•Šã€‚</code></pre><p>é•¿è¿™æ ·ï¼š</p><blockquote><p>è¿™æ˜¯ä¸€è¡Œå¼•ç”¨</p><p>è¿™æ˜¯å¦ä¸€è¡Œå¼•ç”¨</p></blockquote><blockquote><p>è¿™æ˜¯ä¸€æ®µå¼•ç”¨ã€‚<br>æ˜¯å•Šæ˜¯å•Šã€‚</p></blockquote><p>åŒºå—å¼•ç”¨å¯ä»¥åµŒå¥—ï¼ˆä¾‹å¦‚ï¼šå¼•ç”¨å†…çš„å¼•ç”¨ï¼‰ï¼Œåªè¦æ ¹æ®å±‚æ¬¡åŠ ä¸Šä¸åŒæ•°é‡çš„ <code>&gt;</code>ï¼Œå¦‚ï¼š</p><pre><code>&gt; è¿™æ˜¯ç¬¬ä¸€çº§å¼•ç”¨ã€‚&gt;&gt; è¿™æ˜¯ç¬¬äºŒçº§å¼•ç”¨ã€‚</code></pre><p>é•¿è¿™æ ·ï¼š</p><blockquote><p>è¿™æ˜¯ç¬¬ä¸€çº§å¼•ç”¨ã€‚</p><blockquote><p>è¿™æ˜¯ç¬¬äºŒçº§å¼•ç”¨ã€‚</p></blockquote></blockquote><h4 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h4><p>æ— åºåˆ—è¡¨ä½¿ç”¨æ˜Ÿå·ã€åŠ å·æˆ–æ˜¯å‡å·ä½œä¸ºåˆ—è¡¨æ ‡è®°ï¼Œå¦‚ï¼š</p><pre><code>* red* green* blue---+ red+ green+ blue---- red- green- blue</code></pre><p>é•¿è¿™æ ·ï¼š</p><ul><li>red</li><li>green</li><li>blue</li></ul><hr><ul><li>red</li><li>green</li><li>blue</li></ul><hr><ul><li>red</li><li>green</li><li>blue</li></ul><p>æœ‰åºåˆ—è¡¨ä½¿ç”¨æ•°å­—æ¥ç€ä¸€ä¸ªè‹±æ–‡å¥ç‚¹ï¼Œæ•°å­—å¯ä»¥æ— åºï¼Œä¸ºä»»æ„æ•°å­—ï¼Œå¦‚ï¼š</p><pre><code>5. red2. green3. blue</code></pre><p>é•¿è¿™æ ·ï¼š</p><ol start="5"><li>red</li><li>green</li><li>blue</li></ol><p>åˆ—è¡¨é¡¹ç›®å¯ä»¥åŒ…å«å¤šä¸ªæ®µè½ï¼Œæ¯ä¸ªé¡¹ç›®ä¸‹çš„æ®µè½éƒ½å¿…é¡»ç¼©è¿›4ä¸ªç©ºæ ¼æˆ–æ˜¯1ä¸ªåˆ¶è¡¨ç¬¦ï¼Œå¦‚ï¼š</p><pre><code>1.  this is a list item    haha    xixi2.  yes, it is.    hehe</code></pre><p>é•¿è¿™æ ·ï¼š</p><ol><li><p>this is a list item</p><p>haha</p><p>xixi</p></li><li><p>yes, it is.</p><p>hehe</p></li></ol><p>å¦‚æœè¦åœ¨åˆ—è¡¨é¡¹ç›®å†…æ”¾è¿›å¼•ç”¨ï¼Œé‚£<code>&gt;</code>å°±éœ€è¦ç¼©è¿›ï¼Œå¦‚ï¼š</p><pre><code>* ä¸€ä¸ªå¸¦å¼•ç”¨çš„åˆ—è¡¨ï¼š    &gt; è¿™æ˜¯ä¸€ä¸ªåœ¨åˆ—è¡¨é‡Œçš„å¼•ç”¨</code></pre><p>é•¿è¿™æ ·ï¼š</p><ul><li><p>ä¸€ä¸ªå¸¦å¼•ç”¨çš„åˆ—è¡¨ï¼š</p><blockquote><p>è¿™æ˜¯ä¸€ä¸ªåœ¨åˆ—è¡¨é‡Œçš„å¼•ç”¨</p></blockquote></li></ul><p>å¦‚æœè¦æ”¾ä»£ç åŒºå—çš„è¯ï¼Œè¯¥åŒºå—å°±éœ€è¦ç¼©è¿›ä¸¤æ¬¡ï¼Œä¹Ÿå°±æ˜¯8ä¸ªç©ºæ ¼æˆ–æ˜¯2ä¸ªåˆ¶è¡¨ç¬¦ï¼Œå¦‚ï¼š</p><pre><code>* çœ‹ä»£ç         function test(){                alert(&apos;test&apos;);        }</code></pre><p>é•¿è¿™æ ·ï¼š</p><ul><li><p>çœ‹ä»£ç </p><pre><code>function test(){    alert(&apos;test&apos;);}</code></pre></li></ul><p>æœ‰æ—¶é‡åˆ°è¿™æ ·çš„å†™æ³•ï¼š</p><pre><code>1990. æˆ‘çš„å‡ºç”Ÿå¹´</code></pre><p>ä¼šå˜æˆè¿™æ ·ï¼š</p><ol start="1990"><li>æˆ‘çš„å‡ºç”Ÿå¹´</li></ol><p>ä¹Ÿå°±æ˜¯åœ¨è¡Œé¦–å‡ºç°æ•°å­—-å¥ç‚¹-ç©ºç™½ï¼Œåˆä¸æƒ³è¢«markdownè§£æï¼Œè¦é¿å…è¿™æ ·çš„çŠ¶å†µï¼Œå¯ä»¥åœ¨å¥ç‚¹å‰é¢åŠ ä¸Šåæ–œæ ã€‚</p><pre><code>1990\. æˆ‘çš„å‡ºç”Ÿå¹´</code></pre><p>ç„¶åé•¿è¿™æ ·ï¼š</p><p>1990. æˆ‘çš„å‡ºç”Ÿå¹´</p><p><br><br>okï¼Œç»ˆäºèŠåˆ°é‡ç‚¹å•¦ï¼š</p><h4 id="ä»£ç åŒºå—"><a href="#ä»£ç åŒºå—" class="headerlink" title="ä»£ç åŒºå—"></a>ä»£ç åŒºå—</h4><p>å’Œç¨‹åºç›¸å…³çš„å†™ä½œæˆ–æ˜¯æ ‡ç­¾è¯­è¨€åŸå§‹ç é€šå¸¸ä¼šæœ‰å·²ç»æ’ç‰ˆå¥½çš„ä»£ç åŒºå—ï¼Œé€šå¸¸è¿™äº›åŒºå—æˆ‘ä»¬å¹¶ä¸å¸Œæœ›å®ƒä»¥ä¸€èˆ¬æ®µè½æ–‡ä»¶çš„æ–¹å¼å»æ’ç‰ˆï¼Œè€Œæ˜¯ç…§åŸæ¥çš„æ ·å­æ˜¾ç¤ºï¼ŒMarkdownä¼šç”¨<code>&lt;pre&gt;</code>å’Œ<code>&lt;code&gt;</code>æ ‡ç­¾æŠŠä»£ç åŒºå—åŒ…èµ·æ¥ã€‚</p><p>è¦åœ¨markdownä¸­å»ºç«‹åŒºå—ä»£ç å¾ˆç®€å•ï¼Œåªè¦ç®€å•åœ°ç¼©è¿›4ä¸ªç©ºæ ¼æˆ–æ˜¯1ä¸ªåˆ¶è¡¨ç¬¦å°±å¯ä»¥ï¼Œå¦‚ï¼š</p><pre><code>è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ®µè½ã€‚    alert(&quot;è¿™æ˜¯ä¸€æ®µä»£ç &quot;)</code></pre><p>é•¿è¿™æ ·ï¼š</p><p>è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ®µè½ã€‚</p><pre><code>alert(&quot;è¿™æ˜¯ä¸€æ®µä»£ç &quot;)</code></pre><p>å†å¦‚ï¼š</p><pre><code>function say(){    console.log(&apos;hello markdown&apos;);}</code></pre><p>ä¸€ä¸ªä»£ç åŒºå—ä¼šä¸€ç›´æŒç»­åˆ°æ²¡æœ‰ç¼©è¿›çš„é‚£ä¸€è¡Œï¼ˆæˆ–æ˜¯æ–‡ä»¶ç»“å°¾ï¼‰ã€‚</p><p>åœ¨ä»£ç åŒºå—é‡Œï¼Œç‰¹æ®Šæ ‡è®°ä¼šå®ä¾‹åŒ–æˆHTMLå®ä½“ï¼š</p><pre><code>&lt;div class=&quot;head&quot;&gt;    header&lt;/div&gt;</code></pre><p>è¿™æ ·ï¼Œhtmlä»£ç å°±å¯ä»¥ä»¥ä½ æœŸæœ›çš„æ–¹å¼åŸæ ·è¾“å‡ºäº†ã€‚</p><p>åœ¨ä»£ç åŒºå—ä¸­ï¼Œä¸€èˆ¬çš„markdownè¯­æ³•ä¹Ÿä¸ä¼šè¢«è½¬æ¢ï¼Œè¿™æ ·å°±å¯ä»¥æ–¹ä¾¿çš„ä»¥markdownè¯­æ³•æ’°å†™markdownè¯­æ³•ç›¸å…³çš„æ–‡ä»¶ã€‚</p><h4 id="åˆ†å‰²çº¿"><a href="#åˆ†å‰²çº¿" class="headerlink" title="åˆ†å‰²çº¿"></a>åˆ†å‰²çº¿</h4><p>ä½ å¯ä»¥åœ¨ä¸€è¡Œä¸­ç”¨ä¸‰ä¸ªä»¥ä¸Šçš„æ˜Ÿå·ã€å‡å·ã€åº•çº¿æ¥å»ºç«‹ä¸€ä¸ªåˆ†å‰²çº¿ï¼Œè¡Œå†…ä¸èƒ½æœ‰å…¶ä»–ä¸œè¥¿ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨æ˜Ÿå·æˆ–æ˜¯å‡å·ä¸­é—´æ’å…¥ç©ºæ ¼ã€‚å¦‚ï¼š</p><pre><code>---**********___--------------------</code></pre><p>ä¾¿ä¼šç”Ÿæˆï¼š</p><hr><hr><hr><hr><hr><h2 id="åŒºæ®µå…ƒç´ "><a href="#åŒºæ®µå…ƒç´ " class="headerlink" title="åŒºæ®µå…ƒç´ "></a>åŒºæ®µå…ƒç´ </h2><h4 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h4><p>markdownæ”¯æŒä¸¤ç§å½¢å¼çš„é“¾æ¥è¯­æ³•ï¼š è¡Œå†…å¼å’Œå‚è€ƒå¼ä¸¤ç§å½¢å¼ã€‚</p><p>ä¸ç®¡æ˜¯å“ªä¸€ç§ï¼Œé“¾æ¥æ–‡å­—éƒ½æ˜¯ç”¨[æ–¹æ‹¬å·]æ¥æ ‡è®°ã€‚</p><p>è¦å»ºç«‹ä¸€ä¸ª<strong>è¡Œå†…å¼</strong>çš„é“¾æ¥ï¼Œåªè¦åœ¨æ–¹æ‹¬å·åé¢ç´§è·Ÿç€åœ†æ‹¬å·å¹¶æ’å…¥ç½‘å€é“¾æ¥å³å¯ï¼Œå¦‚æœä½ è¿˜æƒ³è¦åŠ ä¸Šé“¾æ¥çš„titleæ–‡å­—ï¼Œåªè¦åœ¨ç½‘å€åé¢ï¼Œç”¨åŒå¼•å·æŠŠtitleæ–‡å­—åŒ…èµ·æ¥å³å¯ï¼Œå¦‚ï¼š</p><pre><code>è¿™æ˜¯ä¸€ä¸ª[ç¤ºä¾‹](http://www.iwhynot.me/ &quot;title&quot;)è¡Œå†…å¼é“¾æ¥.[è¿™ä¸ªé“¾æ¥](http://www.iwhynot.me/)æ²¡æœ‰æ ‡é¢˜</code></pre><p>é•¿è¿™æ ·ï¼š</p><p>è¿™æ˜¯ä¸€ä¸ª<a href="http://www.iwhynot.me/" title="title" target="_blank" rel="noopener">ç¤ºä¾‹</a>è¡Œå†…å¼é“¾æ¥.</p><p><a href="http://www.iwhynot.me/" target="_blank" rel="noopener">è¿™ä¸ªé“¾æ¥</a>æ²¡æœ‰æ ‡é¢˜</p><p><strong>å‚è€ƒå¼</strong>çš„é“¾æ¥æ˜¯åœ¨é“¾æ¥æ–‡å­—çš„æ‹¬å·åé¢å†æ¥ä¸Šå¦ä¸€ä¸ªæ–¹æ‹¬å·ï¼Œè€Œåœ¨ç¬¬äºŒä¸ªæ–¹æ‹¬å·é‡Œé¢è¦å¡«å…¥ç”¨ä»¥è¾¨è¯†é“¾æ¥çš„æ ‡è®°ï¼Œä¹‹åå†å®šä¹‰æ ‡è®°é“¾æ¥ï¼š</p><p>é“¾æ¥å†…å®¹å®šä¹‰å½¢å¼ä¸ºï¼š</p><ul><li>æ–¹æ‹¬å·ï¼Œé‡Œé¢è¾“å…¥é“¾æ¥æ–‡å­—</li><li>æ¥ç€ä¸€ä¸ªå†’å·</li><li>æ¥ç€ä¸€ä¸ªä»¥ä¸Šçš„ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦</li><li>æ¥ç€é“¾æ¥çš„ç½‘å€</li><li>é€‰æ‹©æ€§åœ°æ¥ç€titleå†…å®¹ï¼Œå¯ä»¥ç”¨å•å¼•å·ã€åŒå¼•å·æˆ–æ˜¯æ‹¬å¼§åŒ…ç€</li></ul><p>ä¸¾ä¸ªæ —å­ï¼š</p><pre><code>ä¸Šç½‘æœç´¢ç”¨[Google][1]ï¼Œè¿˜æ˜¯ç”¨[ç™¾åº¦][2]å‘¢ï¼Ÿ[1]: http://google.com/ &quot;Google&quot;[2]: http://baidu.com/ &quot;ç™¾åº¦&quot;</code></pre><p>ç”Ÿæˆï¼š</p><p>ä¸Šç½‘æœç´¢ç”¨<a href="http://google.com/" title="Google" target="_blank" rel="noopener">Google</a>ï¼Œè¿˜æ˜¯ç”¨<a href="http://baidu.com/" title="ç™¾åº¦" target="_blank" rel="noopener">ç™¾åº¦</a>å‘¢ï¼Ÿ</p><h4 id="å¼ºè°ƒ"><a href="#å¼ºè°ƒ" class="headerlink" title="å¼ºè°ƒ"></a>å¼ºè°ƒ</h4><p>markdownä½¿ç”¨æ˜Ÿå·(<em>)å’Œä¸‹åˆ’çº¿(_)ä½œä¸ºæ ‡è®°å¼ºè°ƒå­—è¯çš„ç¬¦å·ï¼Œè¢«`</em><code>æˆ–</code><em><code>åŒ…å›´çš„å­—è¯ä¼šè¢«è½¬æˆç”¨</code><em><code>æ ‡ç­¾åŒ…å›´ï¼Œç”¨ä¸¤ä¸ª</code>*<code>æˆ–</code></em><code>åŒ…èµ·æ¥çš„ï¼Œä¼šè¢«è½¬æˆ</code><strong>`ï¼Œå¦‚ï¼š</strong></em></p><pre><code>*å•æ˜Ÿå·åŒ…ä½*_å•ä¸‹åˆ’çº¿åŒ…ä½_**åŒæ˜Ÿå·åŒ…ä½**__åŒä¸‹åˆ’çº¿åŒ…ä½__</code></pre><p>ç”Ÿæˆï¼š</p><p><em>å•æ˜Ÿå·åŒ…ä½</em></p><p><em>å•ä¸‹åˆ’çº¿åŒ…ä½</em></p><p><strong>åŒæ˜Ÿå·åŒ…ä½</strong></p><p><strong>åŒä¸‹åˆ’çº¿åŒ…ä½</strong></p><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><p>å¦‚æœè¦æ ‡è®°ä¸€å°æ®µè¡Œå†…ä»£ç ï¼Œä½ å¯ä»¥ç”¨åå¼•å·æŠŠå®ƒåŒ…èµ·æ¥(<code>`</code>)ï¼Œå¦‚ï¼š</p><pre><code>`span`æ˜¯å†…è”å…ƒç´ </code></pre><p>ç”Ÿæˆï¼š</p><p><code>span</code>æ˜¯å†…è”å…ƒç´ </p><p>å¦‚æœè¦åœ¨ä»£ç åŒºæ®µå†…æ’å…¥åå¼•å·ï¼Œå¯ä»¥ç”¨å¤šä¸ªåå¼•å·æ¥å¼€å¯å’Œç»“æŸä»£ç åŒºæ®µï¼š</p><pre><code>``(`)``</code></pre><p>ç”Ÿæˆï¼š</p><p><code>(`)</code></p><p>ä»£ç åŒºæ®µçš„èµ·å§‹å’Œç»“æŸç«¯éƒ½å¯ä»¥æ”¾å…¥ä¸€ä¸ªç©ºç™½ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨åŒºæ®µçš„ä¸€å¼€å§‹å°±æ’å…¥åå¼•å·ï¼š</p><pre><code>`` ` ``</code></pre><p>ç”Ÿæˆï¼š</p><p><code>`</code></p><p>åœ¨ä»£ç åŒºæ®µé‡Œï¼Œ<code>&amp;</code>å’Œæ–¹æ‹¬å·ä¼šè¢«è‡ªåŠ¨è½¬æˆhtmlå®ä½“ï¼Œæ–¹ä¾¿æ’å…¥htmlåŸå§‹ç ï¼Œå¦‚ï¼š</p><pre><code>è¿™æ˜¯ä¸€ä¸ª`&lt;span&gt;`æ ‡ç­¾</code></pre><p>ç”Ÿæˆï¼š</p><p>è¿™æ˜¯ä¸€ä¸ª<code>&lt;span&gt;</code>æ ‡ç­¾</p><h4 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h4><p>è·Ÿé“¾æ¥ä¸€æ ·ï¼Œåˆ†ä¸º<u>è¡Œå†…å¼</u>å’Œ<u>å‚è€ƒå¼</u>ï¼š</p><p>è¡Œå†…å¼çš„çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>![Alt text](/path/to/img.jpg)![Alt text](/path/to/img.jpg &quot;optional title&quot;)</code></pre><p>è¯¦è¿°å¦‚ä¸‹ï¼š</p><blockquote><ul><li>ä¸€ä¸ªæƒŠå¹å·<code>!</code></li><li>æ¥ç€ä¸€ä¸ªæ–¹æ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„æ›¿ä»£æ–‡å­—</li><li>æ¥ç€ä¸€ä¸ªå°æ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„ç½‘å€ï¼Œæœ€åè¿˜å¯ä»¥ç”¨å¼•å·åŒ…ä½å¹¶åŠ ä¸Šé€‰æ‹©æ€§çš„â€™titleâ€™æ–‡å­—ã€‚</li></ul></blockquote><p>å‚è€ƒå¼çš„å›¾ç‰‡è¯­æ³•åƒè¿™æ ·ï¼š</p><pre><code>![Alt text][id]</code></pre><p>idæ˜¯å›¾ç‰‡å‚è€ƒçš„åç§°ï¼Œå›¾ç‰‡å‚è€ƒçš„å®šä¹‰æ–¹å¼å’Œé“¾æ¥å‚è€ƒä¸€æ ·ï¼š</p><pre><code>[id]: url/to/image &quot;optional title attribute&quot;</code></pre><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œmarkdownè¿˜æ²¡æœ‰åŠæ³•æŒ‡å®šå›¾ç‰‡çš„å®½é«˜ï¼Œå¦‚æœéœ€è¦çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨æ™®é€šçš„<code>&lt;img&gt;</code>æ ‡ç­¾ã€‚</p><h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><h4 id="è‡ªåŠ¨é“¾æ¥"><a href="#è‡ªåŠ¨é“¾æ¥" class="headerlink" title="è‡ªåŠ¨é“¾æ¥"></a>è‡ªåŠ¨é“¾æ¥</h4><p>markdownæ”¯æŒä»¥æ¯”è¾ƒç®€çŸ­çš„è‡ªåŠ¨é“¾æ¥å½¢å¼æ¥å¤„ç†ç½‘å€å’Œç”µå­é‚®ä»¶ä¿¡ç®±ï¼Œåªè¦æ˜¯ç”¨å°–æ‹¬å·åŒ…èµ·æ¥ï¼Œmarkdownå°±ä¼šè‡ªåŠ¨æŠŠå®ƒè½¬æˆé“¾æ¥ã€‚å¦‚ï¼š</p><pre><code>&lt;http://www.iwhynot.me&gt;</code></pre><p>ç”Ÿæˆï¼š</p><p><a href="http://www.iwhynot.me" target="_blank" rel="noopener">http://www.iwhynot.me</a></p><p>é‚®ä»¶çš„è‡ªåŠ¨é“¾æ¥ä¹Ÿå¾ˆç±»ä¼¼ï¼Œåªæ˜¯markdownä¼šå…ˆåšä¸€ä¸ªç¼–ç è½¬æ¢çš„è¿‡ç¨‹ï¼ŒæŠŠæ–‡å­—å­—ç¬¦è½¬æˆ16è¿›ä½ç çš„htmlå®ä½“ï¼Œä»¥ç³Šå¼„ä¸€äº›ä¸å¥½çš„é‚®å€æ”¶é›†æœºå™¨äººï¼Œå¦‚ï¼š</p><pre><code>&lt;address@example.com&gt;</code></pre><p>ç”Ÿæˆï¼š</p><p><a href="mailto:&#97;&#100;&#x64;&#x72;&#101;&#115;&#115;&#64;&#101;&#120;&#x61;&#x6d;&#x70;&#108;&#x65;&#x2e;&#x63;&#x6f;&#x6d;" target="_blank" rel="noopener">&#97;&#100;&#x64;&#x72;&#101;&#115;&#115;&#64;&#101;&#120;&#x61;&#x6d;&#x70;&#108;&#x65;&#x2e;&#x63;&#x6f;&#x6d;</a></p><h4 id="åæ–œæ "><a href="#åæ–œæ " class="headerlink" title="åæ–œæ "></a>åæ–œæ </h4><p>markdownå¯ä»¥åˆ©ç”¨åæ–œæ æ¥æ’å…¥ä¸€äº›åœ¨è¯­æ³•ä¸­æœ‰å…¶å®ƒæ„ä¹‰çš„ç¬¦å·ï¼Œå¦‚ï¼š</p><pre><code>\*æœ¬æ¥æ˜¯å¼ºè°ƒçš„æ˜Ÿå·\*</code></pre><p>ç”Ÿæˆï¼š</p><p>*æœ¬æ¥æ˜¯å¼ºè°ƒçš„æ˜Ÿå·*</p><p>markdownæ”¯æŒä»¥ä¸‹è¿™äº›ç¬¦å·å‰é¢åŠ ä¸Šåæ–œæ æ¥å¸®åŠ©æ’å…¥æ™®é€šçš„ç¬¦å·ï¼š</p><pre><code>\ åæ–œçº¿` åå¼•å·* æ˜Ÿå·_ ä¸‹åˆ’çº¿{} èŠ±æ‹¬å·[] æ–¹æ‹¬å·() æ‹¬å¼§# äº•å·+ åŠ å·- å‡å·. è‹±æ–‡ç‚¹å·! æƒŠå¹å·</code></pre><p>OKï¼Œå°±è¿™äº›äº†ï¼Œå‚è€ƒ<a href="http://wowubuntu.com/markdown/" target="_blank" rel="noopener">Markdownä¸­æ–‡ç‰ˆè¯­æ³•è¯´æ˜</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Nowï¼Œå¼€å§‹å§ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŒºå—å…ƒç´ &quot;&gt;&lt;a href=&quot;#åŒºå—å…ƒç´ &quot; class=&quot;headerlink&quot; title=&quot;åŒºå—å…ƒç´ &quot;&gt;&lt;/a&gt;åŒºå—å…ƒç´ &lt;/h2&gt;&lt;h4 id=&quot;æ®µè½ä¸æ¢è¡Œ&quot;&gt;&lt;a href=&quot;#æ®µè½ä¸æ¢è¡Œ&quot; class=&quot;headerlink&quot; title=&quot;æ®µè½ä¸æ¢è¡Œ&quot;&gt;&lt;/a&gt;æ®µè½ä¸æ¢è¡Œ&lt;/h4&gt;&lt;p&gt;ä¸€ä¸ª Markdown æ®µè½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„æ–‡æœ¬è¡Œç»„æˆï¼Œå®ƒçš„å‰åè¦æœ‰ä¸€ä¸ªä»¥ä¸Šçš„ç©ºè¡Œï¼ˆç©ºè¡Œçš„å®šä¹‰æ˜¯æ˜¾ç¤ºä¸Šçœ‹èµ·æ¥åƒæ˜¯ç©ºçš„ï¼Œä¾¿ä¼šè¢«è§†ä¸ºç©ºè¡Œã€‚æ¯”æ–¹è¯´ï¼Œè‹¥æŸä¸€è¡ŒåªåŒ…å«ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼Œåˆ™è¯¥è¡Œä¹Ÿä¼šè¢«è§†ä¸ºç©ºè¡Œï¼‰ã€‚æ™®é€šæ®µè½ä¸è¯¥ç”¨ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦æ¥ç¼©è¿›ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://vhtml.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="markdown" scheme="https://vhtml.github.io/tags/markdown/"/>
    
  </entry>
  
</feed>
